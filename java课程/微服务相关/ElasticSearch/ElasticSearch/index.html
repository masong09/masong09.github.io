
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.6">
    
    
      
        <title>ElasticSearch - 我的文档</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.cd566b2a.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#elasticsearch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="我的文档" class="md-header__button md-logo" aria-label="我的文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            我的文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ElasticSearch
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/01%20Java%E6%A6%82%E8%BF%B0/01%20-%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" class="md-tabs__link md-tabs__link--active">
        Java课程
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC1%E7%AB%A0%20%E9%9D%A2%E8%AF%95%E8%AF%B4%E6%98%8E/" class="md-tabs__link">
        Java就业面试
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      学习文档
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="我的文档" class="md-nav__button md-logo" aria-label="我的文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    我的文档
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Java课程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java课程" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Java课程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1">
          Java基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java基础" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          Java基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_1" type="checkbox" id="__nav_1_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1_1">
          基础部分
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="基础部分" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          基础部分
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/01%20Java%E6%A6%82%E8%BF%B0/01%20-%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        Java概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/02%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/02%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        基本语法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/03%20%E6%95%B0%E7%BB%84/03%20%E6%95%B0%E7%BB%84/" class="md-nav__link">
        数组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/04%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/04%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="md-nav__link">
        面向对象
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/05%20%E5%BC%82%E5%B8%B8/05%20%E5%BC%82%E5%B8%B8/" class="md-nav__link">
        异常
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_2" type="checkbox" id="__nav_1_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1_2">
          高级部分
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="高级部分" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          高级部分
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/06%20%E5%B8%B8%E7%94%A8%E7%B1%BBAPI/06%20%E5%B8%B8%E7%94%A8%E7%B1%BBAPI/" class="md-nav__link">
        常用类API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/07%20%E9%9B%86%E5%90%88/07%20%E9%9B%86%E5%90%88/" class="md-nav__link">
        集合
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/08%20%E6%B3%9B%E5%9E%8B/08%20%E6%B3%9B%E5%9E%8B/" class="md-nav__link">
        泛型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/09%20File%E7%B1%BB%E4%B8%8EIO%E6%B5%81/09%20File%E7%B1%BB%E4%B8%8EIO%E6%B5%81/" class="md-nav__link">
        File类与IO流
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/10%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        网络编程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/11%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/11%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="md-nav__link">
        多线程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/12%20%E5%8F%8D%E5%B0%84/12%20%E5%8F%8D%E5%B0%84/" class="md-nav__link">
        反射
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/13%20Java8%E6%96%B0%E7%89%B9%E6%80%A7/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" class="md-nav__link">
        Java8新特性
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          MySQL数据库
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MySQL数据库" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          MySQL数据库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/14%20MySQL/MySQL5.7%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/" class="md-nav__link">
        MySQL5.7安装文档
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/14%20MySQL/MySQL%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/14%20MySQL/JDBC%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        JDBC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          JavaWeb阶段
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JavaWeb阶段" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          JavaWeb阶段
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day01/day01_HTML%26CSS/" class="md-nav__link">
        HTML&CSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day02/day02_JS%26%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="md-nav__link">
        JS&正则表达式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day03/day03_VUE%26%E4%B9%A6%E5%9F%8E%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        VUE&书城第一阶段
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day04/day04_XML%26Tomcat%26Http%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        XML&Tomcat&Http协议
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day05/day05_Servlet/" class="md-nav__link">
        Servlet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day06/day06_Request%26Response/" class="md-nav__link">
        Request&Response
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day07/day07_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第二阶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day08/day08_Thymeleaf/" class="md-nav__link">
        Thymeleaf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day09/day09_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第三阶段
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day10/day10_%E4%BC%9A%E8%AF%9D%26%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5%281%29/" class="md-nav__link">
        会话&书城项目第四阶段1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day11/day11_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第四阶段2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day12/day12_Filter%26Listener%26%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        Filter&Listener&书城项目第五阶段1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day13/day13_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第五阶段2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../JavaWeb%E9%98%B6%E6%AE%B5/day14/day14_Ajax%26Axios%26%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        Ajax&Axios&书城项目第六阶段
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          经典框架
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="经典框架" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          经典框架
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/Spring%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        Spring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/SpringMVC%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        SpringMVC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/MyBatis%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        MyBatis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/SSM%20%E6%95%B4%E5%90%88%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        SSM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/Maven%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        Maven
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/%E6%A1%86%E6%9E%B6%E9%AB%98%E7%BA%A7%E8%AF%BE%E7%A8%8B%E7%B3%BB%E5%88%97%E4%B9%8BLinuxCentOS7/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%BB%8F%E5%85%B8%E6%A1%86%E6%9E%B6/Redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_5">
          微服务相关
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="微服务相关" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          微服务相关
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Docker/Docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          ElasticSearch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        ElasticSearch
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_1" class="md-nav__link">
    第一章 ElasticSearch简介
  </a>
  
    <nav class="md-nav" aria-label="第一章 ElasticSearch简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-elasticsearch" class="md-nav__link">
    1.1 什么是ElasticSearch
  </a>
  
    <nav class="md-nav" aria-label="1.1 什么是ElasticSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    1.1.1 什么是全文检索
  </a>
  
    <nav class="md-nav" aria-label="1.1.1 什么是全文检索">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1111" class="md-nav__link">
    1.1.1.1  数据分类
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112" class="md-nav__link">
    1.1.1.2 结构化数据搜索
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1113" class="md-nav__link">
    1.1.1.3  非结构化数据查询方法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" class="md-nav__link">
    1.1.2 如何实现全文检索
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113" class="md-nav__link">
    1.1.3 全文检索的应用场景
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114" class="md-nav__link">
    1.1.4 全文检索的实现流程
  </a>
  
    <nav class="md-nav" aria-label="1.1.4 全文检索的实现流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1141" class="md-nav__link">
    1.1.4.1 索引和搜索流程图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1142" class="md-nav__link">
    1.1.4.2 创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1143" class="md-nav__link">
    1.1.4.3 创建文档对象
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1144" class="md-nav__link">
    1.1.4.4 分析文档
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elasticsearchmysql" class="md-nav__link">
    Elasticsearch与mysql的区别
  </a>
  
    <nav class="md-nav" aria-label="Elasticsearch与mysql的区别">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    响应时间
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    分词
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    相关性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1145" class="md-nav__link">
    1.1.4.5 创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1146" class="md-nav__link">
    1.1.4.6 查询索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1147" class="md-nav__link">
    1.1.4.7 用户查询接口
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1148" class="md-nav__link">
    1.1.4.8 创建查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1149" class="md-nav__link">
    1.1.4.9 执行查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11410" class="md-nav__link">
    1.1.4.10 渲染结果
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-elasticsearch" class="md-nav__link">
    1.2 ElasticSearch的使用案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_2" class="md-nav__link">
    第二章 ElasticSearch安装与启动
  </a>
  
    <nav class="md-nav" aria-label="第二章 ElasticSearch安装与启动">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-windows" class="md-nav__link">
    2.1 windows版本安装
  </a>
  
    <nav class="md-nav" aria-label="2.1 windows版本安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-es" class="md-nav__link">
    2.1 下载ES压缩包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-es" class="md-nav__link">
    2.2 安装ES服务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-es" class="md-nav__link">
    2.3 启动ES服务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-es" class="md-nav__link">
    2.4 安装ES的图形化界面插件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-linux" class="md-nav__link">
    2.2 Linux版本安装
  </a>
  
    <nav class="md-nav" aria-label="2.2 Linux版本安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221" class="md-nav__link">
    2.2.1 下载地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-linux" class="md-nav__link">
    2.2.2 Linux安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-docker" class="md-nav__link">
    2.3 docker版本安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_3" class="md-nav__link">
    第三章 ElasticSearch相关概念(术语)
  </a>
  
    <nav class="md-nav" aria-label="第三章 ElasticSearch相关概念(术语)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-elasticsearch" class="md-nav__link">
    3.2 Elasticsearch核心概念
  </a>
  
    <nav class="md-nav" aria-label="3.2 Elasticsearch核心概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-index" class="md-nav__link">
    3.2.1 索引 index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-type" class="md-nav__link">
    3.2.2 类型 type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-field" class="md-nav__link">
    3.2.3 字段Field
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-mapping" class="md-nav__link">
    3.2.4 映射 mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-document" class="md-nav__link">
    3.2.5 文档 document
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_4" class="md-nav__link">
    第四章 ElasticSearch的客户端操作
  </a>
  
    <nav class="md-nav" aria-label="第四章 ElasticSearch的客户端操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-postman" class="md-nav__link">
    4.1 安装Postman工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#41-postman_1" class="md-nav__link">
    4.1 下载Postman工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-postman" class="md-nav__link">
    4.2 注册Postman工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-postmanrestful" class="md-nav__link">
    4.2 用Postman进行Restful接口访问
  </a>
  
    <nav class="md-nav" aria-label="4.2 用Postman进行Restful接口访问">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-elasticsearch" class="md-nav__link">
    4.2.1 ElasticSearch的接口语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-index" class="md-nav__link">
    4.2.2 操作索引index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-indexmapping" class="md-nav__link">
    4.2.2 创建索引index和映射mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kibana" class="md-nav__link">
    kibana安装和使用
  </a>
  
    <nav class="md-nav" aria-label="kibana安装和使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kibana_1" class="md-nav__link">
    kibana安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423" class="md-nav__link">
    4.2.3 操作映射
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#425-document" class="md-nav__link">
    4.2.5 操作文档document
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#429-match" class="md-nav__link">
    4.2.9 全文查询-match查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4210-term" class="md-nav__link">
    4.2.10 查询文档-term查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4211" class="md-nav__link">
    4.2.11 查询全部
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4212" class="md-nav__link">
    4.2.12 关键字搜索数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4213-dsl" class="md-nav__link">
    4.2.13 DSL 查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4214" class="md-nav__link">
    4.2.14 高亮显示
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4215" class="md-nav__link">
    4.2.15 聚合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4216" class="md-nav__link">
    4.2.16 指定响应字段
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4217" class="md-nav__link">
    4.2.17 判断文档是否存在
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4218" class="md-nav__link">
    4.2.18 批量操作
  </a>
  
    <nav class="md-nav" aria-label="4.2.18 批量操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#42181" class="md-nav__link">
    4.2.18.1 批量查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42182-_bulk" class="md-nav__link">
    4.2.18.2 _bulk操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4219" class="md-nav__link">
    4.2.19 分页
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terms" class="md-nav__link">
    terms查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#range" class="md-nav__link">
    range查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ik-elasticsearch" class="md-nav__link">
    第五章 IK 分词器和ElasticSearch集成使用
  </a>
  
    <nav class="md-nav" aria-label="第五章 IK 分词器和ElasticSearch集成使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    5.1 上述查询存在问题分析
  </a>
  
    <nav class="md-nav" aria-label="5.1 上述查询存在问题分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard" class="md-nav__link">
    Standard
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-ik" class="md-nav__link">
    5.2 IK分词器简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-elasticsearchik" class="md-nav__link">
    5.3 ElasticSearch集成IK分词器
  </a>
  
    <nav class="md-nav" aria-label="5.3 ElasticSearch集成IK分词器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#531-ik" class="md-nav__link">
    5.3.1 IK分词器的安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532-ik" class="md-nav__link">
    5.3.2 IK分词器测试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-mapping" class="md-nav__link">
    5.4 修改索引映射mapping
  </a>
  
    <nav class="md-nav" aria-label="5.4 修改索引映射mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#541" class="md-nav__link">
    5.4.1 重建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#543-term" class="md-nav__link">
    5.4.3 再次测试term测试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#es-springdata-es" class="md-nav__link">
    第六章 ES &amp; SpringData ES
  </a>
  
    <nav class="md-nav" aria-label="第六章 ES &amp; SpringData ES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61" class="md-nav__link">
    6.1 高级客户端
  </a>
  
    <nav class="md-nav" aria-label="6.1 高级客户端">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    添加索引和映射
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    查询索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    删除索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    判断索引是否存在
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    添加文档,使用map作为数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    添加文档,使用对象作为数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    修改文档
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    根据id查询文档
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id_1" class="md-nav__link">
    根据id删除文档
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    批量操作-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    导入数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchall" class="md-nav__link">
    查询所有matchAll查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#term" class="md-nav__link">
    term 查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchquery" class="md-nav__link">
    matchQuery:词条分词查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    模糊查询-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_2" class="md-nav__link">
    范围查询-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querystring-" class="md-nav__link">
    queryString查询-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    布尔查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    聚合查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    高亮查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    重建索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-springdata-elasticsearch" class="md-nav__link">
    6.2 SpringData Elasticsearch客户端
  </a>
  
    <nav class="md-nav" aria-label="6.2 SpringData Elasticsearch客户端">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621" class="md-nav__link">
    6.2.1 目标
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622" class="md-nav__link">
    6.2.2 讲解
  </a>
  
    <nav class="md-nav" aria-label="6.2.2 讲解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6221-springdatajpa" class="md-nav__link">
    6.2.2.1 SpringDataJpa介绍[集成]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6222-spring-data-elasticsearch" class="md-nav__link">
    6.2.2.2 Spring Data ElasticSearch简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6223-springdata-elasticsearch" class="md-nav__link">
    6.2.2.3 SpringData Elasticsearch入门
  </a>
  
    <nav class="md-nav" aria-label="6.2.2.3 SpringData Elasticsearch入门">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#62231" class="md-nav__link">
    6.2.2.3.1 搭建工程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62232" class="md-nav__link">
    6.2.2.3.2 增加索引数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../RabbitMQ/RabbitMQ/" class="md-nav__link">
        RabbitMQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringBoot/SpringBoot/" class="md-nav__link">
        SpringBoot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringCloud/SpringCloud/" class="md-nav__link">
        SpringCloud
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_6">
          高级技术
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="高级技术" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          高级技术
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/git/Git%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/juc/JUC/" class="md-nav__link">
        JUC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/jvm/jvm/" class="md-nav__link">
        jvm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/mysql%E9%AB%98%E7%BA%A7/MySQL%E9%AB%98%E7%BA%A7/" class="md-nav__link">
        mysql高级
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/mysql%E9%AB%98%E7%BA%A7/MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" class="md-nav__link">
        MySQL主从复制
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/MyCat/Mycat/" class="md-nav__link">
        MyCat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/nginx/Nginx/" class="md-nav__link">
        Nginx
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7">
          项目文档
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="项目文档" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          项目文档
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_1" type="checkbox" id="__nav_1_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_1">
          美年旅游
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="美年旅游" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_1">
          <span class="md-nav__icon md-icon"></span>
          美年旅游
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day01/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC1%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游01
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day02/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC2%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day03/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC3%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游03
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day04/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC4%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day05/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC5%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游05
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day06/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC6%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游06
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day07/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC7%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游07
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day08/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC8%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游08
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day09/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC9%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游09
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day10/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC10%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day11/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC11%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游11
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_2" type="checkbox" id="__nav_1_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_2">
          尚邻网
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="尚邻网" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_2">
          <span class="md-nav__icon md-icon"></span>
          尚邻网
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/1.%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83/" class="md-nav__link">
        搭建环境
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/2.%E7%94%A8%E6%88%B7%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86/" class="md-nav__link">
        用户角色管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/3.Apache%20Dubbo/" class="md-nav__link">
        Apache Dubbo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/4.%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86/" class="md-nav__link">
        服务拆分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/5.%E4%BA%8C%E6%89%8B%E6%88%BF%E7%AE%A1%E7%90%86/" class="md-nav__link">
        二手房管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/6.%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/" class="md-nav__link">
        图片上传
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/7.%E5%89%8D%E7%AB%AF%E6%88%BF%E6%BA%90%E5%B1%95%E7%A4%BA/" class="md-nav__link">
        前端房源展示
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/8.%E5%89%8D%E7%AB%AF%E7%99%BB%E5%BD%95%E4%B8%8E%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%85%B3%E6%B3%A8/" class="md-nav__link">
        前端登录与注册与关注
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/9.%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" class="md-nav__link">
        权限管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/10.spring%20security/" class="md-nav__link">
        spring security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/11.session%E5%85%B1%E4%BA%AB/" class="md-nav__link">
        session共享
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_3" type="checkbox" id="__nav_1_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_3">
          谷粒商城
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="谷粒商城" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_3">
          <span class="md-nav__icon md-icon"></span>
          谷粒商城
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/1.%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%88nginx%E3%80%81cors%E3%80%81oss%EF%BC%89/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        谷粒商城01
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/2.%E5%88%86%E7%B1%BB%E3%80%81%E8%A7%84%E6%A0%BC%E3%80%81%E5%95%86%E5%93%81%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/%E8%A7%84%E6%A0%BC%E5%8F%82%E6%95%B0%E5%8F%8A%E5%95%86%E5%93%81%E6%96%B0%E5%A2%9E/" class="md-nav__link">
        谷粒商城02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/3.%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%8F%8Aseata/%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%8F%8Aseata/" class="md-nav__link">
        谷粒商城03
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/4.elasticsearch%28DSL%E5%8F%8ASpringData-Elasticsearch%29/elasticsearch/" class="md-nav__link">
        谷粒商城04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/5.%E5%95%86%E5%93%81%E6%90%9C%E7%B4%A2/%E5%95%86%E5%93%81%E6%90%9C%E7%B4%A2/" class="md-nav__link">
        谷粒商城05
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/6.%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%EF%BC%88Thymeleaf%EF%BC%89%E5%8F%8A%E6%90%9C%E7%B4%A2%E9%A1%B5%E6%B8%B2%E6%9F%93/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E-Thymeleaf/" class="md-nav__link">
        谷粒商城06
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/7.%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%EF%BC%88RabbitMQ%EF%BC%89/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5/" class="md-nav__link">
        谷粒商城07
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/8.%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%28%E7%BC%93%E5%AD%98%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E3%80%81Redisson%E3%80%81%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%29/%E9%A6%96%E9%A1%B5%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB/" class="md-nav__link">
        谷粒商城08
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/9.%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E5%8F%8A%E5%BC%82%E6%AD%A5%E7%BC%96%E6%8E%92%EF%BC%88CompletableFuture%EF%BC%89/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5/" class="md-nav__link">
        谷粒商城09
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/10.%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%EF%BC%88jwt%EF%BC%89/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%EF%BC%88jwt%EF%BC%89/" class="md-nav__link">
        谷粒商城10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/11.%E8%B4%AD%E7%89%A9%E8%BD%A6%EF%BC%88SpringTask%EF%BC%89/%E8%B4%AD%E7%89%A9%E8%BD%A6/" class="md-nav__link">
        谷粒商城11
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/12.%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%88xxl-job%EF%BC%89/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%88xxl-job%EF%BC%89/" class="md-nav__link">
        谷粒商城12
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/13.%E8%AE%A2%E5%8D%95%E3%80%81%E5%BA%93%E5%AD%98/%E8%AE%A2%E5%8D%95%E3%80%81%E5%BA%93%E5%AD%98/" class="md-nav__link">
        谷粒商城13
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/14.%E6%94%AF%E4%BB%98%E3%80%81%E7%A7%92%E6%9D%80/%E6%94%AF%E4%BB%98%E3%80%81%E7%A7%92%E6%9D%80/" class="md-nav__link">
        谷粒商城14
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_4" type="checkbox" id="__nav_1_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_4">
          尚融宝
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="尚融宝" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_4">
          <span class="md-nav__icon md-icon"></span>
          尚融宝
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part01-%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D/Part01-%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        项目介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part02-MyBatis-Plus/Part02-MyBatis-Plus/" class="md-nav__link">
        MyBatis-Plus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part03-%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA/Part03-%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        后端接口工程搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part04-%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/Part04-%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        前端知识
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part05-%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/Part05-%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        管理平台前端搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part06-Alibaba%20EasyExcel/Part06-Alibaba%20EasyExcel/" class="md-nav__link">
        Alibaba EasyExcel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part07-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/Part07-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/" class="md-nav__link">
        数据字典
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part08-Redis%E7%BC%93%E5%AD%98/Part08-Redis%E7%BC%93%E5%AD%98/" class="md-nav__link">
        Redis缓存
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part09-NuxtJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93/Part09-NuxtJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93/" class="md-nav__link">
        NuxtJS服务器端渲染
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part10-%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1/Part10-%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1/" class="md-nav__link">
        阿里云短信
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java课程/项目文档/尚融宝/Part11-分布式文件系统-阿里云OSS/分布式文件系统-阿里云OSS" class="md-nav__link">
        阿里云OSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part12-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C/Part12-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C/" class="md-nav__link">
        用户注册
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part13-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-%E8%AE%BF%E9%97%AE%E4%BB%A4%E7%89%8C/Part13-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-%E8%AE%BF%E9%97%AE%E4%BB%A4%E7%89%8C/" class="md-nav__link">
        访问令牌
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part14-%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/Part14-%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/" class="md-nav__link">
        用户认证
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part15-%E4%BC%9A%E5%91%98%E7%AE%A1%E7%90%86/Part15-%E4%BC%9A%E5%91%98%E7%AE%A1%E7%90%86/" class="md-nav__link">
        会员管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part16-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-OAuth2/Part16-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-OAuth2/" class="md-nav__link">
        OAuth2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part17-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/Part17-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="md-nav__link">
        内网穿透
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part18-%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/Part18-%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/" class="md-nav__link">
        微信登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part19-%20SpringCloud/Part19-%20SpringCloud/" class="md-nav__link">
        SpringCloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part20-%E8%B4%A6%E6%88%B7%E7%BB%91%E5%AE%9A/Part20-%E8%B4%A6%E6%88%B7%E7%BB%91%E5%AE%9A/" class="md-nav__link">
        账户绑定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part21-%E7%94%B3%E8%AF%B7%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6/Part21-%E7%94%B3%E8%AF%B7%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6/" class="md-nav__link">
        申请借款额度
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part22-%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6%E5%AE%A1%E6%A0%B8/Part22-%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6%E5%AE%A1%E6%A0%B8/" class="md-nav__link">
        借款额度审核
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part23-%E5%80%9F%E6%AC%BE%E7%94%B3%E8%AF%B7/Part23-%E5%80%9F%E6%AC%BE%E7%94%B3%E8%AF%B7/" class="md-nav__link">
        借款申请
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part24-%E5%80%9F%E6%AC%BE%E5%AE%A1%E6%A0%B8/Part24-%E5%80%9F%E6%AC%BE%E5%AE%A1%E6%A0%B8/" class="md-nav__link">
        借款审核
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part25-%E6%A0%87%E7%9A%84%E7%AE%A1%E7%90%86/Part25-%E6%A0%87%E7%9A%84%E7%AE%A1%E7%90%86/" class="md-nav__link">
        标的管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part26-%E6%88%91%E8%A6%81%E6%8A%95%E8%B5%84/Part26-%E6%88%91%E8%A6%81%E6%8A%95%E8%B5%84/" class="md-nav__link">
        我要投资
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part27-%E5%85%85%E5%80%BC/Part27-%E5%85%85%E5%80%BC/" class="md-nav__link">
        充值
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part28-%E6%8A%95%E6%A0%87/Part28-%E6%8A%95%E6%A0%87/" class="md-nav__link">
        投标
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part29-%E6%94%BE%E6%AC%BE/Part29-%E6%94%BE%E6%AC%BE/" class="md-nav__link">
        放款
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part30-%E6%8A%95%E8%B5%84%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA/Part30-%E6%8A%95%E8%B5%84%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA/" class="md-nav__link">
        投资列表展示
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part31-%E6%8F%90%E7%8E%B0%E5%92%8C%E8%BF%98%E6%AC%BE/Part31-%E6%8F%90%E7%8E%B0%E5%92%8C%E8%BF%98%E6%AC%BE/" class="md-nav__link">
        提现和还款
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part32-%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83/Part32-%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83/" class="md-nav__link">
        个人中心
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part33-%E7%BD%91%E5%85%B3/Part33-%E7%BD%91%E5%85%B3/" class="md-nav__link">
        网关
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part34-%E8%A1%A5%E5%85%85/Part34-%E8%A1%A5%E5%85%85/" class="md-nav__link">
        补充
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part35-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/Part35-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/" class="md-nav__link">
        微信支付
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_5" type="checkbox" id="__nav_1_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_5">
          尚医通
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="尚医通" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_5">
          <span class="md-nav__icon md-icon"></span>
          尚医通
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day01%20%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%E4%B8%8EMyBatis%20Plus/day01%20%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%E4%B8%8E%20Mybatis%20Plus/" class="md-nav__link">
        项目介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day02%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%E5%92%8C%E5%8C%BB%E9%99%A2%E8%AE%BE%E7%BD%AE/day02%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%E5%92%8C%E5%8C%BB%E9%99%A2%E8%AE%BE%E7%BD%AE/" class="md-nav__link">
        搭建环境和医院设置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day03%20%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/day03%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/" class="md-nav__link">
        前端基础知识（一）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day04%20%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%BA%8C%EF%BC%89/day04%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        前端基础知识（二）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day05%E5%B9%B3%E5%8F%B0%E7%AE%A1%E7%90%86%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/day05%E5%B9%B3%E5%8F%B0%E7%AE%A1%E7%90%86%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        平台管理前端搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day06%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/day06%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/" class="md-nav__link">
        数据字典
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day07mongodb/day07mongodb/" class="md-nav__link">
        mongodb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day08%E5%8C%BB%E9%99%A2%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3/day08%E5%8C%BB%E9%99%A2%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3/" class="md-nav__link">
        医院上传接口
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day09%E5%8C%BB%E9%99%A2%E7%AE%A1%E7%90%86/day09%E5%8C%BB%E9%99%A2%E7%AE%A1%E7%90%86/" class="md-nav__link">
        医院管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day10%E6%8E%92%E7%8F%AD%E7%AE%A1%E7%90%86%E5%92%8C%E7%BD%91%E5%85%B3/day10%E6%8E%92%E7%8F%AD%E7%AE%A1%E7%90%86%E5%92%8C%E7%BD%91%E5%85%B3/" class="md-nav__link">
        排班管理和网关
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day11%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%A6%96%E9%A1%B5/day11%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%A6%96%E9%A1%B5/" class="md-nav__link">
        平台前端搭建与首页
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day12%E6%89%8B%E6%9C%BA%E7%99%BB%E5%BD%95/day12%E6%89%8B%E6%9C%BA%E7%99%BB%E5%BD%95/" class="md-nav__link">
        手机登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day13%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/day13%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/" class="md-nav__link">
        微信登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day14%E9%98%BF%E9%87%8C%E4%BA%91OSS%E3%80%81%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E4%B8%8E%E5%B0%B1%E8%AF%8A%E4%BA%BA/day14%E9%98%BF%E9%87%8C%E4%BA%91OSS%E3%80%81%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E4%B8%8E%E5%B0%B1%E8%AF%8A%E4%BA%BA/" class="md-nav__link">
        阿里云OSS、用户认证与就诊人
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day15%E9%A2%84%E7%BA%A6%E6%8C%82%E5%8F%B7/day15%E9%A2%84%E7%BA%A6%E6%8C%82%E5%8F%B7/" class="md-nav__link">
        预约挂号
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day16%E9%A2%84%E7%BA%A6%E4%B8%8B%E5%8D%95/day16%E9%A2%84%E7%BA%A6%E4%B8%8B%E5%8D%95/" class="md-nav__link">
        预约下单
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day17%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/day17%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/" class="md-nav__link">
        微信支付
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day18%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%B8%8E%E7%BB%9F%E8%AE%A1/day18%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%B8%8E%E7%BB%9F%E8%AE%A1/" class="md-nav__link">
        定时任务与统计
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Java就业面试
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java就业面试" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Java就业面试
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC1%E7%AB%A0%20%E9%9D%A2%E8%AF%95%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        第1章 面试说明
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC2%E7%AB%A0%20%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/" class="md-nav__link">
        第2章 手写代码
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC3%E7%AB%A0%20JavaSE/" class="md-nav__link">
        第3章 JavaSE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC4%E7%AB%A0%20JVM/" class="md-nav__link">
        第4章 JVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC5%E7%AB%A0%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        第5章 设计模式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC6%E7%AB%A0%20MySql/" class="md-nav__link">
        第6章 MySql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC7%E7%AB%A0%20Java%20Web/" class="md-nav__link">
        第7章 Java Web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC8%E7%AB%A0%20SSM%E6%A1%86%E6%9E%B6/" class="md-nav__link">
        第8章 SSM框架
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC9%E7%AB%A0%20SpringBoot/" class="md-nav__link">
        第9章 SpringBoot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC10%E7%AB%A0%20SpringCloud/" class="md-nav__link">
        第10章 SpringCloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC11%E7%AB%A0%20Redis/" class="md-nav__link">
        第11章 Redis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC12%E7%AB%A0%20MQ/" class="md-nav__link">
        第12章 MQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC13%E7%AB%A0%20ElasticSearch/" class="md-nav__link">
        第13章 ElasticSearch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC14%E7%AB%A0%20Dubbo/" class="md-nav__link">
        第14章 Dubbo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC15%E7%AB%A0%20Zookeeper/" class="md-nav__link">
        第15章 Zookeeper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC16%E7%AB%A0%20Git/" class="md-nav__link">
        第16章 Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC17%E7%AB%A0%20Linux/" class="md-nav__link">
        第17章 Linux
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        学习文档
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_1" class="md-nav__link">
    第一章 ElasticSearch简介
  </a>
  
    <nav class="md-nav" aria-label="第一章 ElasticSearch简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-elasticsearch" class="md-nav__link">
    1.1 什么是ElasticSearch
  </a>
  
    <nav class="md-nav" aria-label="1.1 什么是ElasticSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    1.1.1 什么是全文检索
  </a>
  
    <nav class="md-nav" aria-label="1.1.1 什么是全文检索">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1111" class="md-nav__link">
    1.1.1.1  数据分类
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112" class="md-nav__link">
    1.1.1.2 结构化数据搜索
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1113" class="md-nav__link">
    1.1.1.3  非结构化数据查询方法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" class="md-nav__link">
    1.1.2 如何实现全文检索
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113" class="md-nav__link">
    1.1.3 全文检索的应用场景
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114" class="md-nav__link">
    1.1.4 全文检索的实现流程
  </a>
  
    <nav class="md-nav" aria-label="1.1.4 全文检索的实现流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1141" class="md-nav__link">
    1.1.4.1 索引和搜索流程图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1142" class="md-nav__link">
    1.1.4.2 创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1143" class="md-nav__link">
    1.1.4.3 创建文档对象
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1144" class="md-nav__link">
    1.1.4.4 分析文档
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elasticsearchmysql" class="md-nav__link">
    Elasticsearch与mysql的区别
  </a>
  
    <nav class="md-nav" aria-label="Elasticsearch与mysql的区别">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    响应时间
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    分词
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    相关性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1145" class="md-nav__link">
    1.1.4.5 创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1146" class="md-nav__link">
    1.1.4.6 查询索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1147" class="md-nav__link">
    1.1.4.7 用户查询接口
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1148" class="md-nav__link">
    1.1.4.8 创建查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1149" class="md-nav__link">
    1.1.4.9 执行查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11410" class="md-nav__link">
    1.1.4.10 渲染结果
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-elasticsearch" class="md-nav__link">
    1.2 ElasticSearch的使用案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_2" class="md-nav__link">
    第二章 ElasticSearch安装与启动
  </a>
  
    <nav class="md-nav" aria-label="第二章 ElasticSearch安装与启动">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-windows" class="md-nav__link">
    2.1 windows版本安装
  </a>
  
    <nav class="md-nav" aria-label="2.1 windows版本安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-es" class="md-nav__link">
    2.1 下载ES压缩包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-es" class="md-nav__link">
    2.2 安装ES服务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-es" class="md-nav__link">
    2.3 启动ES服务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-es" class="md-nav__link">
    2.4 安装ES的图形化界面插件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-linux" class="md-nav__link">
    2.2 Linux版本安装
  </a>
  
    <nav class="md-nav" aria-label="2.2 Linux版本安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221" class="md-nav__link">
    2.2.1 下载地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-linux" class="md-nav__link">
    2.2.2 Linux安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-docker" class="md-nav__link">
    2.3 docker版本安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_3" class="md-nav__link">
    第三章 ElasticSearch相关概念(术语)
  </a>
  
    <nav class="md-nav" aria-label="第三章 ElasticSearch相关概念(术语)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-elasticsearch" class="md-nav__link">
    3.2 Elasticsearch核心概念
  </a>
  
    <nav class="md-nav" aria-label="3.2 Elasticsearch核心概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-index" class="md-nav__link">
    3.2.1 索引 index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-type" class="md-nav__link">
    3.2.2 类型 type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-field" class="md-nav__link">
    3.2.3 字段Field
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-mapping" class="md-nav__link">
    3.2.4 映射 mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-document" class="md-nav__link">
    3.2.5 文档 document
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch_4" class="md-nav__link">
    第四章 ElasticSearch的客户端操作
  </a>
  
    <nav class="md-nav" aria-label="第四章 ElasticSearch的客户端操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-postman" class="md-nav__link">
    4.1 安装Postman工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#41-postman_1" class="md-nav__link">
    4.1 下载Postman工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-postman" class="md-nav__link">
    4.2 注册Postman工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-postmanrestful" class="md-nav__link">
    4.2 用Postman进行Restful接口访问
  </a>
  
    <nav class="md-nav" aria-label="4.2 用Postman进行Restful接口访问">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-elasticsearch" class="md-nav__link">
    4.2.1 ElasticSearch的接口语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-index" class="md-nav__link">
    4.2.2 操作索引index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-indexmapping" class="md-nav__link">
    4.2.2 创建索引index和映射mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kibana" class="md-nav__link">
    kibana安装和使用
  </a>
  
    <nav class="md-nav" aria-label="kibana安装和使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kibana_1" class="md-nav__link">
    kibana安装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423" class="md-nav__link">
    4.2.3 操作映射
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#425-document" class="md-nav__link">
    4.2.5 操作文档document
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#429-match" class="md-nav__link">
    4.2.9 全文查询-match查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4210-term" class="md-nav__link">
    4.2.10 查询文档-term查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4211" class="md-nav__link">
    4.2.11 查询全部
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4212" class="md-nav__link">
    4.2.12 关键字搜索数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4213-dsl" class="md-nav__link">
    4.2.13 DSL 查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4214" class="md-nav__link">
    4.2.14 高亮显示
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4215" class="md-nav__link">
    4.2.15 聚合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4216" class="md-nav__link">
    4.2.16 指定响应字段
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4217" class="md-nav__link">
    4.2.17 判断文档是否存在
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4218" class="md-nav__link">
    4.2.18 批量操作
  </a>
  
    <nav class="md-nav" aria-label="4.2.18 批量操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#42181" class="md-nav__link">
    4.2.18.1 批量查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42182-_bulk" class="md-nav__link">
    4.2.18.2 _bulk操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4219" class="md-nav__link">
    4.2.19 分页
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terms" class="md-nav__link">
    terms查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#range" class="md-nav__link">
    range查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ik-elasticsearch" class="md-nav__link">
    第五章 IK 分词器和ElasticSearch集成使用
  </a>
  
    <nav class="md-nav" aria-label="第五章 IK 分词器和ElasticSearch集成使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    5.1 上述查询存在问题分析
  </a>
  
    <nav class="md-nav" aria-label="5.1 上述查询存在问题分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard" class="md-nav__link">
    Standard
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-ik" class="md-nav__link">
    5.2 IK分词器简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-elasticsearchik" class="md-nav__link">
    5.3 ElasticSearch集成IK分词器
  </a>
  
    <nav class="md-nav" aria-label="5.3 ElasticSearch集成IK分词器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#531-ik" class="md-nav__link">
    5.3.1 IK分词器的安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532-ik" class="md-nav__link">
    5.3.2 IK分词器测试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-mapping" class="md-nav__link">
    5.4 修改索引映射mapping
  </a>
  
    <nav class="md-nav" aria-label="5.4 修改索引映射mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#541" class="md-nav__link">
    5.4.1 重建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#543-term" class="md-nav__link">
    5.4.3 再次测试term测试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#es-springdata-es" class="md-nav__link">
    第六章 ES &amp; SpringData ES
  </a>
  
    <nav class="md-nav" aria-label="第六章 ES &amp; SpringData ES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61" class="md-nav__link">
    6.1 高级客户端
  </a>
  
    <nav class="md-nav" aria-label="6.1 高级客户端">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    添加索引和映射
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    查询索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    删除索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    判断索引是否存在
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    添加文档,使用map作为数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    添加文档,使用对象作为数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    修改文档
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    根据id查询文档
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id_1" class="md-nav__link">
    根据id删除文档
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    批量操作-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    导入数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchall" class="md-nav__link">
    查询所有matchAll查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#term" class="md-nav__link">
    term 查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchquery" class="md-nav__link">
    matchQuery:词条分词查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    模糊查询-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_2" class="md-nav__link">
    范围查询-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querystring-" class="md-nav__link">
    queryString查询-脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    布尔查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    聚合查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    高亮查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    重建索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-springdata-elasticsearch" class="md-nav__link">
    6.2 SpringData Elasticsearch客户端
  </a>
  
    <nav class="md-nav" aria-label="6.2 SpringData Elasticsearch客户端">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621" class="md-nav__link">
    6.2.1 目标
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622" class="md-nav__link">
    6.2.2 讲解
  </a>
  
    <nav class="md-nav" aria-label="6.2.2 讲解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6221-springdatajpa" class="md-nav__link">
    6.2.2.1 SpringDataJpa介绍[集成]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6222-spring-data-elasticsearch" class="md-nav__link">
    6.2.2.2 Spring Data ElasticSearch简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6223-springdata-elasticsearch" class="md-nav__link">
    6.2.2.3 SpringData Elasticsearch入门
  </a>
  
    <nav class="md-nav" aria-label="6.2.2.3 SpringData Elasticsearch入门">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#62231" class="md-nav__link">
    6.2.2.3.1 搭建工程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62232" class="md-nav__link">
    6.2.2.3.2 增加索引数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="elasticsearch">ElasticSearch<a class="headerlink" href="#elasticsearch" title="Permanent link">&para;</a></h1>
<h2 id="elasticsearch_1">第一章 ElasticSearch简介<a class="headerlink" href="#elasticsearch_1" title="Permanent link">&para;</a></h2>
<h3 id="11-elasticsearch">1.1 什么是ElasticSearch<a class="headerlink" href="#11-elasticsearch" title="Permanent link">&para;</a></h3>
<p>Elaticsearch，简称为es， es是一个开源的高扩展的分布式全文检索引擎，它可以近乎实时的存储、检索数据；本身扩展性很好，可以扩展到上百台服务器，处理PB级别的数据。es也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。</p>
<h4 id="111">1.1.1 什么是全文检索<a class="headerlink" href="#111" title="Permanent link">&para;</a></h4>
<h5 id="1111">1.1.1.1  数据分类<a class="headerlink" href="#1111" title="Permanent link">&para;</a></h5>
<p>我们生活中的数据总体分为两种：结构化数据和非结构化数据。</p>
<ul>
<li>
<p>结构化数据：指具有固定格式或有限长度的数据，如数据库，元数据等。</p>
</li>
<li>
<p>非结构化数据：指不定长或无固定格式的数据，如邮件，word文档等磁盘上的文件</p>
</li>
</ul>
<h5 id="1112">1.1.1.2 结构化数据搜索<a class="headerlink" href="#1112" title="Permanent link">&para;</a></h5>
<p>常见的结构化数据也就是数据库中的数据。在数据库中搜索很容易实现，通常都是使用sql语句进行查询，而且能很快的得到查询结果。</p>
<blockquote>
<p>为什么数据库搜索很容易？</p>
</blockquote>
<p>因为数据库中的数据存储是有规律的，有行有列而且数据格式、数据长度都是固定的。</p>
<h5 id="1113">1.1.1.3  非结构化数据查询方法<a class="headerlink" href="#1113" title="Permanent link">&para;</a></h5>
<p>（1）顺序扫描法</p>
<p>所谓顺序扫描，比如要找内容包含某一个字符串的文件，就是一个文档一个文档的看，对于每一个文档，从头看到尾，如果此文档包含此字符串，则此文档为我们要找的文件，接着看下一个文件，直到扫描完所有的文件。如利用windows的搜索也可以搜索文件内容，只是相当的慢。</p>
<p>（2）全文检索</p>
<p>将非结构化数据中的一部分信息提取出来，重新组织，使其变得有一定结构，然后对此有一定结构的数据进行搜索，从而达到搜索相对较快的目的。这部分从非结构化数据中提取出的然后重新组织的信息，我们称之索引。</p>
<p>例如：字典。字典的拼音表和部首检字表就相当于字典的索引，对每一个字的解释是非结构化的，如果字典没有音节表和部首检字表，在茫茫辞海中找一个字只能顺序扫描。然而字的某些信息可以提取出来进行结构化处理，比如读音，就比较结构化，分声母和韵母，于是将读音拿出来按一定的顺序排列，每一项读音都指向此字的详细解释的页数。我们搜索时按结构化的拼音搜到读音，然后按其指向的页数，便可找到我们的非结构化数据——也即对字的解释。</p>
<blockquote>
<p>这种先建立索引，再对索引进行搜索的过程就叫全文检索</p>
</blockquote>
<p>虽然创建索引的过程也是非常耗时的，但是索引一旦创建就可以多次使用，全文检索主要处理的是查询，所以耗时间创建索引是值得的。</p>
<h4 id="112">1.1.2 如何实现全文检索<a class="headerlink" href="#112" title="Permanent link">&para;</a></h4>
<p>可以使用Lucene实现全文检索。Lucene是apache下的一个开放源代码的全文检索引擎工具包。提供了完整的查询引擎和索引引擎，部分文本分析引擎。Lucene的目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能。</p>
<h4 id="113">1.1.3 全文检索的应用场景<a class="headerlink" href="#113" title="Permanent link">&para;</a></h4>
<p>对于数据量大、数据结构不固定的数据可采用全文检索方式搜索，比如百度、Google等搜索引擎、论坛站内搜索、电商网站站内搜索等。</p>
<h4 id="114">1.1.4 全文检索的实现流程<a class="headerlink" href="#114" title="Permanent link">&para;</a></h4>
<h5 id="1141">1.1.4.1 索引和搜索流程图<a class="headerlink" href="#1141" title="Permanent link">&para;</a></h5>
<p><img alt="1587134618092" src="../imgs/1587134618092.png" /></p>
<p>1、绿色表示索引过程，对要搜索的原始内容进行索引构建一个索引库，索引过程包括：</p>
<p>确定原始内容即要搜索的内容 ----&gt;采集文档----&gt;创建文档----&gt;分析文档----&gt;索引文档</p>
<p>​         </p>
<p>2、红色表示搜索过程，从索引库中搜索内容，搜索过程包括：</p>
<p>用户通过搜索界面----&gt;创建查询----&gt;执行搜索，从索引库搜索----&gt;渲染搜索结果</p>
<p>全文检索大体分两个过程，索引创建 (Indexing) 和搜索索引 (Search) 。</p>
<ul>
<li>
<p>索引创建：将现实世界中所有的结构化和非结构化数据提取信息，创建索引的过程。</p>
</li>
<li>
<p>搜索索引：就是得到用户的查询请求，搜索创建的索引，然后返回结果的过程。</p>
</li>
</ul>
<h5 id="1142">1.1.4.2 创建索引<a class="headerlink" href="#1142" title="Permanent link">&para;</a></h5>
<p>对文档索引的过程，将用户要搜索的文档内容进行索引，索引存储在索引库（index）中。</p>
<p>索引里面究竟需要存些什么呢？</p>
<p>首先我们来看为什么顺序扫描的速度慢：</p>
<p>其实是由于我们想要搜索的信息和非结构化数据中所存储的信息不一致造成的。</p>
<p>非结构化数据中所存储的信息是每个文件包含哪些字符串，也即已知文件，欲求字符串相对容易，也即是从文件到字符串的映射。而我们想搜索的信息是哪些文件包含此字符串，也即已知字符串，欲求文件，也即从字符串到文件的映射。两者恰恰相反。于是如果索引总能够保存从字符串到文件的映射，则会大大提高搜索速度。</p>
<h5 id="1143">1.1.4.3 创建文档对象<a class="headerlink" href="#1143" title="Permanent link">&para;</a></h5>
<p>获取原始内容的目的是为了索引，在索引前需要将原始内容创建成文档（Document），文档中包括一个一个的域（Field），域中存储内容。</p>
<p>这里我们可以将磁盘上的一个文件当成一个document，Document中包括一些Field（file_name文件名称、file_path文件路径、file_size文件大小、file_content文件内容），如下图：</p>
<p><img alt="1587134893118" src="../imgs/1587134893118.png" /></p>
<p>注意：每个Document可以有多个Field，不同的Document可以有不同的Field，同一个Document可以有相同的Field（域名和域值都相同）</p>
<p>每个文档都有一个唯一的编号，就是文档id。</p>
<h5 id="1144">1.1.4.4 分析文档<a class="headerlink" href="#1144" title="Permanent link">&para;</a></h5>
<p>将原始内容创建为包含域（Field）的文档（document），需要再对域中的内容进行分析</p>
<h4 id="elasticsearchmysql">Elasticsearch与mysql的区别<a class="headerlink" href="#elasticsearchmysql" title="Permanent link">&para;</a></h4>
<h5 id="_1">响应时间<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h5>
<blockquote>
<p>MySQL</p>
</blockquote>
<p>背景：
当数据库中的文档数仅仅上万条时，关键词查询就比较慢了。如果一旦到企业级的数据，响应速度就会更加不可接受。</p>
<p>原因：
在数据库做模糊查询时，如LIKE语句，它会遍历整张表，同时进行字符串匹配。</p>
<p>例如，在数据库查询“市场”时，数据库会在每一条记录去匹配“市场”这两字是否出现。实际上，并不是所有记录都包含“市场”，所以做了很多无用功。</p>
<p>这个步骤都不高效，而且随着数据量的增大，消耗的资源和时间都会线性的增长。</p>
<blockquote>
<p>Elasticsearch</p>
</blockquote>
<p>提升：
小章使用了ES搜索服务后，发现这个问题被很好解决，TB级数据在毫秒级就能返回检索结果，很好地解决了痛点。</p>
<p>原因：
而Elasticsearch是基于倒排索引的，例子如下。</p>
<p><img alt="1603602810695" src="../imgs/1603602810695.png" /></p>
<p>这里写图片描述</p>
<p>当搜索“手机”时，Elasticsearch就会立即返回文档F，G，H。这样就不用花多余的时间在其他文档上了，因此检索速度得到了数量级的提升。</p>
<h5 id="_2">分词<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h5>
<blockquote>
<p>MySQL</p>
</blockquote>
<p>背景：
在做中文搜索时，组合词检索在数据库是很难完成的。</p>
<p>例如，当用户在搜索框输入“四川火锅”时，数据库通常只能把这四个字去进行全部匹配。可是在文本中，可能会出现“推荐四川好吃的火锅”，这时候就没有结果了。</p>
<p>原因：
数据库并不支持分词。如果人工去开发分词功能，费时费精力。</p>
<blockquote>
<p>Elasticsearch</p>
</blockquote>
<p>提升：
使用ES搜索服务后，就不用太过于关注分词了，因为Elasticsearch支持中文分词插件，很好地解决了问题。</p>
<p>原因：
当用户使用Elasticsearch时进行搜索时，Elasticsearch就自动帮他分好词了。</p>
<p>例如 输入“四川火锅”时，Elasticsearch会自动做下面两件事
（1） 将“四川火锅”分词成“四川”和“火锅”
（2） 查找包含这两个词的文档</p>
<h5 id="_3">相关性<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<blockquote>
<p>MySQL</p>
</blockquote>
<p>背景：
在用数据库做搜索时，结果经常会出现一系列不匹配的文档。思考：
· 到底什么文档是用户真正想要的呢？
· 怎么才能把用户想看的文档放在搜索列表最前面呢？</p>
<p>原因：
数据库并不支持相关性搜索。</p>
<p>例如，当用户搜索“咖啡厅”的时候，他很可能更想知道附近哪里可以喝咖啡，而不是怎么开咖啡厅。</p>
<blockquote>
<p>Elasticsearch</p>
</blockquote>
<p>提升：
使用了ES搜索服务后，发现Elasticsearch能很好地支持相关性评分。通过合理的优化，ES搜索服务能够返回精准的结果，满足用户的需求。</p>
<p>原因：
Elasticsearch支持全文搜索和相关度评分。这样在返回结果就会根据分数由高到低排列。分数越高，意味着和查询语句越相关。</p>
<p>例如，当用户搜索“星巴克咖啡”，带有“星巴克咖啡”的信息就要比只包含“咖啡”的信息靠前。</p>
<blockquote>
<p>总结</p>
</blockquote>
<p>1.传统数据库在全文检索方面很鸡肋，海量数据下的查询很慢，对非结构化文本数据的不支持，ES支持非结构化数据的存储和查询。</p>
<p>2.ES支持分布式文档存储。</p>
<p>3.ES是分布式实时搜索，并且响应时间比关系型数据库快。</p>
<p>4.ES在分词方面比关系型好，能做到精确分词。</p>
<p>5.ES对已有的数据，在数据匹配性方面比关系型数据库好， 例如：搜索“星巴克咖啡”，ES会优先返回带有“星巴克咖啡”的数据，不会优先返回带有“咖啡”的数据。</p>
<p>ElasticSearch和MySql分工不同，MySQL负责存储数据，ElasticSearch负责搜索数据。</p>
<h5 id="1145">1.1.4.5 创建索引<a class="headerlink" href="#1145" title="Permanent link">&para;</a></h5>
<p>索引的目的是为了搜索，最终要实现只搜索被索引的语汇单元从而找到Document（文档）。</p>
<p>注意：创建索引是对语汇单元索引，通过词语找文档，这种索引的结构叫<strong>倒排索引结构</strong>。</p>
<p>传统方法是根据文件找到该文件的内容，在文件内容中匹配搜索关键字，这种方法是顺序扫描方法，数据量大、搜索慢。</p>
<p><strong>倒排索引结构</strong>是根据内容（词语）找文档，如下图：</p>
<p>正排索引：</p>
<p><img alt="1587135796406" src="../imgs/1587135796406.png" /></p>
<p>转化成倒排索引：</p>
<p><img alt="1587135833547" src="../imgs/1587135833547.png" /></p>
<p>说明：</p>
<ul>
<li>“单词ID”一栏记录了每个单词的单词编号；</li>
<li>第二栏是对应的单词；</li>
<li>第三栏即每个单词对应的倒排列表；</li>
<li>比如单词“谷歌”，其单词编号为1，倒排列表为{1,2,3,4,5}，说明文档集合中每个文档都包含了这个单词。</li>
</ul>
<p>而事实上，索引系统还可以记录除此之外的更多信息，在单词对应的倒排列表中不仅记录了文档编号，还记载了单
词频率信息（TF），即这个单词在某个文档中的出现次数，之所以要记录这个信息，是因为词频信息在搜索结果排序时，计算查询和文档相似度是很重要的一个计算因子，所以将其记录在倒排列表中，以方便后续排序时进行分值计算。</p>
<p><img alt="1587136004542" src="../imgs/1587136004542.png" /></p>
<blockquote>
<p>倒排索引结构也叫反向索引结构，包括索引和文档两部分，索引即词汇表，它的规模较小，而文档集合较大。</p>
</blockquote>
<h5 id="1146">1.1.4.6 查询索引<a class="headerlink" href="#1146" title="Permanent link">&para;</a></h5>
<p>查询索引也是搜索的过程。搜索就是用户输入关键字，从索引（index）中进行搜索的过程。根据关键字搜索索引，根据索引找到对应的文档，从而找到要搜索的内容（这里指磁盘上的文件）。</p>
<h5 id="1147">1.1.4.7 用户查询接口<a class="headerlink" href="#1147" title="Permanent link">&para;</a></h5>
<p>全文检索系统提供用户搜索的界面供用户提交搜索的关键字，搜索完成展示搜索结果。</p>
<p>比如：</p>
<p><img alt="1587135251821" src="../imgs/1587135251821.png" /></p>
<h5 id="1148">1.1.4.8 创建查询<a class="headerlink" href="#1148" title="Permanent link">&para;</a></h5>
<p>用户输入查询关键字执行搜索之前需要先构建一个查询对象，查询对象中可以指定查询要搜索的Field文档域、查询关键字等，查询对象会生成具体的查询语法，</p>
<h5 id="1149">1.1.4.9 执行查询<a class="headerlink" href="#1149" title="Permanent link">&para;</a></h5>
<p>搜索索引过程：</p>
<p>根据查询语法在倒排索引词典表中分别找出对应搜索词的索引，从而找到索引所链接的文档链表。</p>
<h5 id="11410">1.1.4.10 渲染结果<a class="headerlink" href="#11410" title="Permanent link">&para;</a></h5>
<p>以一个友好的界面将查询结果展示给用户，用户根据搜索结果找自己想要的信息，为了帮助用户很快找到自己的结果，提供了很多展示的效果，比如搜索结果中将关键字高亮显示，百度提供的快照等。</p>
<p><img alt="1587135434867" src="../imgs/1587135434867.png" /></p>
<h3 id="12-elasticsearch">1.2 ElasticSearch的使用案例<a class="headerlink" href="#12-elasticsearch" title="Permanent link">&para;</a></h3>
<ul>
<li>2013年初，GitHub抛弃了Solr，采取ElasticSearch 来做PB级的搜索。 “GitHub使用ElasticSearch搜索20TB的数据，包括13亿文件和1300亿行代码”</li>
<li>维基百科：启动以elasticsearch为基础的核心搜索架构</li>
<li>SoundCloud：“SoundCloud使用ElasticSearch为1.8亿用户提供即时而精准的音乐搜索服务”</li>
<li>百度：百度目前广泛使用ElasticSearch作为文本数据分析，采集百度所有服务器上的各类指标数据及用户自定义数据，通过对各种数据进行多维分析展示，辅助定位分析实例异常或业务层面异常。目前覆盖百度内部20多个业务线（包括casio、云分析、网盟、预测、文库、直达号、钱包、风控等），单集群最大100台机器，200个ES节点，每天导入30TB+数据</li>
<li>新浪使用ES 分析处理32亿条实时日志</li>
<li>阿里使用ES 构建挖财自己的日志采集和分析体系</li>
</ul>
<h2 id="elasticsearch_2">第二章 ElasticSearch安装与启动<a class="headerlink" href="#elasticsearch_2" title="Permanent link">&para;</a></h2>
<h3 id="21-windows">2.1 windows版本安装<a class="headerlink" href="#21-windows" title="Permanent link">&para;</a></h3>
<h4 id="21-es">2.1 下载ES压缩包<a class="headerlink" href="#21-es" title="Permanent link">&para;</a></h4>
<p>ElasticSearch分为Linux和Window版本，基于我们主要学习的是ElasticSearch的Java客户端的使用，所以我们课程中使用的是安装较为简便的Window版本，项目上线后，公司的运维人员会安装Linux版的ES供我们连接使用。</p>
<p>ElasticSearch的官方地址： <a href="https://www.elastic.co/products/elasticsearch">https://www.elastic.co/products/elasticsearch</a></p>
<p>在资料中已经提供了下载好的7.4.0的压缩包：</p>
<p><img alt="1603605830863" src="../imgs/1603605830863.png" /></p>
<h4 id="22-es">2.2 安装ES服务<a class="headerlink" href="#22-es" title="Permanent link">&para;</a></h4>
<p>Window版的ElasticSearch的安装很简单，类似Window版的Tomcat，解压开即安装完毕，解压后的ElasticSearch的目录结构如下：</p>
<p><img alt="1586095814960" src="../imgs/1586095814960.png" /></p>
<p>修改elasticsearch配置文件：config/elasticsearch.yml，增加以下两句命令：</p>
<div class="highlight"><pre><span></span><code><span class="na">http.cors.enabled</span><span class="o">:</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">http.cors.allow-origin</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
</code></pre></div>
<p>此步为允许elasticsearch跨越访问，如果不安装后面的elasticsearch-head是可以不修改，直接启动。</p>
<h4 id="23-es">2.3 启动ES服务<a class="headerlink" href="#23-es" title="Permanent link">&para;</a></h4>
<p>点击ElasticSearch下的bin目录下的elasticsearch.bat启动，控制台显示的日志信息如下：</p>
<p><img alt="1603605882970" src="../imgs/1603605882970.png" /></p>
<p><img alt="1563515566282" src="../imgs/1563515566282.png" /></p>
<p>注意：9300是tcp通讯端口，集群间和TCPClient都执行该端口，9200是http协议的RESTful接口 。</p>
<p>通过浏览器访问ElasticSearch服务器，看到如下返回的json信息，代表服务启动成功：</p>
<p><img alt="1563515619311" src="../imgs/1563515619311.png" /></p>
<div class="highlight"><pre><span></span><code>注意事项一：ElasticSearch是使用java开发的，且本版本的es需要的jdk版本要是1.8以上，所以安装ElasticSearch之前保证JDK1.8+安装完毕，并正确的配置好JDK环境变量，否则启动ElasticSearch失败。

注意事项二：出现闪退，通过路径访问发现“空间不足”
</code></pre></div>
<p><img alt="1584099962384" src="../imgs/1584099962384.png" /></p>
<p>【解决方案】</p>
<p><img alt="1584099996946" src="../imgs/1584099996946.png" /></p>
<p>修改jvm.options文件的22行23行，把2改成1，让Elasticsearch启动的时候占用1个G的内存。</p>
<p><img alt="1584100026728" src="../imgs/1584100026728.png" /></p>
<p>如果1个g还是不行：</p>
<p><img alt="1584100045246" src="../imgs/1584100045246.png" /></p>
<p>-Xmx512m：设置JVM最大可用内存为512M。
-Xms512m：设置JVM初始内存为512m。此值可以设置与-Xmx相同，以避免每次垃圾回收完成后JVM重新分配内存。</p>
<h4 id="24-es">2.4 安装ES的图形化界面插件<a class="headerlink" href="#24-es" title="Permanent link">&para;</a></h4>
<p>ElasticSearch不同于Solr自带图形化界面，我们可以通过安装ElasticSearch的head插件，完成图形化界面的效果，完成索引数据的查看。安装插件的方式有两种，在线安装和本地安装。本文档采用本地安装方式进行head插件的安装。elasticsearch-5-*以上版本安装head需要安装node和grunt</p>
<p>1）下载head插件：<a href="https://github.com/mobz/elasticsearch-head">https://github.com/mobz/elasticsearch-head</a>  </p>
<p>在资料中已经提供了elasticsearch-head-master插件压缩包：</p>
<p><img alt="1563517633809" src="../imgs/1563517633809.png" /></p>
<p>2）将elasticsearch-head-master压缩包解压到任意目录，但是要和elasticsearch的安装目录区别开</p>
<p>3）下载nodejs：<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a> </p>
<p><img alt="1584100753972" src="../imgs/1584100753972.png" /></p>
<p>在资料中已经提供了nodejs安装程序：</p>
<p><img alt="1563517655296" src="../imgs/1563517655296.png" /></p>
<p>双击安装程序，步骤截图如下：</p>
<p><img alt="1563518594298" src="../imgs/1563518594298.png" /></p>
<p><img alt="1563518609245" src="../imgs/1563518609245.png" /></p>
<p><img alt="1563518623835" src="../imgs/1563518623835.png" /></p>
<p><img alt="1563518642447" src="../imgs/1563518642447.png" /></p>
<p><img alt="1563518656861" src="../imgs/1563518656861.png" /></p>
<p>安装完毕，可以通过cmd控制台输入：node -v 查看版本号</p>
<p>5）将grunt安装为全局命令 ，Grunt是基于Node.js的项目构建工具</p>
<p>在cmd控制台中输入如下执行命令：</p>
<div class="highlight"><pre><span></span><code><span class="err">npm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">-g</span><span class="w"> </span><span class="err">grunt-cli</span><span class="w"></span>
</code></pre></div>
<p>-g表示全局（globle）变量，让grunt-cli的客户端使用全局安装</p>
<p>执行结果如下图：</p>
<p><img alt="1563519164427" src="../imgs/1563519164427.png" /></p>
<p><img alt="1584251007682" src="../imgs/1584251007682.png" /></p>
<p>6）进入elasticsearch-head-master目录启动head，在命令提示符下输入命令：</p>
<div class="highlight"><pre><span></span><code>&gt;npm install
&gt;grunt server
</code></pre></div>
<p><img alt="1563519995350" src="../imgs/1563519995350.png" /></p>
<p>如果出现如下问题，就需要重装grunt</p>
<p><img alt="1584102677485" src="../imgs/1584102677485.png" /></p>
<p>7）打开浏览器，输入 <a href="http://localhost:9100">http://localhost:9100</a>，看到如下页面：</p>
<p><img alt="1563523704620" src="../imgs/1563523704620.png" /></p>
<p>如果不能成功连接到es服务，需要修改ElasticSearch的config目录下的配置文件：config/elasticsearch.yml，配置文件末尾，增加以下两句命令：</p>
<p><img alt="1586096120958" src="../imgs/1586096120958.png" /></p>
<div class="highlight"><pre><span></span><code>http.cors.enabled: true
http.cors.allow-origin: &quot;*&quot;
</code></pre></div>
<p>在elasticsearch-head-master文件夹，右键启动cmd命令行窗口，然后重新启动ElasticSearch服务。</p>
<p><img alt="1563524104215" src="../imgs/1563524104215.png" /></p>
<p><img alt="1603605918970" src="../imgs/1603605918970.png" /></p>
<p>【了解淘宝镜像安装】</p>
<p>ps:如果安装不成功或者安装速度慢，可以使用淘宝的镜像进行安装：如果上面安装成功了，后面的就不用关注,直接进入第三章</p>
<div class="highlight"><pre><span></span><code><span class="na">npm install -g cnpm –registry</span><span class="o">=</span><span class="s">https://registry.npm.taobao.org</span><span class="w"></span>
</code></pre></div>
<p>后续使用的时候，只需要把npm xxx   换成  cnpm xxx 即可</p>
<p>执行以下命令（比较慢，需耐心等待）</p>
<div class="highlight"><pre><span></span><code>cnpm install grunt
</code></pre></div>
<p>再次启动grunt server</p>
<p><img alt="1584102817081" src="../imgs/1584102817081.png" /></p>
<p>上面问题解决方法，将下面命令分别执行安装：</p>
<div class="highlight"><pre><span></span><code><span class="err">cnpm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">grunt-contrib-clean</span><span class="w"></span>
<span class="err">cnpm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">grunt-contrib-concat</span><span class="w"></span>
<span class="err">cnpm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">grunt-contrib-watch</span><span class="w"></span>
<span class="err">cnpm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">grunt-contrib-connect</span><span class="w"></span>
<span class="err">cnpm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">grunt-contrib-copy</span><span class="w"></span>
<span class="err">cnpm</span><span class="w"> </span><span class="err">install</span><span class="w"> </span><span class="err">grunt-contrib-jasmine</span><span class="w"></span>
</code></pre></div>
<h3 id="22-linux">2.2 Linux版本安装<a class="headerlink" href="#22-linux" title="Permanent link">&para;</a></h3>
<h4 id="221">2.2.1 下载地址<a class="headerlink" href="#221" title="Permanent link">&para;</a></h4>
<p>地址：<a href="https://www.elastic.co/cn/downloads/elasticsearch">https://www.elastic.co/cn/downloads/elasticsearch</a></p>
<p><img alt="1585964880680" src="../imgs/1585964880680.png" /></p>
<h4 id="222-linux">2.2.2 Linux安装<a class="headerlink" href="#222-linux" title="Permanent link">&para;</a></h4>
<p>参考linux安装讲义</p>
<h3 id="23-docker">2.3 docker版本安装<a class="headerlink" href="#23-docker" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c"># 拉取镜像</span><span class="w"></span>
<span class="na">docker pull elasticsearch</span><span class="o">:</span><span class="s">7.4.0</span><span class="w"></span>
<span class="c"># 创建容器</span><span class="w"></span>
<span class="na">docker create --name elasticsearch --net host -e &quot;discovery.type</span><span class="o">=</span><span class="s">single-node&quot; -e</span><span class="w"></span>
<span class="na">&quot;network.host</span><span class="o">=</span><span class="s">192.168.211.144&quot; elasticsearch:7.4.0</span><span class="w"></span>
<span class="c"># 启动</span><span class="w"></span>
<span class="err">docker</span><span class="w"> </span><span class="err">start</span><span class="w"> </span><span class="err">elasticsearch</span><span class="w"></span>
<span class="c"># 查看日志</span><span class="w"></span>
<span class="err">docker</span><span class="w"> </span><span class="err">logs</span><span class="w"> </span><span class="err">elasticsearch</span><span class="w"></span>
</code></pre></div>
<h2 id="elasticsearch_3">第三章 ElasticSearch相关概念(术语)<a class="headerlink" href="#elasticsearch_3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 概述<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>先说Elasticsearch的文件存储，Elasticsearch是面向文档型数据库，一条数据在这里就是一个文档，用JSON作为文档序列化的格式，比如下面这条用户数据：</p>
<div class="highlight"><pre><span></span><code>{
    &quot;name&quot; :     &quot;John&quot;,
    &quot;sex&quot; :      &quot;Male&quot;,
    &quot;age&quot; :      25,
    &quot;birthDate&quot;: &quot;1990/05/01&quot;,
    &quot;about&quot; :    &quot;I love to go rock climbing&quot;,
    &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]
}
</code></pre></div>
<p>Elasticsearch可以看成是一个数据库，只是和关系型数据库比起来数据格式和功能不一样而已</p>
<p><img alt="1586356568310" src="../imgs/1586356568310.png" /></p>
<h3 id="32-elasticsearch">3.2 <strong>Elasticsearch核心概念</strong><a class="headerlink" href="#32-elasticsearch" title="Permanent link">&para;</a></h3>
<h4 id="321-index">3.2.1 索引 index<a class="headerlink" href="#321-index" title="Permanent link">&para;</a></h4>
<p>文档存储的地方，类似于MySQL数据库中的数据库概念</p>
<h4 id="322-type">3.2.2 类型 type<a class="headerlink" href="#322-type" title="Permanent link">&para;</a></h4>
<p>如果按照关系型数据库中的对应关系，还应该有<code>表</code>的概念。ES中没有<code>表</code>的概念，这是ES和数据库的一个区别，在我们建立*索引*之后，可以直接往 <em>索引</em> 中写入*文档*。在6.0版本之前，ES中有<code>Type</code>的概念，可以理解成关系型数据库中的<code>表</code>，但是官方说这是一个设计上的失误，所以在6.0版本之后<code>Type</code>就被废弃了。</p>
<h4 id="323-field">3.2.3 字段Field<a class="headerlink" href="#323-field" title="Permanent link">&para;</a></h4>
<p>相当于是数据表的字段，字段在ES中可以理解为JSON数据的键，下面的JSON数据中，<em>name</em> 就是一个字段。</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;jack&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="324-mapping">3.2.4 映射 mapping<a class="headerlink" href="#324-mapping" title="Permanent link">&para;</a></h4>
<p><em>映射</em> 是对*文档*中每个*字段*的类型进行定义，每一种数据类型都有对应的使用场景。</p>
<p>每个*文档*都有映射，但是在大多数使用场景中，我们并不需要显示的创建映射，因为ES中实现了动态映射。我们在索引中写入一个下面的JSON文档，在动态映射的作用下，<code>name</code>会映射成<code>text</code>类型，<code>age</code>会映射成<code>long</code>类型。</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;jack&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>自动判断的规则如下：</p>
<p><img alt="1586355784778" src="../imgs/1586355784778.png" /></p>
<p>Elasticsearch中支持的类型如下：</p>
<p><img alt="1602593610434" src="../imgs/1602593610434.png" /></p>
<ul>
<li>string类型在ElasticSearch 旧版本中使用较多，从ElasticSearch 5.x开始不再支持string，由text和
  keyword类型替代。（已经废弃）</li>
<li>text 类型，需要分词设置text类型，比如Email内容、产品描述，应该使用text类型。</li>
<li>keyword类型 ，不需要分词设置keyword类型，比如email地址、主机名、状态码和标签。</li>
</ul>
<p><img alt="1602589049910" src="../imgs/1602589049910.png" /></p>
<p><img alt="1602589234813" src="../imgs/1602589234813.png" /></p>
<h4 id="325-document">3.2.5 文档 document<a class="headerlink" href="#325-document" title="Permanent link">&para;</a></h4>
<p><em>文档</em> 在ES中相当于传统数据库中的*行*的概念，ES中的数据都以JSON的形式来表示，在MySQL中插入一行数据和ES中插入一个JSON文档是一个意思。下面的JSON数据表示，一个包含3个字段的*文档*。</p>
<div class="highlight"><pre><span></span><code><span class="err">{</span><span class="w"></span>
<span class="na">    &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;jack&quot;,</span><span class="w"></span>
<span class="na">    &quot;age&quot;</span><span class="o">:</span><span class="s">18,</span><span class="w"></span>
<span class="na">    &quot;gender&quot;</span><span class="o">:</span><span class="s">1</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>一个文档不只有数据。它还包含了元数据(metadata)——关于文档的信息。三个必须的元数据节点是：</p>
<table>
<thead>
<tr>
<th><strong>节点</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>_index</td>
<td>文档存储的地方</td>
</tr>
<tr>
<td>_type</td>
<td>文档代表的对象的类</td>
</tr>
<tr>
<td>_id</td>
<td>文档的唯一标识</td>
</tr>
</tbody>
</table>
<h2 id="elasticsearch_4">第四章 ElasticSearch的客户端操作<a class="headerlink" href="#elasticsearch_4" title="Permanent link">&para;</a></h2>
<p>实际开发中，主要有三种方式可以作为elasticsearch服务的客户端：</p>
<ul>
<li>第一种，elasticsearch-head插件</li>
<li>第二种，使用elasticsearch提供的Restful接口直接访问</li>
<li>第三种，使用elasticsearch提供的API进行访问</li>
</ul>
<h3 id="41-postman">4.1 安装Postman工具<a class="headerlink" href="#41-postman" title="Permanent link">&para;</a></h3>
<p>Postman中文版是postman这款强大网页调试工具的windows客户端，提供功能强大的Web API &amp; HTTP 请求调试。软件功能非常强大，界面简洁明晰、操作方便快捷，设计得很人性化。Postman中文版能够发送任何类型的HTTP 请求 (GET, HEAD, POST, PUT..)，且可以附带任何数量的参数。</p>
<h3 id="41-postman_1">4.1 下载Postman工具<a class="headerlink" href="#41-postman_1" title="Permanent link">&para;</a></h3>
<p>Postman官网：<a href="https://www.getpostman.com">https://www.getpostman.com</a></p>
<p>课程资料中已经提供了安装包</p>
<p><img alt="1563524214517" src="../imgs/1563524214517.png" /></p>
<h3 id="42-postman">4.2 注册Postman工具<a class="headerlink" href="#42-postman" title="Permanent link">&para;</a></h3>
<p><img alt="1585326969975" src="../imgs/1585326969975.png" /></p>
<p><img alt="1563524249858" src="../imgs/1563524249858.png" /></p>
<h3 id="42-postmanrestful">4.2 用Postman进行Restful接口访问<a class="headerlink" href="#42-postmanrestful" title="Permanent link">&para;</a></h3>
<h4 id="421-elasticsearch">4.2.1 ElasticSearch的接口语法<a class="headerlink" href="#421-elasticsearch" title="Permanent link">&para;</a></h4>
<p><img alt="1602587743810" src="../imgs/1602587743810.png" /></p>
<h4 id="422-index">4.2.2 操作索引index<a class="headerlink" href="#422-index" title="Permanent link">&para;</a></h4>
<p><img alt="1602588652281" src="../imgs/1602588652281.png" /></p>
<p>请求url：</p>
<p><img alt="1585213612159" src="../imgs/1585213612159.png" /></p>
<div class="highlight"><pre><span></span><code><span class="na">PUT     localhost</span><span class="o">:</span><span class="s">9200/blog</span><span class="w"></span>
</code></pre></div>
<p>发送请求，响应数据</p>
<p><img alt="1585213684856" src="../imgs/1585213684856.png" /></p>
<p>elasticsearch-head查看：请求<code>localhost:9100</code></p>
<p><img alt="1585213769041" src="../imgs/1585213769041.png" /></p>
<p><img alt="1585213845895" src="../imgs/1585213845895.png" /></p>
<blockquote>
<p>注意：在创建索引的时候，有可能会报406错误 ，或者说，直接发送不了创建索引的 http请求，</p>
</blockquote>
<p>head 连接Elasticsearch6是 【数据浏览模块不能显示数据了】 
看一下网络发现406 错误</p>
<p>{"error":"Content-Type header [application/x-www-form-urlencoded] is not supported","status":406}</p>
<p><img alt="1587266006615" src="../imgs/1587266006615.png" /></p>
<blockquote>
<p>解决方案：</p>
</blockquote>
<p>1、进入head安装目录；</p>
<p>2、cd _site/</p>
<p>3、编辑vendor.js  共有两处</p>
<div class="highlight"><pre><span></span><code><span class="na">①  6886行 /contentType</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;application/x-www-form-urlencoded</span><span class="w"></span>
<span class="na">改成</span><span class="w"></span>
<span class="na">contentType</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;application/json;charset=UTF-8&quot;</span><span class="w"></span>

<span class="na">② 7574行 var inspectData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">s.contentType === &quot;application/x-www-form-urlencoded&quot; &amp;&amp;</span><span class="w"></span>
<span class="na">改成</span><span class="w"></span>
<span class="na">var inspectData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">s.contentType === &quot;application/json;charset=UTF-8&quot; &amp;&amp;</span><span class="w"></span>
</code></pre></div>
<h4 id="422-indexmapping">4.2.2 创建索引index和映射mapping<a class="headerlink" href="#422-indexmapping" title="Permanent link">&para;</a></h4>
<p>请求url：</p>
<div class="highlight"><pre><span></span><code><span class="err">PUT</span><span class="w">     </span><span class="err">localhos</span><span class="kc">t</span><span class="p">:</span><span class="mi">9200</span><span class="err">/blog</span><span class="mi">1</span><span class="w"></span>
</code></pre></div>
<p><img alt="1563527922907" src="../imgs/1563527922907.png" /></p>
<p>请求体：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">            </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;long&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;store&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="kc">true</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;store&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;analyzer&quot;</span><span class="p">:</span><span class="s2">&quot;standard&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;store&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;analyzer&quot;</span><span class="p">:</span><span class="s2">&quot;standard&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>postman截图：</p>
<p><img alt="1563581951780" src="../imgs/1563581951780.png" /></p>
<p>elasticsearch-head查看：</p>
<p><img alt="1563582011206" src="../imgs/1563582011206.png" /></p>
<h4 id="kibana">kibana安装和使用<a class="headerlink" href="#kibana" title="Permanent link">&para;</a></h4>
<p>Kibana是一个针对Elasticsearch的开源分析及可视化平台，用来搜索、查看交互存储在Elasticsearch索引中的数据。</p>
<h5 id="kibana_1">kibana安装<a class="headerlink" href="#kibana_1" title="Permanent link">&para;</a></h5>
<p>进入kibana的bin目录，双击kibana.bat</p>
<p><img alt="1602591248255" src="../imgs/1602591248255.png" /></p>
<p>访问：<a href="http://localhost:5601/">http://localhost:5601</a>，出现以下界面即完成安装。</p>
<p><img alt="1602591417186" src="../imgs/1602591417186.png" /></p>
<h4 id="423">4.2.3 操作映射<a class="headerlink" href="#423" title="Permanent link">&para;</a></h4>
<p><img alt="1603108964535" src="../imgs/1603108964535.png" /></p>
<p><div class="highlight"><pre><span></span><code><span class="c"># 创建索引</span><span class="w"></span>
<span class="na">PUT</span><span class="w"> </span><span class="s">person</span><span class="w"></span>
<span class="c"># 查询索引</span><span class="w"></span>
<span class="na">GET</span><span class="w"> </span><span class="s">person</span><span class="w"></span>
<span class="c"># 删除索引</span><span class="w"></span>
<span class="na">DELETE</span><span class="w"> </span><span class="s">person</span>

<span class="c"># 查询映射</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_mapping</span><span class="w"></span>

<span class="c"># 添加映射</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">person/_mapping</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;properties&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;name&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;type&quot;</span><span class="o">:</span><span class="s">&quot;keyword&quot;</span><span class="w"></span>
<span class="w">    </span><span class="err">},</span><span class="w"></span>
<span class="na">    &quot;age&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;type&quot;</span><span class="o">:</span><span class="s">&quot;integer&quot;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="c"># 创建索引并添加映射</span><span class="w"></span>
<span class="na">PUT</span><span class="w"> </span><span class="s">person</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;mappings&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;properties&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;name&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;keyword&quot;</span><span class="w"></span>
<span class="w">      </span><span class="err">},</span><span class="w"></span>
<span class="na">      &quot;age&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;type&quot;</span><span class="o">:</span><span class="s">&quot;integer&quot;</span><span class="w"></span>
<span class="w">      </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="c"># 索引库中添加字段</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">person/_mapping</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;properties&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;address&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;type&quot;</span><span class="o">:</span><span class="s">&quot;text&quot;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
kibana 截图</p>
<p><img alt="1603111557701" src="../imgs/1603111557701.png" /></p>
<p><img alt="1603111600264" src="../imgs/1603111600264.png" /></p>
<h4 id="425-document">4.2.5 操作文档document<a class="headerlink" href="#425-document" title="Permanent link">&para;</a></h4>
<p>• 添加文档
• 查询文档
• 修改文档
• 删除文档</p>
<p>请求url：</p>
<div class="highlight"><pre><span></span><code><span class="c"># 查询索引</span><span class="w"></span>
<span class="na">GET</span><span class="w"> </span><span class="s">person</span>

<span class="c"># 添加文档，指定id</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">person/_doc/1</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;张三&quot;,</span><span class="w"></span>
<span class="na">  &quot;age&quot;</span><span class="o">:</span><span class="s">20,</span><span class="w"></span>
<span class="na">  &quot;address&quot;</span><span class="o">:</span><span class="s">&quot;深圳宝安区&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="c"># 查询文档</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_doc/1</span><span class="w"></span>

<span class="c"># 添加文档,不指定id</span><span class="w"></span>
<span class="err">POST</span><span class="w"> </span><span class="err">person/_doc/</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;李四&quot;,</span><span class="w"></span>
<span class="na">  &quot;age&quot;</span><span class="o">:</span><span class="s">20,</span><span class="w"></span>
<span class="na">  &quot;address&quot;</span><span class="o">:</span><span class="s">&quot;深圳南山区&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
<span class="c"># 查询文档</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_doc/u8b2QHUBCR3n8iTZ8-Vk</span><span class="w"></span>

<span class="c"># 添加文档,不指定id</span><span class="w"></span>
<span class="err">POST</span><span class="w"> </span><span class="err">person/_doc/</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;李四&quot;,</span><span class="w"></span>
<span class="na">  &quot;age&quot;</span><span class="o">:</span><span class="s">20,</span><span class="w"></span>
<span class="na">  &quot;address&quot;</span><span class="o">:</span><span class="s">&quot;深圳南山区&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
<span class="c"># 查询文档</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_doc/u8b2QHUBCR3n8iTZ8-Vk</span><span class="w"></span>

<span class="c"># 查询所有文档</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_search</span><span class="w"></span>

<span class="c"># 删除文档</span><span class="w"></span>
<span class="err">DELETE</span><span class="w"> </span><span class="err">person/_doc/1</span><span class="w"></span>

<span class="c"># 修改文档 根据id，id存在就是修改，id不存在就是添加</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">person/_doc/2</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;硅谷&quot;,</span><span class="w"></span>
<span class="na">  &quot;age&quot;</span><span class="o">:</span><span class="s">20,</span><span class="w"></span>
<span class="na">  &quot;address&quot;</span><span class="o">:</span><span class="s">&quot;深圳福田保税区&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603113684055" src="../imgs/1603113684055.png" /></p>
<p><img alt="1603113711362" src="../imgs/1603113711362.png" /></p>
<h4 id="429-match">4.2.9 全文查询-match查询<a class="headerlink" href="#429-match" title="Permanent link">&para;</a></h4>
<p>全文查询会分析查询条件，先将查询条件进行分词，然后查询，求并集</p>
<p>请求体：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="err">ma</span><span class="kc">t</span><span class="err">ch</span><span class="w"> </span><span class="err">先会对查询的字符串进行分词，在查询，求交集</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_search</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;match&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;华为手机&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>截图：</p>
<p><img alt="1603536763869" src="../imgs/1603536763869.png" /></p>
<h4 id="4210-term">4.2.10 查询文档-term查询<a class="headerlink" href="#4210-term" title="Permanent link">&para;</a></h4>
<p>词条查询不会分析查询条件，只有当词条和查询字符串完全匹配时才匹配搜索</p>
<p>请求url：</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w">    </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_search</span><span class="w"></span>
</code></pre></div>
<p>请求体：</p>
<div class="highlight"><pre><span></span><code><span class="c"># 查询所有数据</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_search</span><span class="w"></span>

<span class="c"># 查询 深开头的数据</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">person/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;term&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;address&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;value&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;深&quot;</span><span class="w"></span>
<span class="w">      </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>截图：</p>
<p><img alt="1603534479524" src="../imgs/1603534479524.png" /></p>
<h4 id="4211">4.2.11 查询全部<a class="headerlink" href="#4211" title="Permanent link">&para;</a></h4>
<p>请求url：</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w">  </span><span class="err">person/_search</span><span class="w"></span>
</code></pre></div>
<p>截图：</p>
<p><img alt="1603534555152" src="../imgs/1603534555152.png" /></p>
<h4 id="4212">4.2.12 关键字搜索数据<a class="headerlink" href="#4212" title="Permanent link">&para;</a></h4>
<p>请求url：</p>
<div class="highlight"><pre><span></span><code><span class="c"># 查询名字等于张三的用户</span><span class="w"></span>
<span class="na">GET  person/_search?q</span><span class="o">=</span><span class="s">name:张三</span><span class="w"></span>
</code></pre></div>
<p>截图：</p>
<p><img alt="1603607028738" src="../imgs/1603607028738.png" /></p>
<h4 id="4213-dsl">4.2.13 DSL 查询<a class="headerlink" href="#4213-dsl" title="Permanent link">&para;</a></h4>
<p>url地址请求体，多添加几条数据，方便做查询</p>
<div class="highlight"><pre><span></span><code><span class="err">PUT</span><span class="w">  </span><span class="err">shangguigu/_doc/1001</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;id&quot;</span><span class="o">:</span><span class="s">&quot;1001&quot;,</span><span class="w"></span>
<span class="na">    &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;张三&quot;,</span><span class="w"></span>
<span class="na">    &quot;age&quot;</span><span class="o">:</span><span class="s">20,</span><span class="w"></span>
<span class="na">    &quot;sex&quot;</span><span class="o">:</span><span class="s">&quot;男&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="err">PUT</span><span class="w">  </span><span class="err">shangguigu/_doc/1002</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;id&quot;</span><span class="o">:</span><span class="s">&quot;1002&quot;,</span><span class="w"></span>
<span class="na">    &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;李四&quot;,</span><span class="w"></span>
<span class="na">    &quot;age&quot;</span><span class="o">:</span><span class="s">25,</span><span class="w"></span>
<span class="na">    &quot;sex&quot;</span><span class="o">:</span><span class="s">&quot;女&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="err">PUT</span><span class="w">  </span><span class="err">shangguigu/_doc/1003</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;id&quot;</span><span class="o">:</span><span class="s">&quot;1003&quot;,</span><span class="w"></span>
<span class="na">    &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;王五&quot;,</span><span class="w"></span>
<span class="na">    &quot;age&quot;</span><span class="o">:</span><span class="s">30,</span><span class="w"></span>
<span class="na">    &quot;sex&quot;</span><span class="o">:</span><span class="s">&quot;女&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="err">PUT</span><span class="w">  </span><span class="err">shangguigu/_doc/1004</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;id&quot;</span><span class="o">:</span><span class="s">&quot;1004&quot;,</span><span class="w"></span>
<span class="na">    &quot;name&quot;</span><span class="o">:</span><span class="s">&quot;赵六&quot;,</span><span class="w"></span>
<span class="na">    &quot;age&quot;</span><span class="o">:</span><span class="s">30,</span><span class="w"></span>
<span class="na">    &quot;sex&quot;</span><span class="o">:</span><span class="s">&quot;男&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="err">GET</span><span class="w"> </span><span class="err">shangguigu/_search</span><span class="w"></span>
</code></pre></div>
<p>添加结果：</p>
<p><img alt="1603537021924" src="../imgs/1603537021924.png" /></p>
<p>① 根据年龄查询</p>
<p>请求体</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w">  </span><span class="err">shangguigu/_doc/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;match&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">          &quot;age&quot;</span><span class="o">:</span><span class="s">20</span><span class="w"></span>
<span class="w">      </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>请求结果：</p>
<p><img alt="1603537186562" src="../imgs/1603537186562.png" /></p>
<p>② 查询年龄大于20岁的女性用户</p>
<p>请求URL地址：</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w">  </span><span class="err">shangguigu/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;bool&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;filter&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;range&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">          &quot;age&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">            &quot;gt&quot;</span><span class="o">:</span><span class="s">20</span><span class="w"></span>
<span class="w">          </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">      </span><span class="err">},</span><span class="w"></span>
<span class="na">      &quot;must&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;match&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">          &quot;sex&quot;</span><span class="o">:</span><span class="s">&quot;女&quot;</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">      </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>相应结果：</p>
<p><img alt="1603537672510" src="../imgs/1603537672510.png" /></p>
<p>③ 全文搜索</p>
<p>请求URL地址</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w">  </span><span class="err">shangguigu/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;query&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">       &quot;match&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">           &quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;张三 李四&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>响应数据</p>
<p><img alt="1603537757675" src="../imgs/1603537757675.png" /></p>
<h4 id="4214">4.2.14 高亮显示<a class="headerlink" href="#4214" title="Permanent link">&para;</a></h4>
<p><img alt="1586101598406" src="../imgs/1586101598406.png" /></p>
<p>请求URL地址</p>
<p>请求体</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w">  </span><span class="err">shangguigu/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;query&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">       &quot;match&quot;</span><span class="o">:</span><span class="s">{</span><span class="w"></span>
<span class="na">           &quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;张三 李四&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">},</span><span class="w"></span>
<span class="na">    &quot;highlight&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;fields&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603537852390" src="../imgs/1603537852390.png" /></p>
<h4 id="4215">4.2.15 聚合<a class="headerlink" href="#4215" title="Permanent link">&para;</a></h4>
<p>在Elasticsearch中，支持聚合操作，类似SQL中的group by操作。</p>
<p>请求URL地址</p>
<p>请求体</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w">  </span><span class="err">shangguigu/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;aggs&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">        &quot;all_interests&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">            &quot;terms&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">                &quot;field&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;age&quot;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">         </span><span class="err">}</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>响应体</p>
<p><img alt="1586102221152" src="../imgs/1586102221152.png" /></p>
<p>如果聚合查询报错：</p>
<p><img alt="1587212388129" src="../imgs/1587212388129.png" /></p>
<p>修改下查询语句</p>
<p>请求体：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;aggs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;all_interests&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;terms&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;age.keyword&quot;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">         </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="4216">4.2.16 指定响应字段<a class="headerlink" href="#4216" title="Permanent link">&para;</a></h4>
<p>在响应的数据中，如果我们不需要全部的字段，可以指定某些需要的字段进行返回</p>
<div class="highlight"><pre><span></span><code><span class="na">GET  shangguigu/_doc/1001?_source</span><span class="o">=</span><span class="s">id,name</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603538041424" src="../imgs/1603538041424.png" /></p>
<h4 id="4217">4.2.17 判断文档是否存在<a class="headerlink" href="#4217" title="Permanent link">&para;</a></h4>
<p>如果我们只需要判断文档是否存在，而不是查询文档内容，那么可以这样：</p>
<div class="highlight"><pre><span></span><code><span class="err">HEAD</span><span class="w">  </span><span class="err">shangguigu/_doc/1001</span><span class="w"></span>
</code></pre></div>
<p>存在返回200 - OK</p>
<p>不存在返回404</p>
<h4 id="4218">4.2.18 批量操作<a class="headerlink" href="#4218" title="Permanent link">&para;</a></h4>
<p>有些情况下可以通过批量操作以减少网络请求。如：批量查询、批量插入数据。</p>
<h5 id="42181">4.2.18.1 批量查询<a class="headerlink" href="#42181" title="Permanent link">&para;</a></h5>
<p>请求体</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w">  </span><span class="err">shangguigu/_doc/_mget</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;ids&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">[ &quot;1001&quot;, &quot;1003&quot; ]</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>响应</p>
<p><img alt="1586348862698" src="../imgs/1586348862698.png" /></p>
<p>如果，某一条数据不存在，不影响整体响应，需要通过found的值进行判断是否查询到数据。</p>
<p>请求体：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;ids&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;1001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;1006&quot;</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>响应</p>
<p><img alt="1586348931521" src="../imgs/1586348931521.png" /></p>
<h5 id="42182-_bulk">4.2.18.2 _bulk操作<a class="headerlink" href="#42182-_bulk" title="Permanent link">&para;</a></h5>
<p>在Elasticsearch中，支持批量的插入、修改、删除操作，都是通过_bulk的api完成的。
请求格式如下：（请求格式不同寻常）</p>
<div class="highlight"><pre><span></span><code><span class="na">{ action</span><span class="o">:</span><span class="w"> </span><span class="s">{ metadata }}\n</span><span class="w"></span>
<span class="err">{</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">body</span><span class="w">    </span><span class="err">}\n</span><span class="w"></span>
<span class="na">{ action</span><span class="o">:</span><span class="w"> </span><span class="s">{ metadata }}\n</span><span class="w"></span>
<span class="err">{</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">body</span><span class="w">    </span><span class="err">}\n</span><span class="w"></span>
<span class="err">...</span><span class="w"></span>
</code></pre></div>
<p>批量插入数据：</p>
<div class="highlight"><pre><span></span><code><span class="na">POST</span><span class="w"> </span><span class="s">_bulk</span><span class="w"></span>
<span class="na">{&quot;create&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;atguigu&quot;,&quot;_id&quot;:2001}}</span><span class="w"></span>
<span class="na">{&quot;id&quot;</span><span class="o">:</span><span class="s">2001,&quot;name&quot;:&quot;name1&quot;,&quot;age&quot;: 20,&quot;sex&quot;: &quot;男&quot;}</span><span class="w"></span>
<span class="na">{&quot;create&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;atguigu&quot;,&quot;_id&quot;:2002}}</span><span class="w"></span>
<span class="na">{&quot;id&quot;</span><span class="o">:</span><span class="s">2002,&quot;name&quot;:&quot;name2&quot;,&quot;age&quot;: 20,&quot;sex&quot;: &quot;男&quot;}</span><span class="w"></span>
<span class="na">{&quot;create&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;atguigu&quot;,&quot;_id&quot;:2003}}</span><span class="w"></span>
<span class="na">{&quot;id&quot;</span><span class="o">:</span><span class="s">2003,&quot;name&quot;:&quot;name3&quot;,&quot;age&quot;: 20,&quot;sex&quot;: &quot;男&quot;}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603540624780" src="../imgs/1603540624780.png" /></p>
<p>批量删除：</p>
<div class="highlight"><pre><span></span><code><span class="na">POST</span><span class="w"> </span><span class="s">_bulk</span><span class="w"></span>
<span class="na">{&quot;delete&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;atguigu&quot;,&quot;_id&quot;:2001}}</span><span class="w"></span>
<span class="na">{&quot;delete&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;atguigu&quot;,&quot;_id&quot;:2002}}</span><span class="w"></span>
<span class="na">{&quot;delete&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;atguigu&quot;,&quot;_id&quot;:2003}}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603540743246" src="../imgs/1603540743246.png" /></p>
<p>由于delete没有请求体，所以，action的下一行直接就是下一个action。</p>
<h4 id="4219">4.2.19 分页<a class="headerlink" href="#4219" title="Permanent link">&para;</a></h4>
<p>和SQL使用 LIMIT 关键字返回只有一页的结果一样，Elasticsearch接受 from 和 size 参数：</p>
<div class="highlight"><pre><span></span><code><span class="na">size</span><span class="o">:</span><span class="w"> </span><span class="s">结果数，默认10</span><span class="w"></span>
<span class="na">from</span><span class="o">:</span><span class="w"> </span><span class="s">跳过开始的结果数，默认0</span><span class="w"></span>
</code></pre></div>
<p>如果你想每页显示5个结果，页码从1到3，那请求如下：</p>
<div class="highlight"><pre><span></span><code><span class="na">GET /_search?size</span><span class="o">=</span><span class="s">5</span><span class="w"></span>
<span class="na">GET /_search?size</span><span class="o">=</span><span class="s">5&amp;from=5</span><span class="w"></span>
<span class="na">GET /_search?size</span><span class="o">=</span><span class="s">5&amp;from=10</span><span class="w"></span>
</code></pre></div>
<p>请求路径</p>
<div class="highlight"><pre><span></span><code><span class="na">GET shangguigu/_search?size</span><span class="o">=</span><span class="s">1&amp;from=2</span><span class="w"></span>
</code></pre></div>
<p>响应体</p>
<p><img alt="1603592779292" src="../imgs/1603592779292.png" /></p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">maweiqi/_bulk</span><span class="w"></span>
<span class="na">{&quot;index&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;maweiqi&quot;}}</span><span class="w"></span>
<span class="na">{&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;张三&quot;,&quot;age&quot;: 20,&quot;mail&quot;: &quot;111@qq.com&quot;,&quot;hobby&quot;:&quot;羽毛球、乒乓球、足球&quot;}</span><span class="w"></span>
<span class="na">{&quot;index&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;maweiqi&quot;}}</span><span class="w"></span>
<span class="na">{&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;李四&quot;,&quot;age&quot;: 21,&quot;mail&quot;: &quot;222@qq.com&quot;,&quot;hobby&quot;:&quot;羽毛球、乒乓球、足球、篮球&quot;}</span><span class="w"></span>
<span class="na">{&quot;index&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;maweiqi&quot;}}</span><span class="w"></span>
<span class="na">{&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;王五&quot;,&quot;age&quot;: 22,&quot;mail&quot;: &quot;333@qq.com&quot;,&quot;hobby&quot;:&quot;羽毛球、篮球、游泳、听音乐&quot;}</span><span class="w"></span>
<span class="na">{&quot;index&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;maweiqi&quot;}}</span><span class="w"></span>
<span class="na">{&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;赵六&quot;,&quot;age&quot;: 23,&quot;mail&quot;: &quot;444@qq.com&quot;,&quot;hobby&quot;:&quot;跑步、游泳&quot;}</span><span class="w"></span>
<span class="na">{&quot;index&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;maweiqi&quot;}}</span><span class="w"></span>
<span class="na">{&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;孙七&quot;,&quot;age&quot;: 24,&quot;mail&quot;: &quot;555@qq.com&quot;,&quot;hobby&quot;:&quot;听音乐、看电影&quot;}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603593289839" src="../imgs/1603593289839.png" /></p>
<p>测试搜索：</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">maweiqi/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;match&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">{ </span><span class="w"></span>
<span class="na">    &quot;hobby&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;音乐&quot;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603593452705" src="../imgs/1603593452705.png" /></p>
<h4 id="terms">terms查询<a class="headerlink" href="#terms" title="Permanent link">&para;</a></h4>
<p>terms 跟  term 有点类似，但  terms 允许指定多个匹配条件。 如果某个字段指定了多个值，那么文档需要一
起去做匹配：</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">maweiqi/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;terms&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">{ </span><span class="w"></span>
<span class="na">      &quot;age&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">[20,21]</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>示例</p>
<p><img alt="1603593633930" src="../imgs/1603593633930.png" /></p>
<h4 id="range">range查询<a class="headerlink" href="#range" title="Permanent link">&para;</a></h4>
<p>range 过滤允许我们按照指定范围查找一批数据：</p>
<p>范围操作符包含：</p>
<div class="highlight"><pre><span></span><code>gt :: 大于
gte :: 大于等于
lt :: 小于
lte :: 小于等于
</code></pre></div>
<p>示例</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">maweiqi/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;range&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;age&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">      &quot;gte&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">20,</span><span class="w"></span>
<span class="na">      &quot;lte&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">22</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603593818874" src="../imgs/1603593818874.png" /></p>
<p>exists 查询</p>
<p>exists 查询可以用于查找文档中是否包含指定字段或没有某个字段，类似于SQL语句中的 IS_NULL 条件</p>
<div class="highlight"><pre><span></span><code><span class="c"># &quot;exists&quot;:  必须包含</span><span class="w"></span>
<span class="err">POST</span><span class="w"> </span><span class="err">maweiqi/_search</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;query&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{</span><span class="w"></span>
<span class="na">    &quot;exists&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{ </span><span class="w"></span>
<span class="na">      &quot;field&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;mail&quot;</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>
<span class="w">  </span><span class="err">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603595137313" src="../imgs/1603595137313.png" /></p>
<h2 id="ik-elasticsearch">第五章 IK 分词器和ElasticSearch集成使用<a class="headerlink" href="#ik-elasticsearch" title="Permanent link">&para;</a></h2>
<p>分词就是指将一个文本转化成一系列单词的过程，也叫文本分析，在Elasticsearch中称之为Analysis。
举例：我是中国人 &rarr; 我/是/中国人</p>
<h3 id="51">5.1 上述查询存在问题分析<a class="headerlink" href="#51" title="Permanent link">&para;</a></h3>
<p>ElasticSearch的标准分词器导致的，当我们创建索引时，字段使用的是标准分词器：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;article&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;long&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;store&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;not_analyzed&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;store&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;analyzed&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;analyzer&quot;</span><span class="p">:</span><span class="s2">&quot;standard&quot;</span><span class="w">   </span><span class="err">//标准分词器</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;store&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;analyzed&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">&quot;analyzer&quot;</span><span class="p">:</span><span class="s2">&quot;standard&quot;</span><span class="w">   </span><span class="err">//标准分词器</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>例如对 "我是程序员" 进行分词</p>
<p>标准分词器分词效果测试：</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w">  </span><span class="err">_analyze</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">  &quot;text&quot;</span><span class="o">:</span><span class="s">&quot;我是程序员&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>分词结果：</p>
<p><img alt="1603535202174" src="../imgs/1603535202174.png" /></p>
<p>而我们需要的分词效果是：我、是、程序、程序员</p>
<h4 id="standard">Standard<a class="headerlink" href="#standard" title="Permanent link">&para;</a></h4>
<p>Standard 标准分词，按单词切分，并且会转化成小写</p>
<div class="highlight"><pre><span></span><code><span class="na">POST</span><span class="w"> </span><span class="s">_analyze</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na"> &quot;analyzer&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;standard&quot;,</span><span class="w"></span>
<span class="na"> &quot;text&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;A man becomes learned by asking questions.&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>结果：</p>
<p><img alt="1603598205084" src="../imgs/1603598205084.png" /></p>
<h3 id="52-ik">5.2 IK分词器简介<a class="headerlink" href="#52-ik" title="Permanent link">&para;</a></h3>
<p>IKAnalyzer是一个开源的，基于java语言开发的轻量级的中文分词工具包。从2006年12月推出1.0版开始，IKAnalyzer已经推出 了3个大版本。最初，它是以开源项目Lucene为应用主体的，结合词典分词和文法分析算法的中文分词组件。新版本的IKAnalyzer3.0则发展为 面向Java的公用分词组件，独立于Lucene项目，同时提供了对Lucene的默认优化实现。</p>
<p>IK分词器3.0的特性如下：</p>
<p>1）采用了特有的“正向迭代最细粒度切分算法“，具有60万字/秒的高速处理能力。
2）采用了多子处理器分析模式，支持：英文字母（IP地址、Email、URL）、数字（日期，常用中文数量词，罗马数字，科学计数法），中文词汇（姓名、地名处理）等分词处理。
3）对中英联合支持不是很好,在这方面的处理比较麻烦.需再做一次查询,同时是支持个人词条的优化的词典存储，更小的内存占用。
4）支持用户词典扩展定义。
5）针对Lucene全文检索优化的查询分析器IKQueryParser；采用歧义分析算法优化查询关键字的搜索排列组合，能极大的提高Lucene检索的命中率。</p>
<h3 id="53-elasticsearchik">5.3 ElasticSearch集成IK分词器<a class="headerlink" href="#53-elasticsearchik" title="Permanent link">&para;</a></h3>
<h4 id="531-ik">5.3.1 IK分词器的安装<a class="headerlink" href="#531-ik" title="Permanent link">&para;</a></h4>
<p>1）下载地址：<a href="https://github.com/medcl/elasticsearch-analysis-ik/releases">https://github.com/medcl/elasticsearch-analysis-ik/releases</a>   </p>
<p>课程资料也提供了IK分词器的压缩包：</p>
<p><img alt="1603535390440" src="../imgs/1603535390440.png" /></p>
<p>2）解压，将解压后的elasticsearch文件夹拷贝到elasticsearch-7.4.0\plugins下，并重命名文件夹为ik</p>
<p><img alt="1586096325969" src="../imgs/1586096325969.png" /></p>
<p>3）重新启动ElasticSearch，即可加载IK分词器</p>
<p><img alt="1563760598742" src="../imgs/1563760598742.png" /></p>
<h4 id="532-ik">5.3.2 IK分词器测试<a class="headerlink" href="#532-ik" title="Permanent link">&para;</a></h4>
<p>IK提供了两个分词算法ik_smart 和 ik_max_word</p>
<p>其中 ik_smart 为最少切分，ik_max_word为最细粒度划分</p>
<p>我们分别来试一下</p>
<p>1）最小切分：在浏览器地址栏输入地址</p>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w">  </span><span class="err">_analyze</span><span class="w"></span>
<span class="err">{</span><span class="w"></span>
<span class="na">    &quot;analyzer&quot;</span><span class="o">:</span><span class="s">&quot;ik_smart&quot;,</span><span class="w"></span>
<span class="na">    &quot;text&quot;</span><span class="o">:</span><span class="s">&quot;我是程序员&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>
<p>输出的结果为：</p>
<p><img alt="1603535472760" src="../imgs/1603535472760.png" /></p>
<p>2）最细切分：在浏览器地址栏输入地址</p>
<div class="highlight"><pre><span></span><code><span class="err">POST  _analyze</span>
<span class="err">{</span>
<span class="err">    &quot;analyzer&quot;:&quot;ik_max_word&quot;,</span>
<span class="err">    &quot;text&quot;:&quot;我是程序员&quot;</span>
<span class="err">}</span>
</code></pre></div>
<p>输出的结果为：</p>
<p><img alt="1603535519742" src="../imgs/1603535519742.png" /></p>
<h3 id="54-mapping">5.4 修改索引映射mapping<a class="headerlink" href="#54-mapping" title="Permanent link">&para;</a></h3>
<h4 id="541">5.4.1 重建索引<a class="headerlink" href="#541" title="Permanent link">&para;</a></h4>
<p>删除原有blog1索引</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="err">删除索引</span><span class="w"></span>
<span class="err">DELETE</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="w"></span>
</code></pre></div>
<p>创建索引，此时分词器使用ik_max_word</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="err">创建索引，添加映射，指定使用ik分词器</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;keyword&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;analyzer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ik_max_word&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="err">#</span><span class="w"> </span><span class="err">查询索引</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="w"></span>
</code></pre></div>
<p>创建文档</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="err">添加文档</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_doc/</span><span class="mi">1</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;张三&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;华为5G手机&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="err">#</span><span class="w"> </span><span class="err">添加文档</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_doc/</span><span class="mi">2</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;李四&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;深圳宝安&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="err">#</span><span class="w"> </span><span class="err">添加文档</span><span class="w"></span>
<span class="err">PUT</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_doc/</span><span class="mi">3</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;张三&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;深圳南山&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="err">#</span><span class="w"> </span><span class="err">查询所有数据</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_search</span><span class="w"></span>
</code></pre></div>
<h4 id="543-term">5.4.3 再次测试term测试<a class="headerlink" href="#543-term" title="Permanent link">&para;</a></h4>
<p>请求体：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="err">使用</span><span class="kc">ter</span><span class="err">m查询</span><span class="w"> </span><span class="err">深圳开头的数据</span><span class="w"></span>
<span class="err">GET</span><span class="w"> </span><span class="err">perso</span><span class="kc">n</span><span class="err">/_search</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;term&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;深圳&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>截图：</p>
<p><img alt="1603536223428" src="../imgs/1603536223428.png" /></p>
<h2 id="es-springdata-es">第六章 ES &amp; SpringData ES<a class="headerlink" href="#es-springdata-es" title="Permanent link">&para;</a></h2>
<h3 id="61">6.1 高级客户端<a class="headerlink" href="#61" title="Permanent link">&para;</a></h3>
<p>创建项目 <code>elasticsearch-demo</code></p>
<p>导入pom文件</p>
<div class="highlight"><pre><span></span><code> <span class="nt">&lt;parent&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.2.1.RELEASE<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;relativePath/&gt;</span> <span class="cm">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="nt">&lt;/parent&gt;</span>

    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
        <span class="nt">&lt;java.version&gt;</span>1.8<span class="nt">&lt;/java.version&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="cm">&lt;!--引入es的坐标--&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.elasticsearch.client<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>elasticsearch-rest-high-level-client<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>7.4.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.elasticsearch.client<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>elasticsearch-rest-client<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>7.4.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.elasticsearch<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>elasticsearch<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>7.4.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>fastjson<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.2.4<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

    <span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div>
<p>① 在 <code>resource</code> 文件夹下面创建 <code>application.yml</code> 文件</p>
<div class="highlight"><pre><span></span><code>elasticsearch:
  host: 127.0.0.1
  port: 9200
</code></pre></div>
<p>② 创建启动类</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElasticsearchDemoApplication</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">ElasticsearchDemoApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p>③ 创建 <code>com.atguigu.config.ElasticSearchConfig</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.config</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.HttpHost</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.RestClient</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.RestHighLevelClient</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.context.properties.ConfigurationProperties</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@ConfigurationProperties</span><span class="p">(</span><span class="n">prefix</span> <span class="o">=</span> <span class="s">&quot;elasticsearch&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElasticSearchConfig</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">host</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">port</span><span class="p">;</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getHost</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">host</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHost</span><span class="p">(</span><span class="n">String</span> <span class="n">host</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">host</span> <span class="o">=</span> <span class="n">host</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPort</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">port</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPort</span><span class="p">(</span><span class="kt">int</span> <span class="n">port</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">port</span> <span class="o">=</span> <span class="n">port</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">RestHighLevelClient</span> <span class="nf">client</span><span class="p">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">RestHighLevelClient</span><span class="p">(</span><span class="n">RestClient</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span>
                <span class="k">new</span> <span class="n">HttpHost</span><span class="p">(</span>
                        <span class="n">host</span><span class="p">,</span>
                        <span class="n">port</span><span class="p">,</span>
                        <span class="s">&quot;http&quot;</span>
                <span class="p">)</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>④ 新建测试类</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.test</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.HttpHost</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.delete.DeleteRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.delete.DeleteResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.get.GetRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.get.GetResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.index.IndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.index.IndexResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.support.master.AcknowledgedResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.CreateIndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.CreateIndexResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.GetIndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.GetIndexResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.cluster.metadata.MappingMetaData</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.common.xcontent.XContentType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.After</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Before</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span>
<span class="cm">/**</span>
<span class="cm"> * ElasticsearchTest</span>
<span class="cm"> *</span>
<span class="cm"> * @Author: 马伟奇</span>
<span class="cm"> * @Description:</span>
<span class="cm"> */</span>
<span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest</span> <span class="p">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">RestHighLevelClient</span> <span class="n">client</span><span class="p">;</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">contextLoads</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//1.创建ES客户端对象</span>
<span class="c1">//           client = new RestHighLevelClient(RestClient.builder(</span>
<span class="c1">//           new HttpHost(</span>
<span class="c1">//                   &quot;127.0.0.1&quot;,</span>
<span class="c1">//                   9200,</span>
<span class="c1">//                   &quot;http&quot;</span>
<span class="c1">//           )</span>
<span class="c1">//        ));</span>

        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">client</span><span class="p">);</span>


    <span class="p">}</span>
</code></pre></div>
<h4 id="_4">创建索引<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">org.apache.http.HttpHost</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.delete.DeleteRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.delete.DeleteResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.get.GetRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.get.GetResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.index.IndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.index.IndexResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.action.support.master.AcknowledgedResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.CreateIndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.CreateIndexResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.GetIndexRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.client.indices.GetIndexResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.cluster.metadata.MappingMetaData</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.elasticsearch.common.xcontent.XContentType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span>

<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest</span> <span class="p">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">RestHighLevelClient</span> <span class="n">client</span><span class="p">;</span>
   <span class="cm">/**</span>
<span class="cm">     * 添加索引</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addIndex</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="c1">//1.使用client获取操作索引的对象</span>
        <span class="n">IndicesClient</span> <span class="n">indicesClient</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">indices</span><span class="p">();</span>
        <span class="c1">//2.具体操作，获取返回值</span>
        <span class="n">CreateIndexRequest</span> <span class="n">createRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateIndexRequest</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">);</span>
        <span class="n">CreateIndexResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">indicesClient</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">createRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>

        <span class="c1">//3.根据返回值判断结果</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">isAcknowledged</span><span class="p">());</span>

    <span class="p">}</span>
</code></pre></div>
<p>kibana 查询</p>
<p><img alt="1603353990144" src="../imgs/1603353990144.png" /></p>
<h4 id="_5">添加索引和映射<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.test</span><span class="p">;</span>


<span class="cm">/**</span>
<span class="cm"> * ElasticsearchTest</span>
<span class="cm"> *</span>
<span class="cm"> * @Author: 马伟奇</span>
<span class="cm"> * @Description:</span>
<span class="cm"> */</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest</span> <span class="p">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">RestHighLevelClient</span> <span class="n">client</span><span class="p">;</span>


    <span class="cm">/**</span>
<span class="cm">     * 添加索引</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addIndexAndMapping</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="c1">//1.使用client获取操作索引的对象</span>
        <span class="n">IndicesClient</span> <span class="n">indicesClient</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">indices</span><span class="p">();</span>
        <span class="c1">//2.具体操作，获取返回值</span>
        <span class="n">CreateIndexRequest</span> <span class="n">createRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateIndexRequest</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">);</span>
        <span class="c1">//2.1 设置mappings</span>
        <span class="n">String</span> <span class="n">mapping</span> <span class="o">=</span> <span class="s">&quot;{\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;      \&quot;properties\&quot; : {\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;        \&quot;address\&quot; : {\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;          \&quot;type\&quot; : \&quot;text\&quot;,\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;          \&quot;analyzer\&quot; : \&quot;ik_max_word\&quot;\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;        },\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;        \&quot;age\&quot; : {\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;          \&quot;type\&quot; : \&quot;long\&quot;\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;        },\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;        \&quot;name\&quot; : {\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;          \&quot;type\&quot; : \&quot;keyword\&quot;\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;        }\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;      }\n&quot;</span> <span class="o">+</span>
                <span class="s">&quot;    }&quot;</span><span class="p">;</span>
        <span class="n">createRequest</span><span class="p">.</span><span class="na">mapping</span><span class="p">(</span><span class="n">mapping</span><span class="p">,</span><span class="n">XContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">);</span>


        <span class="n">CreateIndexResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">indicesClient</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">createRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>

        <span class="c1">//3.根据返回值判断结果</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">isAcknowledged</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><img alt="1603354177597" src="../imgs/1603354177597.png" /></p>
<h4 id="_6">查询索引<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>   <span class="cm">/**</span>
<span class="cm">     * 查询索引</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">queryIndex</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="n">IndicesClient</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">indices</span><span class="p">();</span>

        <span class="n">GetIndexRequest</span> <span class="n">getReqeust</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GetIndexRequest</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">);</span>
        <span class="n">GetIndexResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">indices</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">getReqeust</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>


        <span class="c1">//获取结果</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">MappingMetaData</span><span class="o">&gt;</span> <span class="n">mappings</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="na">getMappings</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">key</span> <span class="p">:</span> <span class="n">mappings</span><span class="p">.</span><span class="na">keySet</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">key</span><span class="o">+</span><span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="n">mappings</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">).</span><span class="na">getSourceAsMap</span><span class="p">());</span>

        <span class="p">}</span>

    <span class="p">}</span>
</code></pre></div>
<p><img alt="1605318424400" src="../imgs/1605318424400.png" /></p>
<h4 id="_7">删除索引<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 删除索引     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteIndex</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">IndicesClient</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">indices</span><span class="p">();</span>        <span class="n">DeleteIndexRequest</span> <span class="n">deleteRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DeleteIndexRequest</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">);</span>        <span class="n">AcknowledgedResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">indices</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">deleteRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">isAcknowledged</span><span class="p">());</span>    <span class="p">}</span>
</code></pre></div>
<h4 id="_8">判断索引是否存在<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 判断索引是否存在     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">existIndex</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">IndicesClient</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">indices</span><span class="p">();</span>        <span class="n">GetIndexRequest</span> <span class="n">getRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GetIndexRequest</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">);</span>        <span class="kt">boolean</span> <span class="n">exists</span> <span class="o">=</span> <span class="n">indices</span><span class="p">.</span><span class="na">exists</span><span class="p">(</span><span class="n">getRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">exists</span><span class="p">);</span>    <span class="p">}</span>
</code></pre></div>
<h4 id="map">添加文档,使用map作为数据<a class="headerlink" href="#map" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 添加文档,使用map作为数据     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addDoc</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="c1">//数据对象，map        Map data = new HashMap();        data.put(&quot;address&quot;,&quot;深圳宝安&quot;);        data.put(&quot;name&quot;,&quot;尚硅谷&quot;);        data.put(&quot;age&quot;,20);        //1.获取操作文档的对象        IndexRequest request = new IndexRequest(&quot;aaa&quot;).id(&quot;1&quot;).source(data);        //添加数据，获取结果        IndexResponse response = client.index(request, RequestOptions.DEFAULT);        //打印响应结果        System.out.println(response.getId());    }</span>
</code></pre></div>
<p>创建 <code>com.atguigu.domain.Person</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">id</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">address</span><span class="p">;</span>    <span class="c1">// 设置 set get 和tostring方法}    </span>
</code></pre></div>
<h4 id="_9">添加文档,使用对象作为数据<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 添加文档,使用对象作为数据     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addDoc2</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="c1">//数据对象，javaObject        Person p = new Person();        p.setId(&quot;2&quot;);        p.setName(&quot;硅谷2222&quot;);        p.setAge(30);        p.setAddress(&quot;北京昌平区&quot;);        //将对象转为json        String data = JSON.toJSONString(p);        //1.获取操作文档的对象        IndexRequest request = new IndexRequest(&quot;aaa&quot;).id(p.getId()).source(data,XContentType.JSON);        //添加数据，获取结果        IndexResponse response = client.index(request, RequestOptions.DEFAULT);        //打印响应结果        System.out.println(response.getId());    }</span>
</code></pre></div>
<p><img alt="1603355276342" src="../imgs/1603355276342.png" /></p>
<h4 id="_10">修改文档<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code> <span class="cm">/**     * 修改文档：添加文档时，如果id存在则修改，id不存在则添加     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateDoc</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span><span class="c1">//数据对象，javaObject        Person p = new Person();        p.setId(&quot;2&quot;);        p.setName(&quot;硅谷&quot;);        p.setAge(30);        p.setAddress(&quot;北京昌平区&quot;);        //将对象转为json        String data = JSON.toJSONString(p);        //1.获取操作文档的对象        IndexRequest request = new IndexRequest(&quot;aaa&quot;).id(p.getId()).source(data,XContentType.JSON);        //添加数据，获取结果        IndexResponse response = client.index(request, RequestOptions.DEFAULT);        //打印响应结果        System.out.println(response.getId());    }</span>
</code></pre></div>
<h4 id="id">根据id查询文档<a class="headerlink" href="#id" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 根据id查询文档     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findDocById</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">GetRequest</span> <span class="n">getReqeust</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GetRequest</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">,</span><span class="s">&quot;1&quot;</span><span class="p">);</span>        <span class="c1">//getReqeust.id(&quot;1&quot;);        GetResponse response = client.get(getReqeust, RequestOptions.DEFAULT);        //获取数据对应的json        System.out.println(response.getSourceAsString());    }</span>
</code></pre></div>
<h4 id="id_1">根据id删除文档<a class="headerlink" href="#id_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 根据id删除文档     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delDoc</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">DeleteRequest</span> <span class="n">deleteRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DeleteRequest</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">,</span><span class="s">&quot;1&quot;</span><span class="p">);</span>        <span class="n">DeleteResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">deleteRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>    <span class="p">}</span>
</code></pre></div>
<h4 id="-">批量操作-脚本<a class="headerlink" href="#-" title="Permanent link">&para;</a></h4>
<p>Bulk 批量操作是将文档的增删改查一些列操作，通过一次请求全都做完。减少网络传输次数。</p>
<p><img alt="1605268280923" src="../imgs/1605268280923.png" /></p>
<div class="highlight"><pre><span></span><code><span class="na">GET person/_search# 批量操作# 1 删除1号记录# 2 添加8号记录# 3 修改2号记录 名称为二号POST _bulk{&quot;delete&quot;</span><span class="o">:</span><span class="s">{&quot;_index&quot;:&quot;person&quot;,&quot;_id&quot;:&quot;1&quot;}}{&quot;create&quot;:{&quot;_index&quot;:&quot;person&quot;,&quot;_id&quot;:&quot;8&quot;}}{&quot;name&quot;:&quot;8号&quot;,&quot;age&quot;:80,&quot;address&quot;:&quot;北京&quot;}{&quot;update&quot;:{&quot;_index&quot;:&quot;person&quot;,&quot;_id&quot;:&quot;2&quot;}}{&quot;doc&quot;:{&quot;name&quot;:&quot;2号&quot;}}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.test</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.DocWriteRequest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.bulk.BulkRequest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.bulk.BulkResponse</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.delete.DeleteRequest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.index.IndexRequest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.search.SearchRequest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.search.SearchResponse</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.action.update.UpdateRequest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.client.RequestOptions</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.client.RestHighLevelClient</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.common.text.Text</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.common.xcontent.XContentType</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.index.query.*</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.rest.RestStatus</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.SearchHit</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.SearchHits</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.aggregations.Aggregation</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.aggregations.AggregationBuilder</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.aggregations.AggregationBuilders</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.aggregations.Aggregations</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.aggregations.bucket.terms.Terms</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.builder.SearchSourceBuilder</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.fetch.subphase.highlight.HighlightBuilder</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.fetch.subphase.highlight.HighlightField</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.elasticsearch.search.sort.SortOrder</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span><span class="cm">/** * ElasticsearchTest2 * * @Author: 马伟奇 * @Description: */</span><span class="nd">@SpringBootTestpublic</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest2</span> <span class="p">{</span>    <span class="nd">@Autowired</span>    <span class="kd">private</span> <span class="n">RestHighLevelClient</span> <span class="n">client</span><span class="p">;</span>    <span class="nd">@Test</span>    <span class="kt">void</span> <span class="nf">contextLoads</span><span class="p">()</span> <span class="p">{</span>        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">client</span><span class="p">);</span>    <span class="p">}</span>    <span class="cm">/**     * 1. 批量操作 bulk     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testBulk</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="c1">//创建bulkrequest对象，整合所有操作        BulkRequest bulkRequest = new BulkRequest();        /*        # 1. 删除1号记录        # 2. 添加6号记录        # 3. 修改3号记录 名称为 “三号”         */        //添加对应操作        //1. 删除1号记录        DeleteRequest deleteRequest = new DeleteRequest(&quot;person&quot;,&quot;1&quot;);        bulkRequest.add(deleteRequest);        //2. 添加6号记录        Map map = new HashMap();        map.put(&quot;name&quot;,&quot;六号&quot;);        IndexRequest indexRequest = new IndexRequest(&quot;person&quot;).id(&quot;6&quot;).source(map);        bulkRequest.add(indexRequest);        Map map2 = new HashMap();        map2.put(&quot;name&quot;,&quot;三号&quot;);        //3. 修改3号记录 名称为 “三号”        UpdateRequest updateReqeust = new UpdateRequest(&quot;person&quot;,&quot;3&quot;).doc(map2);        bulkRequest.add(updateReqeust);        //执行批量操作        BulkResponse response = client.bulk(bulkRequest, RequestOptions.DEFAULT);        RestStatus status = response.status();        System.out.println(status);    }}</span>
</code></pre></div>
<h4 id="_11">导入数据<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>将数据库中Goods表的数据导入到ElasticSearch中</p>
<p>① 将数据库中Goods表的数据导入到ElasticSearch中</p>
<p>② 创建索引</p>
<div class="highlight"><pre><span></span><code><span class="na">PUT goods{  &quot;mappings&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{       &quot;properties&quot;: {         &quot;title&quot;: {              &quot;type&quot;: &quot;text&quot;,             &quot;analyzer&quot;: &quot;ik_smart&quot;          },          &quot;price&quot;: {              &quot;type&quot;: &quot;double&quot;            },          &quot;createTime&quot;: {             &quot;type&quot;: &quot;date&quot;          },          &quot;categoryName&quot;: {                   &quot;type&quot;: &quot;keyword&quot;           },          &quot;brandName&quot;: {                  &quot;type&quot;: &quot;keyword&quot;           },              &quot;spec&quot;: {                       &quot;type&quot;: &quot;object&quot;            },          &quot;saleNum&quot;: {                    &quot;type&quot;: &quot;integer&quot;           },                      &quot;stock&quot;: {                  &quot;type&quot;: &quot;integer&quot;           }       }   }}# 查询索引GET goods</span><span class="w"></span>
</code></pre></div>
<ul>
<li>title:商品标题</li>
<li>price:商品价格</li>
<li>createTime:创建时间</li>
<li>categoryName:分类名称。如：家电，手机</li>
<li>brandName:品牌名称。如：华为，小米</li>
<li>spec: 商品规格。如： spec:{"屏幕尺寸","5寸"，"内存大小","128G"}</li>
<li>saleNum:销量</li>
<li>stock:库存量</li>
</ul>
<p>添加文档数据</p>
<div class="highlight"><pre><span></span><code><span class="na">POST goods/_doc/1{  &quot;title&quot;</span><span class="o">:</span><span class="s">&quot;小米手机&quot;,  &quot;price&quot;:1000,  &quot;createTime&quot;:&quot;2019-12-01&quot;,  &quot;categoryName&quot;:&quot;手机&quot;,  &quot;brandName&quot;:&quot;小米&quot;,  &quot;saleNum&quot;:3000,  &quot;stock&quot;:10000,  &quot;spec&quot;:{    &quot;网络制式&quot;:&quot;移动4G&quot;,    &quot;屏幕尺寸&quot;:&quot;4.5&quot;  }}# 查询文档数据GET goods/_search</span><span class="w"></span>
</code></pre></div>
<p>添加坐标</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--mybatis--&gt;</span><span class="nt">&lt;dependency&gt;</span>    <span class="nt">&lt;groupId&gt;</span>org.mybatis.spring.boot<span class="nt">&lt;/groupId&gt;</span>    <span class="nt">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>    <span class="nt">&lt;version&gt;</span>2.1.0<span class="nt">&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;</span>    <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>    <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;&lt;/dependency&gt;</span>
</code></pre></div>
<p>添加 <code>application.yml</code>  配置文件</p>
<div class="highlight"><pre><span></span><code><span class="c1"># datasourcespring:  datasource:    url: jdbc:mysql:///es?serverTimezone=UTC    username: root    password: root    driver-class-name: com.mysql.cj.jdbc.Driver# mybatismybatis:  mapper-locations: classpath:mapper/*Mapper.xml # mapper映射文件路径  type-aliases-package: com.atguigu.domain</span><span class="w"></span>
</code></pre></div>
<p>添加 javabean</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.domain</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.alibaba.fastjson.annotation.JSONField</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.Date</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Goods</span> <span class="p">{</span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>    <span class="kd">private</span> <span class="kt">double</span> <span class="n">price</span><span class="p">;</span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">stock</span><span class="p">;</span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">saleNum</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">Date</span> <span class="n">createTime</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">categoryName</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">brandName</span><span class="p">;</span>    <span class="kd">private</span> <span class="n">Map</span> <span class="n">spec</span><span class="p">;</span>   <span class="c1">// @JSONField(serialize = false)//在转换JSON时，忽略该字段    private String specStr;//接收数据库的信息 &quot;{}&quot;        // 生成set  get  和 toString方法    }    </span>
</code></pre></div>
<p>创建 dao</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.mapper</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.domain.Goods</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span><span class="nd">@Repository@Mapperpublic</span> <span class="kd">interface</span> <span class="nc">GoodsMapper</span> <span class="p">{</span>    <span class="cm">/**     * 查询所有     */</span>    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Goods</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="p">();}</span>
</code></pre></div>
<p>在 <code>resource</code> 文件夹下面 创建 <code>mapper/GoodMapper.xml</code> 配置文件</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&quot;com.atguigu.mapper.GoodsMapper&quot;</span><span class="nt">&gt;</span>    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;findAll&quot;</span> <span class="na">resultType=</span><span class="s">&quot;goods&quot;</span><span class="nt">&gt;</span>        select              `id`         ,              `title`       ,              `price`       ,              `stock`       ,              `saleNum`     ,              `createTime`  ,              `categoryName`,              `brandName`   ,              `spec`  as specStr         from goods    <span class="nt">&lt;/select&gt;&lt;/mapper&gt;</span>
</code></pre></div>
<p>添加测试方法</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTestpublic</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest2</span> <span class="p">{</span>    <span class="nd">@Autowired</span>    <span class="kd">private</span> <span class="n">GoodsMapper</span> <span class="n">goodsMapper</span><span class="p">;</span>    <span class="cm">/**     * 批量导入     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">importData</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="c1">//1.查询所有数据，mysql        List&lt;Goods&gt; goodsList = goodsMapper.findAll();        //System.out.println(goodsList.size());        //2.bulk导入        BulkRequest bulkRequest = new BulkRequest();        //2.1 循环goodsList，创建IndexRequest添加数据        for (Goods goods : goodsList) {            //2.2 设置spec规格信息 Map的数据   specStr:{}            //goods.setSpec(JSON.parseObject(goods.getSpecStr(),Map.class));            String specStr = goods.getSpecStr();            //将json格式字符串转为Map集合            Map map = JSON.parseObject(specStr, Map.class);            //设置spec map            goods.setSpec(map);            //将goods对象转换为json字符串            String data = JSON.toJSONString(goods);//map --&gt; {}            IndexRequest indexRequest = new IndexRequest(&quot;goods&quot;);            indexRequest.id(goods.getId()+&quot;&quot;).source(data, XContentType.JSON);            bulkRequest.add(indexRequest);        }        BulkResponse response = client.bulk(bulkRequest, RequestOptions.DEFAULT);        System.out.println(response.status()); }}</span>
</code></pre></div>
<p>查询数据是否导入</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w"> </span><span class="err">goods/_search</span><span class="w"></span>
</code></pre></div>
<p><img alt="1603950750081" src="../imgs/1603950750081.png" /></p>
<h4 id="matchall">查询所有matchAll查询<a class="headerlink" href="#matchall" title="Permanent link">&para;</a></h4>
<p>matchAll查询：查询所有文档</p>
<p><code>kibana</code> 演示</p>
<div class="highlight"><pre><span></span><code><span class="c"># 查询GET goods/_search{  &quot;query&quot;: {    &quot;match_all&quot;: {}  },  &quot;from&quot;: 0,  &quot;size&quot;: 100}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTestpublic</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest2</span> <span class="p">{</span>   <span class="cm">/**     * 查询所有     *  1. matchAll     *  2. 将查询结果封装为Goods对象，装载到List中     *  3. 分页。默认显示10条     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testMatchAll</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="c1">//2. 构建查询请求对象，指定查询的索引名称        SearchRequest searchRequest = new SearchRequest(&quot;goods&quot;);        //4. 创建查询条件构建器SearchSourceBuilder        SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();        //6. 查询条件        QueryBuilder query = QueryBuilders.matchAllQuery();//查询所有文档        //5. 指定查询条件        sourceBuilder.query(query);        //3. 添加查询条件构建器 SearchSourceBuilder        searchRequest.source(sourceBuilder);        // 8 . 添加分页信息        sourceBuilder.from(0);        sourceBuilder.size(100);        //1. 查询,获取查询结果        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        //7. 获取命中对象 SearchHits        SearchHits searchHits = searchResponse.getHits();        //7.1 获取总记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        //7.2 获取Hits数据  数组        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            //获取json字符串格式的数据            String sourceAsString = hit.getSourceAsString();            //转为java对象            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }}    </span>
</code></pre></div>
<h4 id="term">term 查询<a class="headerlink" href="#term" title="Permanent link">&para;</a></h4>
<p>term查询：不会对查询条件进行分词。</p>
<p><code>kibana</code> 演示</p>
<div class="highlight"><pre><span></span><code><span class="na">GET goods# term 查询GET goods/_search{  &quot;query&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{    &quot;term&quot;: {      &quot;categoryName&quot;: {        &quot;value&quot;: &quot;手机&quot;      }    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTestpublic</span> <span class="kd">class</span> <span class="nc">ElasticsearchTest2</span> <span class="p">{</span>   <span class="cm">/**     * termQuery:词条查询     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testTermQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="n">QueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryBuilders</span><span class="p">.</span><span class="na">termQuery</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span><span class="s">&quot;华为&quot;</span><span class="p">);</span><span class="c1">//term词条查询        sourceBulider.query(query);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    } }    </span>
</code></pre></div>
<h4 id="matchquery">matchQuery:词条分词查询<a class="headerlink" href="#matchquery" title="Permanent link">&para;</a></h4>
<p>match查询：
• 会对查询条件进行分词。
• 然后将分词后的查询条件和词条进行等值匹配
• 默认取并集（OR）</p>
<p><img alt="1603954287650" src="../imgs/1603954287650.png" /></p>
<p><code>kibana</code> 演示</p>
<div class="highlight"><pre><span></span><code><span class="c"># match 查询 &quot;title&quot;: &quot;手机&quot;GET goods/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;title&quot;: &quot;华为&quot;          }  }}# match 查询  &quot;operator&quot;: &quot;or&quot;GET goods/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;title&quot;: {        &quot;query&quot;: &quot;华为手机&quot;,        &quot;operator&quot;: &quot;and&quot;      }    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code> <span class="cm">/**     * matchQuery:词条分词查询，分词之后的等值匹配     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testMatchQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="n">MatchQueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryBuilders</span><span class="p">.</span><span class="na">matchQuery</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span> <span class="s">&quot;华为手机&quot;</span><span class="p">);</span>        <span class="n">query</span><span class="p">.</span><span class="na">operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">.</span><span class="na">AND</span><span class="p">);</span><span class="c1">//求并集        sourceBulider.query(query);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<h4 id="-_1">模糊查询-脚本<a class="headerlink" href="#-_1" title="Permanent link">&para;</a></h4>
<p>wildcard查询：会对查询条件进行分词。还可以使用通配符 ?（任意单个字符） 和 * （0个或多个字符）
prefix查询：前缀查询</p>
<div class="highlight"><pre><span></span><code><span class="c"># wildcard 查询。查询条件分词，模糊查询 华为，华，*华*GET goods/_search{  &quot;query&quot;: {    &quot;wildcard&quot;: {      &quot;title&quot;: {        &quot;value&quot;: &quot;华*&quot;       }    }  }}# 前缀查询GET goods/_search{  &quot;query&quot;: {    &quot;prefix&quot;: {      &quot;brandName&quot;: {        &quot;value&quot;: &quot;三&quot;      }    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code> <span class="cm">/**     * 模糊查询:WildcardQuery     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWildcardQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="n">WildcardQueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryBuilders</span><span class="p">.</span><span class="na">wildcardQuery</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span> <span class="s">&quot;华*&quot;</span><span class="p">);</span>        <span class="n">sourceBulider</span><span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>        <span class="n">searchRequest</span><span class="p">.</span><span class="na">source</span><span class="p">(</span><span class="n">sourceBulider</span><span class="p">);</span>        <span class="n">SearchResponse</span> <span class="n">searchResponse</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>        <span class="n">SearchHits</span> <span class="n">searchHits</span> <span class="o">=</span> <span class="n">searchResponse</span><span class="p">.</span><span class="na">getHits</span><span class="p">();</span>        <span class="c1">//获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code> <span class="cm">/**     * 模糊查询:perfixQuery     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPrefixQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="n">PrefixQueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryBuilders</span><span class="p">.</span><span class="na">prefixQuery</span><span class="p">(</span><span class="s">&quot;brandName&quot;</span><span class="p">,</span> <span class="s">&quot;三&quot;</span><span class="p">);</span>        <span class="n">sourceBulider</span><span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>        <span class="n">searchRequest</span><span class="p">.</span><span class="na">source</span><span class="p">(</span><span class="n">sourceBulider</span><span class="p">);</span>        <span class="n">SearchResponse</span> <span class="n">searchResponse</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">,</span> <span class="n">RequestOptions</span><span class="p">.</span><span class="na">DEFAULT</span><span class="p">);</span>        <span class="n">SearchHits</span> <span class="n">searchHits</span> <span class="o">=</span> <span class="n">searchResponse</span><span class="p">.</span><span class="na">getHits</span><span class="p">();</span>        <span class="c1">//获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<h4 id="-_2">范围查询-脚本<a class="headerlink" href="#-_2" title="Permanent link">&para;</a></h4>
<p>range 范围查询：查找指定字段在指定范围内包含值</p>
<div class="highlight"><pre><span></span><code><span class="c"># 范围查询 gte 大于等于 lte小于等于GET goods/_search{  &quot;query&quot;: {    &quot;range&quot;: {      &quot;price&quot;: {        &quot;gte&quot;: 2000,        &quot;lte&quot;: 3000      }    }  }}# 范围查询 gte 大于等于 lte小于等于GET goods/_search{  &quot;query&quot;: {    &quot;range&quot;: {      &quot;price&quot;: {        &quot;gte&quot;: 2000,        &quot;lte&quot;: 3000      }    }  },  &quot;sort&quot;: [    {      &quot;price&quot;: {        &quot;order&quot;: &quot;desc&quot;      }    }  ]}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 1. 范围查询：rangeQuery     * 2. 排序     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testRangeQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="c1">//范围查询        RangeQueryBuilder query = QueryBuilders.rangeQuery(&quot;price&quot;);        //指定下限 gte大于等于        query.gte(2000);        //指定上限 小于等于        query.lte(3000);        sourceBulider.query(query);        //排序        sourceBulider.sort(&quot;price&quot;, SortOrder.DESC);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<h4 id="querystring-">queryString查询-脚本<a class="headerlink" href="#querystring-" title="Permanent link">&para;</a></h4>
<p>queryString：
• 会对查询条件进行分词。
• 然后将分词后的查询条件和词条进行等值匹配
• 默认取并集（OR）
• 可以指定多个查询字段</p>
<p><img alt="1604928005906" src="../imgs/1604928005906.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c"># queryStringGET goods/_search{  &quot;query&quot;: {    &quot;query_string&quot;: {      &quot;fields&quot;: [&quot;title&quot;,&quot;categoryName&quot;,&quot;brandName&quot;],      &quot;query&quot;: &quot;华为&quot;    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * queryString     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testQueryStringQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="c1">//queryString        QueryStringQueryBuilder query = QueryBuilders.queryStringQuery(&quot;华为手机&quot;)                .field(&quot;title&quot;)                .field(&quot;categoryName&quot;)                .field(&quot;brandName&quot;)                .defaultOperator(Operator.AND);        sourceBulider.query(query);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<h4 id="_12">布尔查询<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>boolQuery：对多个查询条件连接。连接方式：
• must（and）：条件必须成立
• must_not（not）：条件必须不成立
• should（or）：条件可以成立
• filter：条件必须成立，性能比must高。不会计算得分</p>
<p><img alt="1605150087964" src="../imgs/1605150087964.png" /></p>
<div class="highlight"><pre><span></span><code><span class="na">GET goods/_search{  &quot;query&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{    &quot;match&quot;: {      &quot;title&quot;: &quot;华为手机&quot;    }  },  &quot;size&quot;: 500}</span><span class="w"></span>
</code></pre></div>
<p><img alt="1605150393662" src="../imgs/1605150393662.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c"># 计算得分GET goods/_search{  &quot;query&quot;: {    &quot;bool&quot;: {      &quot;must&quot;: [        {          &quot;term&quot;: {            &quot;brandName&quot;: {              &quot;value&quot;: &quot;华为&quot;            }          }        }      ]    }  }}# 不计算得分GET goods/_search{  &quot;query&quot;: {    &quot;bool&quot;: {      &quot;filter&quot;: [        {          &quot;term&quot;: {            &quot;brandName&quot;: {              &quot;value&quot;: &quot;华为&quot;            }          }        }        ]    }  }}# 计算得分 品牌是三星，标题还得电视GET goods/_search{  &quot;query&quot;: {    &quot;bool&quot;: {      &quot;must&quot;: [        {          &quot;term&quot;: {            &quot;brandName&quot;: {              &quot;value&quot;: &quot;三星&quot;            }          }        }      ],      &quot;filter&quot;: {        &quot;term&quot;: {          &quot;title&quot;: &quot;电视&quot;        }      }    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">/**     * 布尔查询：boolQuery     * 1. 查询品牌名称为:华为     * 2. 查询标题包含：手机     * 3. 查询价格在：2000-3000     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testBoolQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="c1">//1.构建boolQuery        BoolQueryBuilder query = QueryBuilders.boolQuery();        //2.构建各个查询条件        //2.1 查询品牌名称为:华为        QueryBuilder termQuery = QueryBuilders.termQuery(&quot;brandName&quot;,&quot;华为&quot;);        query.must(termQuery);        //2.2. 查询标题包含：手机        QueryBuilder matchQuery = QueryBuilders.matchQuery(&quot;title&quot;,&quot;手机&quot;);        query.filter(matchQuery);        //2.3 查询价格在：2000-3000        QueryBuilder rangeQuery = QueryBuilders.rangeQuery(&quot;price&quot;);        ((RangeQueryBuilder) rangeQuery).gte(2000);        ((RangeQueryBuilder) rangeQuery).lte(3000);        query.filter(rangeQuery);        //3.使用boolQuery连接        sourceBulider.query(query);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<h4 id="_13">聚合查询<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>• 指标聚合：相当于MySQL的聚合函数。max、min、avg、sum等
• 桶聚合：相当于MySQL的 group by 操作。不要对text类型的数据进行分组，会失败。</p>
<div class="highlight"><pre><span></span><code><span class="c"># 查询最贵的华为手机，max_price命名随便取，取一个有意义的名字GET goods/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;title&quot;: &quot;华为手机&quot;    }  },  &quot;aggs&quot;: {    &quot;max_price&quot;:{      &quot;max&quot;: {        &quot;field&quot;: &quot;price&quot;      }    }  }}# 桶聚合 分组GET goods/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;title&quot;: &quot;电视&quot;    }  },  &quot;aggs&quot;: {    &quot;goods_brands&quot;: {      &quot;terms&quot;: {        &quot;field&quot;: &quot;brandName&quot;,        &quot;size&quot;: 100      }    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  <span class="cm">/**     * 聚合查询：桶聚合，分组查询     * 1. 查询title包含手机的数据     * 2. 查询品牌列表     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAggQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="c1">// 1. 查询title包含手机的数据        MatchQueryBuilder query = QueryBuilders.matchQuery(&quot;title&quot;, &quot;手机&quot;);        sourceBulider.query(query);        // 2. 查询品牌列表        /*        参数：            1. 自定义的名称，将来用于获取数据            2. 分组的字段         */        AggregationBuilder agg = AggregationBuilders.terms(&quot;goods_brands&quot;).field(&quot;brandName&quot;).size(100);        sourceBulider.aggregation(agg);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }        // 获取聚合结果        Aggregations aggregations = searchResponse.getAggregations();        Map&lt;String, Aggregation&gt; aggregationMap = aggregations.asMap();        //System.out.println(aggregationMap);        Terms goods_brands = (Terms) aggregationMap.get(&quot;goods_brands&quot;);        List&lt;? extends Terms.Bucket&gt; buckets = goods_brands.getBuckets();        List brands = new ArrayList();        for (Terms.Bucket bucket : buckets) {            Object key = bucket.getKey();            brands.add(key);        }        for (Object brand : brands) {            System.out.println(brand);        }    }</span>
</code></pre></div>
<h4 id="_14">高亮查询<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>高亮三要素：
• 高亮字段
• 前缀
• 后缀</p>
<p><img alt="1605158023268" src="../imgs/1605158023268.png" /></p>
<div class="highlight"><pre><span></span><code><span class="na">GET goods/_search{  &quot;query&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">{    &quot;match&quot;: {      &quot;title&quot;: &quot;电视&quot;    }  },  &quot;highlight&quot;: {    &quot;fields&quot;: {      &quot;title&quot;: {        &quot;pre_tags&quot;: &quot;&lt;font color=&#39;red&#39;&gt;&quot;,        &quot;post_tags&quot;: &quot;&lt;/font&gt;&quot;      }    }  }}</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code> <span class="cm">/**     *     * 高亮查询：     *  1. 设置高亮     *      * 高亮字段     *      * 前缀     *      * 后缀     *  2. 将高亮了的字段数据，替换原有数据     */</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testHighLightQuery</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>        <span class="n">SearchRequest</span> <span class="n">searchRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="s">&quot;goods&quot;</span><span class="p">);</span>        <span class="n">SearchSourceBuilder</span> <span class="n">sourceBulider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchSourceBuilder</span><span class="p">();</span>        <span class="c1">// 1. 查询title包含手机的数据        MatchQueryBuilder query = QueryBuilders.matchQuery(&quot;title&quot;, &quot;手机&quot;);        sourceBulider.query(query);        //设置高亮        HighlightBuilder highlighter = new HighlightBuilder();        //设置三要素        highlighter.field(&quot;title&quot;);        highlighter.preTags(&quot;&lt;font color=&#39;red&#39;&gt;&quot;);        highlighter.postTags(&quot;&lt;/font&gt;&quot;);        sourceBulider.highlighter(highlighter);        // 2. 查询品牌列表        /*        参数：            1. 自定义的名称，将来用于获取数据            2. 分组的字段         */        AggregationBuilder agg = AggregationBuilders.terms(&quot;goods_brands&quot;).field(&quot;brandName&quot;).size(100);        sourceBulider.aggregation(agg);        searchRequest.source(sourceBulider);        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);        SearchHits searchHits = searchResponse.getHits();        //获取记录数        long value = searchHits.getTotalHits().value;        System.out.println(&quot;总记录数：&quot;+value);        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();        SearchHit[] hits = searchHits.getHits();        for (SearchHit hit : hits) {            String sourceAsString = hit.getSourceAsString();            //转为java            Goods goods = JSON.parseObject(sourceAsString, Goods.class);            // 获取高亮结果，替换goods中的title            Map&lt;String, HighlightField&gt; highlightFields = hit.getHighlightFields();            HighlightField HighlightField = highlightFields.get(&quot;title&quot;);            Text[] fragments = HighlightField.fragments();            //替换            goods.setTitle(fragments[0].toString());            goodsList.add(goods);        }        for (Goods goods : goodsList) {            System.out.println(goods);        }    }</span>
</code></pre></div>
<h4 id="_15">重建索引<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>随着业务需求的变更，索引的结构可能发生改变。
ElasticSearch的索引一旦创建，只允许添加字段，不允许改变字段。因为改变字段，需要重建倒排索引，影响内部缓
存结构，性能太低。
那么此时，就需要重建一个新的索引，并将原有索引的数据导入到新索引中。</p>
<p>原索引库 ：student_index_v1 </p>
<p>新索引库 ：student_index_v2</p>
<div class="highlight"><pre><span></span><code><span class="c"># 新建student_index_v1索引，索引名称必须全部小写PUT student_index_v1 {  &quot;mappings&quot;: {    &quot;properties&quot;: {      &quot;birthday&quot;:{        &quot;type&quot;: &quot;date&quot;      }    }  }}# 查询索引GET student_index_v1# 添加数据PUT student_index_v1/_doc/1{  &quot;birthday&quot;:&quot;2020-11-11&quot;}# 查询数据GET student_index_v1/_search# 随着业务的变更，换种数据类型进行添加数据，程序会直接报错PUT student_index_v1/_doc/1{  &quot;birthday&quot;:&quot;2020年11月11号&quot;}# 业务变更，需要改变birthday数据类型为text# 1：创建新的索引 student_index_v2# 2：将student_index_v1 数据拷贝到 student_index_v2# 创建新的索引PUT student_index_v2 {  &quot;mappings&quot;: {    &quot;properties&quot;: {      &quot;birthday&quot;:{        &quot;type&quot;: &quot;text&quot;      }    }  }}DELETE student_index_v2# 2：将student_index_v1 数据拷贝到 student_index_v2POST _reindex{  &quot;source&quot;: {    &quot;index&quot;: &quot;student_index_v1&quot;  },  &quot;dest&quot;: {    &quot;index&quot;: &quot;student_index_v2&quot;  }}# 查询新索引库数据GET student_index_v2/_search# 在新的索引库里面添加数据PUT student_index_v2/_doc/2{  &quot;birthday&quot;:&quot;2020年11月13号&quot;}</span><span class="w"></span>
</code></pre></div>
<h3 id="62-springdata-elasticsearch">6.2 SpringData Elasticsearch客户端<a class="headerlink" href="#62-springdata-elasticsearch" title="Permanent link">&para;</a></h3>
<h4 id="621">6.2.1 目标<a class="headerlink" href="#621" title="Permanent link">&para;</a></h4>
<ul>
<li>SpringData的作用:简化了数据库的增删改查操作</li>
<li>SpringDataElasticsearch入门[掌握]</li>
<li>SpringDataElasticsearch查询命名规则[掌握]</li>
</ul>
<h4 id="622">6.2.2 讲解<a class="headerlink" href="#622" title="Permanent link">&para;</a></h4>
<h5 id="6221-springdatajpa">6.2.2.1 SpringDataJpa介绍[集成]<a class="headerlink" href="#6221-springdatajpa" title="Permanent link">&para;</a></h5>
<p>JPA是一个规范，真正操作数据库的是Hibernate（实现数据库增删改查框架[ORM框架],操作数据库采用的方式是面向对象[不写SQL语句]），而springdatajpa是对jpa的封装，将CRUD的方法封装到指定的方法中，操作的时候，只需要调用方法即可。</p>
<p>Spring Data Jpa的实现过程：</p>
<div class="highlight"><pre><span></span><code><span class="err">1：定义实体，实体类添加Jpa的注解</span><span class="w">  </span><span class="err">@Entity</span><span class="w">  </span><span class="err">@Talbe</span><span class="w"> </span><span class="err">@Cloumn</span><span class="w"> </span><span class="err">@Id2：定义接口，接口要继承JpaRepository的接口3：配置spring容器，applicationContext.xml/SpringApplication.run(T.class,args)</span><span class="w"></span>
</code></pre></div>
<h5 id="6222-spring-data-elasticsearch">6.2.2.2 Spring Data ElasticSearch简介<a class="headerlink" href="#6222-spring-data-elasticsearch" title="Permanent link">&para;</a></h5>
<p>(1)SpringData介绍</p>
<p>Spring Data是一个用于简化数据库、非关系型数据库、索引库访问，并支持云服务的开源框架。其主要目标是使得对数据的访问变得方便快捷，并支持map-reduce框架和云计算数据服务。 Spring Data可以极大的简化JPA（Elasticsearch...）的写法，可以在几乎不用写实现的情况下，实现对数据的访问和操作。除了CRUD外，还包括如分页、排序等一些常用的功能。</p>
<p>Spring Data的官网：<a href="http://projects.spring.io/spring-data/">http://projects.spring.io/spring-data/</a></p>
<p>Spring Data常用的功能模块如下：</p>
<p><img alt="1563658940128" src="../imgs/1563658940128.png" /></p>
<p><img alt="1563658984464" src="../imgs/1563658984464.png" /></p>
<p>(2)SpringData Elasticsearch介绍</p>
<p>Spring Data ElasticSearch 基于 spring data API 简化 elasticSearch操作，将原始操作elasticSearch的客户端API 进行封装 。Spring Data为Elasticsearch项目提供集成搜索引擎。Spring Data Elasticsearch POJO的关键功能区域为中心的模型与Elastichsearch交互文档和轻松地编写一个存储索引库数据访问层。</p>
<p>官方网站：<a href="http://projects.spring.io/spring-data-elasticsearch/">http://projects.spring.io/spring-data-elasticsearch/</a> </p>
<h5 id="6223-springdata-elasticsearch">6.2.2.3 SpringData Elasticsearch入门<a class="headerlink" href="#6223-springdata-elasticsearch" title="Permanent link">&para;</a></h5>
<h6 id="62231">6.2.2.3.1 搭建工程<a class="headerlink" href="#62231" title="Permanent link">&para;</a></h6>
<p>(1)搭建工程</p>
<p>创建项目 <code>elasticsearch-springdata-es</code></p>
<p>(2)pom.xml依赖</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>         <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>         <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>    <span class="nt">&lt;groupId&gt;</span>com.atguigu<span class="nt">&lt;/groupId&gt;</span>    <span class="nt">&lt;artifactId&gt;</span>elasticsearch-springdata-es<span class="nt">&lt;/artifactId&gt;</span>    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>     <span class="nt">&lt;parent&gt;</span>        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>        <span class="nt">&lt;version&gt;</span>2.2.1.RELEASE<span class="nt">&lt;/version&gt;</span>    <span class="nt">&lt;/parent&gt;</span>    <span class="nt">&lt;dependencies&gt;</span>        <span class="nt">&lt;dependency&gt;</span>            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-elasticsearch<span class="nt">&lt;/artifactId&gt;</span>        <span class="nt">&lt;/dependency&gt;</span>        <span class="nt">&lt;dependency&gt;</span>            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>        <span class="nt">&lt;/dependency&gt;</span>        <span class="nt">&lt;dependency&gt;</span>            <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>            <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>            <span class="nt">&lt;version&gt;</span>4.12<span class="nt">&lt;/version&gt;</span>            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>        <span class="nt">&lt;/dependency&gt;</span>    <span class="nt">&lt;/dependencies&gt;</span>    <span class="nt">&lt;build&gt;</span>        <span class="nt">&lt;plugins&gt;</span>            <span class="cm">&lt;!-- java编译插件 --&gt;</span>            <span class="nt">&lt;plugin&gt;</span>                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>                <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>                <span class="nt">&lt;version&gt;</span>3.2<span class="nt">&lt;/version&gt;</span>                <span class="nt">&lt;configuration&gt;</span>                    <span class="nt">&lt;source&gt;</span>1.8<span class="nt">&lt;/source&gt;</span>                    <span class="nt">&lt;target&gt;</span>1.8<span class="nt">&lt;/target&gt;</span>                    <span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>                <span class="nt">&lt;/configuration&gt;</span>            <span class="nt">&lt;/plugin&gt;</span>        <span class="nt">&lt;/plugins&gt;</span>    <span class="nt">&lt;/build&gt;&lt;/project&gt;</span>
</code></pre></div>
<h6 id="62232">6.2.2.3.2 增加索引数据<a class="headerlink" href="#62232" title="Permanent link">&para;</a></h6>
<p>(1)编写实体类</p>
<p>创建<code>com.atguigu.domain.Item</code>，代码如下：</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.pojo</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.annotation.Id</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.annotations.Document</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.annotations.Field</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.annotations.FieldType</span><span class="p">;</span><span class="cm">/** * Item * * @Author: 马伟奇 * @Description: */</span><span class="nd">@Document</span><span class="p">(</span><span class="n">indexName</span> <span class="o">=</span> <span class="s">&quot;item&quot;</span><span class="p">,</span><span class="n">shards</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">replicas</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Item</span> <span class="p">{</span>    <span class="nd">@Id</span>    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>    <span class="nd">@Field</span><span class="p">(</span><span class="n">type</span> <span class="o">=</span> <span class="n">FieldType</span><span class="p">.</span><span class="na">Text</span><span class="p">,</span> <span class="n">analyzer</span> <span class="o">=</span> <span class="s">&quot;ik_max_word&quot;</span><span class="p">)</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span> <span class="c1">//标题    @Field(type = FieldType.Keyword)    private String category;// 分类    @Field(type = FieldType.Keyword)    private String brand; // 品牌    @Field(type = FieldType.Double)    private Double price; // 价格    @Field(index = false, type = FieldType.Keyword)    private String images; // 图片地址    public Item() {    }    public Item(Long id, String title, String category, String brand, Double price, String images) {        this.id = id;        this.title = title;        this.category = category;        this.brand = brand;        this.price = price;        this.images = images;    }    public Long getId() {        return id;    }    public void setId(Long id) {        this.id = id;    }    public String getTitle() {        return title;    }    public void setTitle(String title) {        this.title = title;    }    public String getCategory() {        return category;    }    public void setCategory(String category) {        this.category = category;    }    public String getBrand() {        return brand;    }    public void setBrand(String brand) {        this.brand = brand;    }    public Double getPrice() {        return price;    }    public void setPrice(Double price) {        this.price = price;    }    public String getImages() {        return images;    }    public void setImages(String images) {        this.images = images;    }    @Override    public String toString() {        return &quot;Item{&quot; +                &quot;id=&quot; + id +                &quot;, title=&#39;&quot; + title + &#39;\&#39;&#39; +                &quot;, category=&#39;&quot; + category + &#39;\&#39;&#39; +                &quot;, brand=&#39;&quot; + brand + &#39;\&#39;&#39; +                &quot;, price=&quot; + price +                &quot;, images=&#39;&quot; + images + &#39;\&#39;&#39; +                &#39;}&#39;;    }}</span>
</code></pre></div>
<blockquote>
<p>映射</p>
</blockquote>
<p>Spring Data通过注解来声明字段的映射属性，有下面的三个注解：</p>
<p>@Document 作用在类，标记实体类为文档对象，一般有四个属性
indexName：对应索引库名称
shards：分片数量，默认5
replicas：副本数量，默认1
@Id 作用在成员变量，标记一个字段作为id主键
@Field 作用在成员变量，标记为文档的字段，并指定字段映射属性：
type：字段类型，取值是枚举：FieldType
index：是否索引，布尔类型，默认是true
store：是否存储，布尔类型，默认是false
analyzer：分词器名称：ik_max_word</p>
<p>配置 <code>application.yml</code> 文件</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span><span class="w">  </span><span class="nt">data</span><span class="p">:</span><span class="w">    </span><span class="nt">elasticsearch</span><span class="p">:</span><span class="w">      </span><span class="nt">cluster-name</span><span class="p">:</span><span class="w"> </span><span class="nt">elasticsearch      cluster-nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1:9300</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.com.ItemRepository</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.pojo.Item</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.core.ElasticsearchTemplate</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.test.context.junit4.SpringRunner</span><span class="p">;</span><span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="nd">@SpringBootTestpublic</span> <span class="kd">class</span> <span class="nc">TestSpringBootES</span> <span class="p">{</span>    <span class="nd">@Autowired</span>    <span class="kd">private</span> <span class="n">ElasticsearchTemplate</span> <span class="n">elasticsearchTemplate</span><span class="p">;</span>    <span class="nd">@Autowired</span>    <span class="kd">private</span> <span class="n">ItemRepository</span> <span class="n">itemRepository</span><span class="p">;</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreate</span><span class="p">()</span> <span class="p">{</span>        <span class="c1">// 创建索引，会根据Item类的@Document注解信息来创建        elasticsearchTemplate.createIndex(Item.class);        // 配置映射，会根据Item类中的id、Field等字段来自动完成映射        elasticsearchTemplate.putMapping(Item.class);    }</span>
</code></pre></div>
<p>使用 <code>kibana</code> 查询</p>
<div class="highlight"><pre><span></span><code><span class="na">GET</span><span class="w"> </span><span class="s">item</span>
</code></pre></div>
<p>增删改操作</p>
<p>Spring Data 的强大之处，就在于你不用写任何DAO处理，自动根据方法名或类的信息进行CRUD操作。只要你定义一个接口，然后继承Repository提供的一些子接口，就能具备各种基本的CRUD功能。</p>
<p>编写 ItemRepository</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.com</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.pojo.Item</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.repository.ElasticsearchRepository</span><span class="p">;</span><span class="cm">/** * ItemRepository * * @Author: 马伟奇 * @Description: */</span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ItemRepository</span> <span class="kd">extends</span> <span class="n">ElasticsearchRepository</span><span class="o">&lt;</span><span class="n">Item</span><span class="p">,</span><span class="n">Long</span><span class="o">&gt;</span> <span class="p">{}</span>
</code></pre></div>
<p>增加</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.com.ItemRepository</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.pojo.Item</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.core.ElasticsearchTemplate</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.test.context.junit4.SpringRunner</span><span class="p">;</span><span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="nd">@SpringBootTestpublic</span> <span class="kd">class</span> <span class="nc">TestSpringBootES</span> <span class="p">{</span>    <span class="nd">@Autowired</span>    <span class="kd">private</span> <span class="n">ElasticsearchTemplate</span> <span class="n">elasticsearchTemplate</span><span class="p">;</span>    <span class="nd">@Autowired</span>    <span class="kd">private</span> <span class="n">ItemRepository</span> <span class="n">itemRepository</span><span class="p">;</span>    <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAdd</span><span class="p">()</span> <span class="p">{</span>        <span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">1L</span><span class="p">,</span> <span class="s">&quot;小米手机7&quot;</span><span class="p">,</span> <span class="s">&quot; 手机&quot;</span><span class="p">,</span>                <span class="s">&quot;小米&quot;</span><span class="p">,</span> <span class="mf">3499.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">);</span>        <span class="n">itemRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>    <span class="p">}}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w"> </span><span class="err">item/_search</span><span class="w"></span>
</code></pre></div>
<p>修改(id存在就是修改，否则就是插入)</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Testpublic</span> <span class="kt">void</span> <span class="nf">testUpdate</span><span class="p">()</span> <span class="p">{</span>    <span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">1L</span><span class="p">,</span> <span class="s">&quot;小米手机7777&quot;</span><span class="p">,</span> <span class="s">&quot; 手机&quot;</span><span class="p">,</span>                         <span class="s">&quot;小米&quot;</span><span class="p">,</span> <span class="mf">9499.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">);</span>    <span class="n">itemRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">item</span><span class="p">);}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w"> </span><span class="err">item/_search</span><span class="w"></span>
</code></pre></div>
<p>批量新增</p>
<div class="highlight"><pre><span></span><code> <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">indexList</span><span class="p">()</span> <span class="p">{</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>        <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">2L</span><span class="p">,</span> <span class="s">&quot;坚果手机R1&quot;</span><span class="p">,</span> <span class="s">&quot; 手机&quot;</span><span class="p">,</span> <span class="s">&quot;锤子&quot;</span><span class="p">,</span> <span class="mf">3699.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/123.jpg&quot;</span><span class="p">));</span>        <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">3L</span><span class="p">,</span> <span class="s">&quot;华为META10&quot;</span><span class="p">,</span> <span class="s">&quot; 手机&quot;</span><span class="p">,</span> <span class="s">&quot;华为&quot;</span><span class="p">,</span> <span class="mf">4499.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/3.jpg&quot;</span><span class="p">));</span>        <span class="c1">// 接收对象集合，实现批量新增        itemRepository.saveAll(list);    }</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w"> </span><span class="err">item/_search</span><span class="w"></span>
</code></pre></div>
<p>删除操作</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Testpublic</span> <span class="kt">void</span> <span class="nf">testDelete</span><span class="p">()</span> <span class="p">{</span>    <span class="n">itemRepository</span><span class="p">.</span><span class="na">deleteById</span><span class="p">(</span><span class="mi">1L</span><span class="p">);}</span>
</code></pre></div>
<p>根据id查询</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testQuery</span><span class="p">(){</span>        <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">optional</span> <span class="o">=</span> <span class="n">itemRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="mi">2L</span><span class="p">);</span>        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">optional</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>    <span class="p">}</span>
</code></pre></div>
<p>查询全部，并按照价格降序排序</p>
<div class="highlight"><pre><span></span><code>  <span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testFind</span><span class="p">(){</span>        <span class="c1">// 查询全部，并按照价格降序排序        Iterable&lt;Item&gt; items = this.itemRepository.findAll(Sort.by(Sort.Direction.DESC, &quot;price&quot;));        items.forEach(item-&gt; System.out.println(item));    }</span>
</code></pre></div>
<p>自定义方法</p>
<p>Spring Data 的另一个强大功能，是根据方法名称自动实现功能。
比如：你的方法名叫做：findByTitle，那么它就知道你是根据title查询，然后自动帮你完成，无需写实现类。
当然，方法名称要符合一定的约定：</p>
<table>
<thead>
<tr>
<th>Keyword</th>
<th>Sample</th>
<th>Elasticsearch Query String</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>And</code></td>
<td><code>findByNameAndPrice</code></td>
<td><code>{"bool" : {"must" : [ {"field" : {"name" : "?"}}, {"field" : {"price" : "?"}} ]}}</code></td>
</tr>
<tr>
<td><code>Or</code></td>
<td><code>findByNameOrPrice</code></td>
<td><code>{"bool" : {"should" : [ {"field" : {"name" : "?"}}, {"field" : {"price" : "?"}} ]}}</code></td>
</tr>
<tr>
<td><code>Is</code></td>
<td><code>findByName</code></td>
<td><code>{"bool" : {"must" : {"field" : {"name" : "?"}}}}</code></td>
</tr>
<tr>
<td><code>Not</code></td>
<td><code>findByNameNot</code></td>
<td><code>{"bool" : {"must_not" : {"field" : {"name" : "?"}}}}</code></td>
</tr>
<tr>
<td><code>Between</code></td>
<td><code>findByPriceBetween</code></td>
<td><code>{"bool" : {"must" : {"range" : {"price" : {"from" : ?,"to" : ?,"include_lower" : true,"include_upper" : true}}}}}</code></td>
</tr>
<tr>
<td><code>LessThanEqual</code></td>
<td><code>findByPriceLessThan</code></td>
<td><code>{"bool" : {"must" : {"range" : {"price" : {"from" : null,"to" : ?,"include_lower" : true,"include_upper" : true}}}}}</code></td>
</tr>
<tr>
<td><code>GreaterThanEqual</code></td>
<td><code>findByPriceGreaterThan</code></td>
<td><code>{"bool" : {"must" : {"range" : {"price" : {"from" : ?,"to" : null,"include_lower" : true,"include_upper" : true}}}}}</code></td>
</tr>
<tr>
<td><code>Before</code></td>
<td><code>findByPriceBefore</code></td>
<td><code>{"bool" : {"must" : {"range" : {"price" : {"from" : null,"to" : ?,"include_lower" : true,"include_upper" : true}}}}}</code></td>
</tr>
<tr>
<td><code>After</code></td>
<td><code>findByPriceAfter</code></td>
<td><code>{"bool" : {"must" : {"range" : {"price" : {"from" : ?,"to" : null,"include_lower" : true,"include_upper" : true}}}}}</code></td>
</tr>
<tr>
<td><code>Like</code></td>
<td><code>findByNameLike</code></td>
<td><code>{"bool" : {"must" : {"field" : {"name" : {"query" : "?*","analyze_wildcard" : true}}}}}</code></td>
</tr>
<tr>
<td><code>StartingWith</code></td>
<td><code>findByNameStartingWith</code></td>
<td><code>{"bool" : {"must" : {"field" : {"name" : {"query" : "?*","analyze_wildcard" : true}}}}}</code></td>
</tr>
<tr>
<td><code>EndingWith</code></td>
<td><code>findByNameEndingWith</code></td>
<td><code>{"bool" : {"must" : {"field" : {"name" : {"query" : "*?","analyze_wildcard" : true}}}}}</code></td>
</tr>
<tr>
<td><code>Contains/Containing</code></td>
<td><code>findByNameContaining</code></td>
<td><code>{"bool" : {"must" : {"field" : {"name" : {"query" : "**?**","analyze_wildcard" : true}}}}}</code></td>
</tr>
<tr>
<td><code>In</code></td>
<td><code>findByNameIn(Collection&lt;String&gt;names)</code></td>
<td><code>{"bool" : {"must" : {"bool" : {"should" : [ {"field" : {"name" : "?"}}, {"field" : {"name" : "?"}} ]}}}}</code></td>
</tr>
<tr>
<td><code>NotIn</code></td>
<td><code>findByNameNotIn(Collection&lt;String&gt;names)</code></td>
<td><code>{"bool" : {"must_not" : {"bool" : {"should" : {"field" : {"name" : "?"}}}}}}</code></td>
</tr>
<tr>
<td><code>Near</code></td>
<td><code>findByStoreNear</code></td>
<td><code>Not Supported Yet !</code></td>
</tr>
<tr>
<td><code>True</code></td>
<td><code>findByAvailableTrue</code></td>
<td><code>{"bool" : {"must" : {"field" : {"available" : true}}}}</code></td>
</tr>
<tr>
<td><code>False</code></td>
<td><code>findByAvailableFalse</code></td>
<td><code>{"bool" : {"must" : {"field" : {"available" : false}}}}</code></td>
</tr>
<tr>
<td><code>OrderBy</code></td>
<td><code>findByAvailableTrueOrderByNameDesc</code></td>
<td><code>{"sort" : [{ "name" : {"order" : "desc"} }],"bool" : {"must" : {"field" : {"available" : true}}}}</code></td>
</tr>
</tbody>
</table>
<p>例如，我们来按照价格区间查询，定义这样的一个方法：</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.com</span><span class="p">;</span><span class="kn">import</span> <span class="nn">com.atguigu.pojo.Item</span><span class="p">;</span><span class="kn">import</span> <span class="nn">org.springframework.data.elasticsearch.repository.ElasticsearchRepository</span><span class="p">;</span><span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span><span class="cm">/** * ItemRepository * * @Author: 马伟奇 * @Description: */</span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ItemRepository</span> <span class="kd">extends</span> <span class="n">ElasticsearchRepository</span><span class="o">&lt;</span><span class="n">Item</span><span class="p">,</span><span class="n">Long</span><span class="o">&gt;</span> <span class="p">{</span>    <span class="cm">/**     * 根据价格区间查询     * @param price1     * @param price2     * @return     */</span>    <span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="nf">findByPriceBetween</span><span class="p">(</span><span class="kt">double</span> <span class="n">price1</span><span class="p">,</span> <span class="kt">double</span> <span class="n">price2</span><span class="p">);}</span>
</code></pre></div>
<p>然后添加一些测试数据：</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Testpublic</span> <span class="kt">void</span> <span class="nf">indexList</span><span class="p">()</span> <span class="p">{</span>    <span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>    <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">1L</span><span class="p">,</span> <span class="s">&quot;小米手机7&quot;</span><span class="p">,</span> <span class="s">&quot;手机&quot;</span><span class="p">,</span> <span class="s">&quot;小米&quot;</span><span class="p">,</span> <span class="mf">3299.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">));</span>    <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">2L</span><span class="p">,</span> <span class="s">&quot;坚果手机R1&quot;</span><span class="p">,</span> <span class="s">&quot;手机&quot;</span><span class="p">,</span> <span class="s">&quot;锤子&quot;</span><span class="p">,</span> <span class="mf">3699.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">));</span>    <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">3L</span><span class="p">,</span> <span class="s">&quot;华为META10&quot;</span><span class="p">,</span> <span class="s">&quot;手机&quot;</span><span class="p">,</span> <span class="s">&quot;华为&quot;</span><span class="p">,</span> <span class="mf">4499.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">));</span>    <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">4L</span><span class="p">,</span> <span class="s">&quot;小米Mix2S&quot;</span><span class="p">,</span> <span class="s">&quot;手机&quot;</span><span class="p">,</span> <span class="s">&quot;小米&quot;</span><span class="p">,</span> <span class="mf">4299.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">));</span>    <span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Item</span><span class="p">(</span><span class="mi">5L</span><span class="p">,</span> <span class="s">&quot;荣耀V10&quot;</span><span class="p">,</span> <span class="s">&quot;手机&quot;</span><span class="p">,</span> <span class="s">&quot;华为&quot;</span><span class="p">,</span> <span class="mf">2799.00</span><span class="p">,</span> <span class="s">&quot;http://image.leyou.com/13123.jpg&quot;</span><span class="p">));</span>    <span class="c1">// 接收对象集合，实现批量新增    itemRepository.saveAll(list);}</span>
</code></pre></div>
<p>不需要写实现类，然后我们直接去运行：</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">queryByPriceBetween</span><span class="p">(){</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">itemRepository</span><span class="p">.</span><span class="na">findByPriceBetween</span><span class="p">(</span><span class="mf">2000.00</span><span class="p">,</span> <span class="mf">3500.00</span><span class="p">);</span>        <span class="k">for</span> <span class="p">(</span><span class="n">Item</span> <span class="n">item</span> <span class="p">:</span> <span class="n">list</span><span class="p">)</span> <span class="p">{</span>            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;item = &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="p">);</span>        <span class="p">}</span>    <span class="p">}</span>
</code></pre></div>
<p>虽然基本查询和自定义方法已经很强大了，但是如果是复杂查询（模糊、通配符、词条查询等）就显得力不从心了。此时，我们只能使用原生查询。</p>

              
			  <hr><span id="busuanzi_container_page_pv"><font size="3" color="grey">本文总阅读量<span id="busuanzi_value_page_pv"></span>次</font></span><br/>
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../Docker/Docker/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Docker" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Docker
            </div>
          </div>
        </a>
      
      
        
        <a href="../../RabbitMQ/RabbitMQ/" class="md-footer__link md-footer__link--next" aria-label="Next: RabbitMQ" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              RabbitMQ
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 尚硅谷
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.1514a9a0.min.js"></script>
      
        <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      
    
  </body>
</html>