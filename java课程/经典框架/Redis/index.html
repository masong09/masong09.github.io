
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.6">
    
    
      
        <title>Redis - 我的文档</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.cd566b2a.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-nosql" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="我的文档" class="md-header__button md-logo" aria-label="我的文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            我的文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Redis
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/01%20Java%E6%A6%82%E8%BF%B0/01%20-%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" class="md-tabs__link md-tabs__link--active">
        Java课程
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC1%E7%AB%A0%20%E9%9D%A2%E8%AF%95%E8%AF%B4%E6%98%8E/" class="md-tabs__link">
        Java就业面试
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      学习文档
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="我的文档" class="md-nav__button md-logo" aria-label="我的文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    我的文档
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Java课程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java课程" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Java课程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1">
          Java基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java基础" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          Java基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_1" type="checkbox" id="__nav_1_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1_1">
          基础部分
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="基础部分" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          基础部分
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/01%20Java%E6%A6%82%E8%BF%B0/01%20-%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        Java概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/02%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/02%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        基本语法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/03%20%E6%95%B0%E7%BB%84/03%20%E6%95%B0%E7%BB%84/" class="md-nav__link">
        数组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/04%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/04%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="md-nav__link">
        面向对象
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/05%20%E5%BC%82%E5%B8%B8/05%20%E5%BC%82%E5%B8%B8/" class="md-nav__link">
        异常
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_2" type="checkbox" id="__nav_1_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_1_2">
          高级部分
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="高级部分" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          高级部分
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/06%20%E5%B8%B8%E7%94%A8%E7%B1%BBAPI/06%20%E5%B8%B8%E7%94%A8%E7%B1%BBAPI/" class="md-nav__link">
        常用类API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/07%20%E9%9B%86%E5%90%88/07%20%E9%9B%86%E5%90%88/" class="md-nav__link">
        集合
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/08%20%E6%B3%9B%E5%9E%8B/08%20%E6%B3%9B%E5%9E%8B/" class="md-nav__link">
        泛型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/09%20File%E7%B1%BB%E4%B8%8EIO%E6%B5%81/09%20File%E7%B1%BB%E4%B8%8EIO%E6%B5%81/" class="md-nav__link">
        File类与IO流
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/10%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        网络编程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/11%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/11%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="md-nav__link">
        多线程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/12%20%E5%8F%8D%E5%B0%84/12%20%E5%8F%8D%E5%B0%84/" class="md-nav__link">
        反射
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java%E5%9F%BA%E7%A1%80/%E9%AB%98%E7%BA%A7%E9%83%A8%E5%88%86/13%20Java8%E6%96%B0%E7%89%B9%E6%80%A7/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" class="md-nav__link">
        Java8新特性
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          MySQL数据库
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MySQL数据库" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          MySQL数据库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/14%20MySQL/MySQL5.7%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/" class="md-nav__link">
        MySQL5.7安装文档
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/14%20MySQL/MySQL%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/14%20MySQL/JDBC%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        JDBC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          JavaWeb阶段
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JavaWeb阶段" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          JavaWeb阶段
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day01/day01_HTML%26CSS/" class="md-nav__link">
        HTML&CSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day02/day02_JS%26%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="md-nav__link">
        JS&正则表达式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day03/day03_VUE%26%E4%B9%A6%E5%9F%8E%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        VUE&书城第一阶段
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day04/day04_XML%26Tomcat%26Http%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        XML&Tomcat&Http协议
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day05/day05_Servlet/" class="md-nav__link">
        Servlet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day06/day06_Request%26Response/" class="md-nav__link">
        Request&Response
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day07/day07_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第二阶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day08/day08_Thymeleaf/" class="md-nav__link">
        Thymeleaf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day09/day09_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第三阶段
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day10/day10_%E4%BC%9A%E8%AF%9D%26%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5%281%29/" class="md-nav__link">
        会话&书城项目第四阶段1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day11/day11_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第四阶段2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day12/day12_Filter%26Listener%26%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        Filter&Listener&书城项目第五阶段1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day13/day13_%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        书城项目第五阶段2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaWeb%E9%98%B6%E6%AE%B5/day14/day14_Ajax%26Axios%26%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5/" class="md-nav__link">
        Ajax&Axios&书城项目第六阶段
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          经典框架
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="经典框架" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          经典框架
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Spring%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        Spring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SpringMVC%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        SpringMVC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MyBatis%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        MyBatis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SSM%20%E6%95%B4%E5%90%88%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        SSM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Maven%20%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        Maven
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A1%86%E6%9E%B6%E9%AB%98%E7%BA%A7%E8%AF%BE%E7%A8%8B%E7%B3%BB%E5%88%97%E4%B9%8BLinuxCentOS7/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Redis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Redis
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-nosql" class="md-nav__link">
    1. NoSQL数据库简介
  </a>
  
    <nav class="md-nav" aria-label="1. NoSQL数据库简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1.  技术发展
  </a>
  
    <nav class="md-nav" aria-label="1.1.  技术发展">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111web10" class="md-nav__link">
    1.1.1.Web1.0时代
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-web20" class="md-nav__link">
    1.1.2. Web2.0时代
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113-cpu" class="md-nav__link">
    1.1.3. 解决CPU及内存压力
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114-io" class="md-nav__link">
    1.1.4. 解决IO压力
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-nosql" class="md-nav__link">
    1.2. NoSQL数据库
  </a>
  
    <nav class="md-nav" aria-label="1.2. NoSQL数据库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-nosql" class="md-nav__link">
    1.2.1. NoSQL数据库概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-nosql" class="md-nav__link">
    1.2.2. NoSQL适用场景
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-nosql" class="md-nav__link">
    1.2.3. NoSQL不适用场景
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124-memcache" class="md-nav__link">
    1.2.4. Memcache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125-redis" class="md-nav__link">
    1.2.5. Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#126-mongdb" class="md-nav__link">
    1.2.6. Mongdb
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3. 行式存储数据库（大数据时代）
  </a>
  
    <nav class="md-nav" aria-label="1.3. 行式存储数据库（大数据时代）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    1.3.1. 行式数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132" class="md-nav__link">
    1.3.2. 列式数据库
  </a>
  
    <nav class="md-nav" aria-label="1.3.2. 列式数据库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1321-hbase" class="md-nav__link">
    1.3.2.1. Hbase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1322-cassandra-ksndr" class="md-nav__link">
    1.3.2.2. Cassandra [kəˈsændrə]
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    1.4. 图关系型数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15db-engines" class="md-nav__link">
    1.5.DB-Engines 数据库排名
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-redis" class="md-nav__link">
    2. Redis概述
  </a>
  
    <nav class="md-nav" aria-label="2. Redis概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1. 应用场景
  </a>
  
    <nav class="md-nav" aria-label="2.1. 应用场景">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211" class="md-nav__link">
    2.1.1. 配合关系型数据库做高速缓存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212" class="md-nav__link">
    2.1.2. 多样的数据结构存储持久化数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-redis" class="md-nav__link">
    2.2. Redis安装
  </a>
  
    <nav class="md-nav" aria-label="2.2. Redis安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-400-for-linuxredis-400targz" class="md-nav__link">
    2.2.1. 安装版本：4.0.0 for Linux（redis-4.0.0.tar.gz）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222" class="md-nav__link">
    2.2.2. 安装步骤
  </a>
  
    <nav class="md-nav" aria-label="2.2.2. 安装步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2226-makejemallocjemalloch" class="md-nav__link">
    2.2.2.6. 再make会报错—Jemalloc/jemalloc.h：没有那个文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2227-make-distclean" class="md-nav__link">
    2.2.2.7. 解决方案：运行make distclean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2228-redis-325make" class="md-nav__link">
    2.2.2.8. 在redis-3.2.5目录下再次执行make命令（只是编译好）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2229-make-test-make-install" class="md-nav__link">
    2.2.2.9. 跳过make test 继续执行: make install
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-usrlocalbin" class="md-nav__link">
    2.2.3. 安装目录：/usr/local/bin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224" class="md-nav__link">
    2.2.4. 前台启动（不推荐）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#225" class="md-nav__link">
    2.2.5. 后台启动（推荐）
  </a>
  
    <nav class="md-nav" aria-label="2.2.5. 后台启动（推荐）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2251-redisconf" class="md-nav__link">
    2.2.5.1. 备份redis.conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2252" class="md-nav__link">
    2.2.5.2. 修改配置文件内容
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2253-redis" class="md-nav__link">
    2.2.5.3. Redis启动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2254-redis-cli" class="md-nav__link">
    2.2.5.4. 用客户端访问：redis-cli
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2255-redis-cli-h-192168153128-p-6379" class="md-nav__link">
    2.2.5.5. 多个端口访问可以：redis-cli -h 192.168.153.128 -p 6379
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2256-ping" class="md-nav__link">
    2.2.5.6. 测试验证： ping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2257-redis" class="md-nav__link">
    2.2.5.7. Redis关闭
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#226-redis" class="md-nav__link">
    2.2.6. Redis介绍相关知识
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#227-redisio" class="md-nav__link">
    2.2.7 Redis是单线程+多路IO复用技术
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 常用五大数据类型简介
  </a>
  
    <nav class="md-nav" aria-label="3. 常用五大数据类型简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-rediskey" class="md-nav__link">
    3.1. Redis键(key)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-redisstring" class="md-nav__link">
    3.2. Redis字符串(String)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-redislist" class="md-nav__link">
    3.3. Redis列表(List)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-redisset" class="md-nav__link">
    3.4. Redis集合(Set)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-redishash" class="md-nav__link">
    3.5. Redis哈希(Hash)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-rediszsetsorted-set" class="md-nav__link">
    3.6. Redis有序集合Zset(sorted set)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-redis" class="md-nav__link">
    4. Redis配置文件介绍
  </a>
  
    <nav class="md-nav" aria-label="4. Redis配置文件介绍">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-units" class="md-nav__link">
    4.1. ###Units单位###
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-includes" class="md-nav__link">
    4.2. ###INCLUDES包含
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3. ###网络相关配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#431-bind" class="md-nav__link">
    4.3.1. bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-protected-mode" class="md-nav__link">
    4.3.2. protected-mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-port" class="md-nav__link">
    4.3.3. Port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434-tcp-backlog" class="md-nav__link">
    4.3.4. tcp-backlog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#435-timeout" class="md-nav__link">
    4.3.5. timeout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#436-tcp-keepalive" class="md-nav__link">
    4.3.6. tcp-keepalive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-general" class="md-nav__link">
    4.4. ###GENERAL通用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#441-daemonize" class="md-nav__link">
    4.4.1. daemonize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#442-pidfile" class="md-nav__link">
    4.4.2. pidfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#443-logleve" class="md-nav__link">
    4.4.3. logleve
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#444-logfile" class="md-nav__link">
    4.4.4. logfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#445-databases-16" class="md-nav__link">
    4.4.5. databases 16
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-security" class="md-nav__link">
    4.5. ###SECURITY安全
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#451" class="md-nav__link">
    4.5.1. 设置密码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46-limits" class="md-nav__link">
    4.6. #### Limits限制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#461-maxclients" class="md-nav__link">
    4.6.1. maxclients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#462-maxmemory" class="md-nav__link">
    4.6.2. maxmemory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#463-maxmemory-policy" class="md-nav__link">
    4.6.3. maxmemory-policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#464-maxmemory-samples" class="md-nav__link">
    4.6.4. maxmemory-samples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-redis_jedis_" class="md-nav__link">
    5. Redis_Jedis_测试
  </a>
  
    <nav class="md-nav" aria-label="5. Redis_Jedis_测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-jedisjar" class="md-nav__link">
    5.1. Jedis所需要的jar包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-redis" class="md-nav__link">
    5.2. 连接Redis注意事项
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-jedis" class="md-nav__link">
    5.3. Jedis常用操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#531-web" class="md-nav__link">
    5.3.1. 创建动态的web工程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532" class="md-nav__link">
    5.3.2. 创建测试程序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    5.4. 测试相关数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#541-jedis-api-key" class="md-nav__link">
    5.4.1. Jedis-API:   Key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#542-jedis-api-string" class="md-nav__link">
    5.4.2. Jedis-API:   String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#543-jedis-api-list" class="md-nav__link">
    5.4.3. Jedis-API:   List
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#544-jedis-api-set" class="md-nav__link">
    5.4.4. Jedis-API:   set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#545-jedis-api-hash" class="md-nav__link">
    5.4.5. Jedis-API:   hash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#546-jedis-api-zset" class="md-nav__link">
    5.4.6. Jedis-API:   zset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55" class="md-nav__link">
    5.5 手机验证码案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-redis" class="md-nav__link">
    6. Redis事务锁机制秒杀
  </a>
  
    <nav class="md-nav" aria-label="6. Redis事务锁机制秒杀">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-redis" class="md-nav__link">
    6.1. Redis的事务定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-multiexecdiscard" class="md-nav__link">
    6.2. Multi、Exec、discard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    6.3. 事务的错误处理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64" class="md-nav__link">
    6.4. 事务冲突的问题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#641" class="md-nav__link">
    6.4.1. 例子
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#642-1-" class="md-nav__link">
    6.4.2. 解决方案1-悲观锁
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#643-2-" class="md-nav__link">
    6.4.3. 解决方案2-乐观锁
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#644-watch-key-key" class="md-nav__link">
    6.4.4. WATCH key [key ...]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#645-unwatch" class="md-nav__link">
    6.4.5. unwatch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-redis" class="md-nav__link">
    6.5. Redis事务三特性
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-redis" class="md-nav__link">
    7. Redis事务秒杀案例
  </a>
  
    <nav class="md-nav" aria-label="7. Redis事务秒杀案例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    7.1. 秒杀案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#711" class="md-nav__link">
    7.1.1 案例分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#712-redis" class="md-nav__link">
    7.1.2 redis存储秒杀库存和秒杀成功用户列表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#713-java" class="md-nav__link">
    7.1.3 秒杀项目java逻辑代码开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-ab" class="md-nav__link">
    7.2. 并发模拟工具ab测试秒杀
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#721-abyum-install-httpd-tools" class="md-nav__link">
    7.2.1. 联网安装ab：yum install httpd-tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#722-ab" class="md-nav__link">
    7.2.2. 无网络安装ab
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#723" class="md-nav__link">
    7.2.3. 测试及结果
  </a>
  
    <nav class="md-nav" aria-label="7.2.3. 测试及结果">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#7233" class="md-nav__link">
    7.2.3.3. 超卖
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73" class="md-nav__link">
    7.3. 超卖问题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74" class="md-nav__link">
    7.4. 利用乐观锁淘汰用户，解决超卖问题。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#75" class="md-nav__link">
    7.5. 继续增加并发测试
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#751" class="md-nav__link">
    7.5.1. 连接有限制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#752" class="md-nav__link">
    7.5.2. 已经秒光，可是还有库存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#753" class="md-nav__link">
    7.5.3. 连接超时，通过连接池解决
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#754" class="md-nav__link">
    7.5.4. 连接池
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#76" class="md-nav__link">
    7.6. 解决库存遗留问题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#761-lua" class="md-nav__link">
    7.6.1. LUA脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#762-luaredis" class="md-nav__link">
    7.6.2. LUA脚本在Redis中的优势
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-redisrdb" class="md-nav__link">
    8. Redis持久化之RDB
  </a>
  
    <nav class="md-nav" aria-label="8. Redis持久化之RDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-rdbredis-database" class="md-nav__link">
    8.1. RDB（Redis DataBase）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#811" class="md-nav__link">
    8.1.1. 官网介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#812-rdb" class="md-nav__link">
    8.1.2. RDB是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#813" class="md-nav__link">
    8.1.3. 备份(持久化)是如何执行的
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#814-fork" class="md-nav__link">
    8.1.4. Fork
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#815-dumprdb" class="md-nav__link">
    8.1.5. dump.rdb文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#816" class="md-nav__link">
    8.1.6. 配置位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#817-rdb" class="md-nav__link">
    8.1.7. 如何触发RDB快照；保持策略
  </a>
  
    <nav class="md-nav" aria-label="8.1.7. 如何触发RDB快照；保持策略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8171" class="md-nav__link">
    8.1.7.1. 配置文件中默认的快照配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8172-save" class="md-nav__link">
    8.1.7.2. Save
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8173-save-vs-bgsave" class="md-nav__link">
    8.1.7.3. 命令save VS bgsave
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8174-flushall" class="md-nav__link">
    8.1.7.4. flushall命令
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8175-stop-writes-on-bgsave-error" class="md-nav__link">
    8.1.7.5. stop-writes-on-bgsave-error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8176-rdbcompressio" class="md-nav__link">
    8.1.7.6. rdbcompressio 压缩文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8177-rdbchecksum" class="md-nav__link">
    8.1.7.7. rdbchecksum 检查完整性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8178-rdb" class="md-nav__link">
    8.1.7.8. rdb的备份
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#818" class="md-nav__link">
    8.1.8. 优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#819" class="md-nav__link">
    8.1.9. 劣势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8110" class="md-nav__link">
    8.1.10. 如何停止了解
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8111" class="md-nav__link">
    8.1.11. 小总结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-redisaof" class="md-nav__link">
    9. Redis持久化之AOF
  </a>
  
    <nav class="md-nav" aria-label="9. Redis持久化之AOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-aofappend-only-file" class="md-nav__link">
    9.1. AOF（Append Only File）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#911" class="md-nav__link">
    9.1.1. 官网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#912" class="md-nav__link">
    9.1.2. 是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#913-aof" class="md-nav__link">
    9.1.3. AOF默认不开启
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#914-aofrdbredis" class="md-nav__link">
    9.1.4. AOF和RDB同时开启，redis听谁的？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#915-aof" class="md-nav__link">
    9.1.5. AOF同步频率设置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#916-aof" class="md-nav__link">
    9.1.6. AOF启动/修复/恢复
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#917-rewrite" class="md-nav__link">
    9.1.7. Rewrite压缩
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#918" class="md-nav__link">
    9.1.8. 优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#919" class="md-nav__link">
    9.1.9. 劣势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9110" class="md-nav__link">
    9.1.10.  小总结
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-which-one" class="md-nav__link">
    9.2. 总结(Which one)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#921" class="md-nav__link">
    9.2.1. 用哪个好
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#922" class="md-nav__link">
    9.2.2. 官网建议
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-redis_" class="md-nav__link">
    10. Redis_主从复制
  </a>
  
    <nav class="md-nav" aria-label="10. Redis_主从复制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    10.1. 是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1011" class="md-nav__link">
    10.1.1. 官网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    10.2. 能干嘛
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103" class="md-nav__link">
    10.3. 主从复制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104" class="md-nav__link">
    10.4. 常用的三种主从模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1041" class="md-nav__link">
    10.4.1. 一主二仆
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1042" class="md-nav__link">
    10.4.2. 薪火相传
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1043" class="md-nav__link">
    10.4.3. 反客为主
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#105-sentinel" class="md-nav__link">
    10.5. 哨兵模式(sentinel)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1051" class="md-nav__link">
    10.5.1. 是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1052" class="md-nav__link">
    10.5.2. 怎么玩(使用步骤)
  </a>
  
    <nav class="md-nav" aria-label="10.5.2. 怎么玩(使用步骤)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10525" class="md-nav__link">
    10.5.2.5. 当主机挂掉，从机选举中产生新的主机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10526" class="md-nav__link">
    10.5.2.6. 复制延时
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1053" class="md-nav__link">
    10.5.3. 故障恢复
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-redis" class="md-nav__link">
    11. Redis集群
  </a>
  
    <nav class="md-nav" aria-label="11. Redis集群">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    11.1. 问题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#112" class="md-nav__link">
    11.2. 什么是集群
  </a>
  
    <nav class="md-nav" aria-label="11.2. 什么是集群">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#113-ruby14" class="md-nav__link">
    11.3. 安装ruby环境14个安装包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1131" class="md-nav__link">
    11.3.1. 能上网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1132" class="md-nav__link">
    11.3.2. 不能上网（推荐）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1175-6redis" class="md-nav__link">
    11.7.5. 启动6个redis服务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114" class="md-nav__link">
    11.4. 将六个节点合成一个集群
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115-redis-cluster" class="md-nav__link">
    11.5. redis cluster 如何分配这六个节点?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#116-slots" class="md-nav__link">
    11.6. 什么是slots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#117" class="md-nav__link">
    11.7. 在集群中录入值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#118" class="md-nav__link">
    11.8. 查询集群中的值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#119" class="md-nav__link">
    11.9. 故障恢复
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1110-jedis" class="md-nav__link">
    11.10. 集群的Jedis开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1111-redis" class="md-nav__link">
    11.11. Redis 集群提供了以下好处
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112-redis" class="md-nav__link">
    11.12. Redis 集群的不足
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_5">
          微服务相关
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="微服务相关" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          微服务相关
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/Docker/Docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/ElasticSearch/ElasticSearch/" class="md-nav__link">
        ElasticSearch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/RabbitMQ/RabbitMQ/" class="md-nav__link">
        RabbitMQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/SpringBoot/SpringBoot/" class="md-nav__link">
        SpringBoot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/SpringCloud/SpringCloud/" class="md-nav__link">
        SpringCloud
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_6">
          高级技术
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="高级技术" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          高级技术
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/git/Git%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/juc/JUC/" class="md-nav__link">
        JUC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/jvm/jvm/" class="md-nav__link">
        jvm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/mysql%E9%AB%98%E7%BA%A7/MySQL%E9%AB%98%E7%BA%A7/" class="md-nav__link">
        mysql高级
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/mysql%E9%AB%98%E7%BA%A7/MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" class="md-nav__link">
        MySQL主从复制
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/MyCat/Mycat/" class="md-nav__link">
        MyCat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF/nginx/Nginx/" class="md-nav__link">
        Nginx
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7">
          项目文档
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="项目文档" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          项目文档
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_1" type="checkbox" id="__nav_1_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_1">
          美年旅游
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="美年旅游" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_1">
          <span class="md-nav__icon md-icon"></span>
          美年旅游
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day01/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC1%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游01
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day02/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC2%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day03/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC3%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游03
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day04/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC4%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day05/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC5%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游05
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day06/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC6%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游06
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day07/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC7%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游07
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day08/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC8%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游08
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day09/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC9%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游09
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day10/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC10%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%BE%8E%E5%B9%B4/day11/%E7%BE%8E%E5%B9%B4%E5%9B%BD%E5%AE%BE%E9%A1%B9%E7%9B%AE%E8%AE%B2%E4%B9%89%EF%BC%88%E7%AC%AC11%E7%AB%A0%EF%BC%89/" class="md-nav__link">
        美年旅游11
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_2" type="checkbox" id="__nav_1_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_2">
          尚邻网
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="尚邻网" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_2">
          <span class="md-nav__icon md-icon"></span>
          尚邻网
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/1.%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83/" class="md-nav__link">
        搭建环境
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/2.%E7%94%A8%E6%88%B7%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86/" class="md-nav__link">
        用户角色管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/3.Apache%20Dubbo/" class="md-nav__link">
        Apache Dubbo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/4.%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86/" class="md-nav__link">
        服务拆分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/5.%E4%BA%8C%E6%89%8B%E6%88%BF%E7%AE%A1%E7%90%86/" class="md-nav__link">
        二手房管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/6.%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/" class="md-nav__link">
        图片上传
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/7.%E5%89%8D%E7%AB%AF%E6%88%BF%E6%BA%90%E5%B1%95%E7%A4%BA/" class="md-nav__link">
        前端房源展示
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/8.%E5%89%8D%E7%AB%AF%E7%99%BB%E5%BD%95%E4%B8%8E%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%85%B3%E6%B3%A8/" class="md-nav__link">
        前端登录与注册与关注
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/9.%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" class="md-nav__link">
        权限管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/10.spring%20security/" class="md-nav__link">
        spring security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E9%82%BB%E7%BD%91/11.session%E5%85%B1%E4%BA%AB/" class="md-nav__link">
        session共享
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_3" type="checkbox" id="__nav_1_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_3">
          谷粒商城
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="谷粒商城" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_3">
          <span class="md-nav__icon md-icon"></span>
          谷粒商城
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/1.%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%88nginx%E3%80%81cors%E3%80%81oss%EF%BC%89/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        谷粒商城01
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/2.%E5%88%86%E7%B1%BB%E3%80%81%E8%A7%84%E6%A0%BC%E3%80%81%E5%95%86%E5%93%81%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/%E8%A7%84%E6%A0%BC%E5%8F%82%E6%95%B0%E5%8F%8A%E5%95%86%E5%93%81%E6%96%B0%E5%A2%9E/" class="md-nav__link">
        谷粒商城02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/3.%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%8F%8Aseata/%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%8F%8Aseata/" class="md-nav__link">
        谷粒商城03
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/4.elasticsearch%28DSL%E5%8F%8ASpringData-Elasticsearch%29/elasticsearch/" class="md-nav__link">
        谷粒商城04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/5.%E5%95%86%E5%93%81%E6%90%9C%E7%B4%A2/%E5%95%86%E5%93%81%E6%90%9C%E7%B4%A2/" class="md-nav__link">
        谷粒商城05
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/6.%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%EF%BC%88Thymeleaf%EF%BC%89%E5%8F%8A%E6%90%9C%E7%B4%A2%E9%A1%B5%E6%B8%B2%E6%9F%93/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E-Thymeleaf/" class="md-nav__link">
        谷粒商城06
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/7.%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%EF%BC%88RabbitMQ%EF%BC%89/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5/" class="md-nav__link">
        谷粒商城07
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/8.%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%28%E7%BC%93%E5%AD%98%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E3%80%81Redisson%E3%80%81%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%29/%E9%A6%96%E9%A1%B5%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB/" class="md-nav__link">
        谷粒商城08
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/9.%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E5%8F%8A%E5%BC%82%E6%AD%A5%E7%BC%96%E6%8E%92%EF%BC%88CompletableFuture%EF%BC%89/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5/" class="md-nav__link">
        谷粒商城09
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/10.%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%EF%BC%88jwt%EF%BC%89/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%EF%BC%88jwt%EF%BC%89/" class="md-nav__link">
        谷粒商城10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/11.%E8%B4%AD%E7%89%A9%E8%BD%A6%EF%BC%88SpringTask%EF%BC%89/%E8%B4%AD%E7%89%A9%E8%BD%A6/" class="md-nav__link">
        谷粒商城11
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/12.%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%88xxl-job%EF%BC%89/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%88xxl-job%EF%BC%89/" class="md-nav__link">
        谷粒商城12
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/13.%E8%AE%A2%E5%8D%95%E3%80%81%E5%BA%93%E5%AD%98/%E8%AE%A2%E5%8D%95%E3%80%81%E5%BA%93%E5%AD%98/" class="md-nav__link">
        谷粒商城13
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E7%94%B5%E5%95%86/14.%E6%94%AF%E4%BB%98%E3%80%81%E7%A7%92%E6%9D%80/%E6%94%AF%E4%BB%98%E3%80%81%E7%A7%92%E6%9D%80/" class="md-nav__link">
        谷粒商城14
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_4" type="checkbox" id="__nav_1_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_4">
          尚融宝
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="尚融宝" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_4">
          <span class="md-nav__icon md-icon"></span>
          尚融宝
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part01-%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D/Part01-%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        项目介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part02-MyBatis-Plus/Part02-MyBatis-Plus/" class="md-nav__link">
        MyBatis-Plus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part03-%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA/Part03-%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        后端接口工程搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part04-%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/Part04-%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        前端知识
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part05-%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/Part05-%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        管理平台前端搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part06-Alibaba%20EasyExcel/Part06-Alibaba%20EasyExcel/" class="md-nav__link">
        Alibaba EasyExcel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part07-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/Part07-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/" class="md-nav__link">
        数据字典
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part08-Redis%E7%BC%93%E5%AD%98/Part08-Redis%E7%BC%93%E5%AD%98/" class="md-nav__link">
        Redis缓存
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part09-NuxtJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93/Part09-NuxtJS%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93/" class="md-nav__link">
        NuxtJS服务器端渲染
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part10-%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1/Part10-%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1/" class="md-nav__link">
        阿里云短信
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java课程/项目文档/尚融宝/Part11-分布式文件系统-阿里云OSS/分布式文件系统-阿里云OSS" class="md-nav__link">
        阿里云OSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part12-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C/Part12-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C/" class="md-nav__link">
        用户注册
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part13-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-%E8%AE%BF%E9%97%AE%E4%BB%A4%E7%89%8C/Part13-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-%E8%AE%BF%E9%97%AE%E4%BB%A4%E7%89%8C/" class="md-nav__link">
        访问令牌
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part14-%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/Part14-%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/" class="md-nav__link">
        用户认证
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part15-%E4%BC%9A%E5%91%98%E7%AE%A1%E7%90%86/Part15-%E4%BC%9A%E5%91%98%E7%AE%A1%E7%90%86/" class="md-nav__link">
        会员管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part16-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-OAuth2/Part16-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8-OAuth2/" class="md-nav__link">
        OAuth2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part17-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/Part17-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="md-nav__link">
        内网穿透
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part18-%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/Part18-%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/" class="md-nav__link">
        微信登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part19-%20SpringCloud/Part19-%20SpringCloud/" class="md-nav__link">
        SpringCloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part20-%E8%B4%A6%E6%88%B7%E7%BB%91%E5%AE%9A/Part20-%E8%B4%A6%E6%88%B7%E7%BB%91%E5%AE%9A/" class="md-nav__link">
        账户绑定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part21-%E7%94%B3%E8%AF%B7%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6/Part21-%E7%94%B3%E8%AF%B7%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6/" class="md-nav__link">
        申请借款额度
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part22-%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6%E5%AE%A1%E6%A0%B8/Part22-%E5%80%9F%E6%AC%BE%E9%A2%9D%E5%BA%A6%E5%AE%A1%E6%A0%B8/" class="md-nav__link">
        借款额度审核
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part23-%E5%80%9F%E6%AC%BE%E7%94%B3%E8%AF%B7/Part23-%E5%80%9F%E6%AC%BE%E7%94%B3%E8%AF%B7/" class="md-nav__link">
        借款申请
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part24-%E5%80%9F%E6%AC%BE%E5%AE%A1%E6%A0%B8/Part24-%E5%80%9F%E6%AC%BE%E5%AE%A1%E6%A0%B8/" class="md-nav__link">
        借款审核
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part25-%E6%A0%87%E7%9A%84%E7%AE%A1%E7%90%86/Part25-%E6%A0%87%E7%9A%84%E7%AE%A1%E7%90%86/" class="md-nav__link">
        标的管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part26-%E6%88%91%E8%A6%81%E6%8A%95%E8%B5%84/Part26-%E6%88%91%E8%A6%81%E6%8A%95%E8%B5%84/" class="md-nav__link">
        我要投资
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part27-%E5%85%85%E5%80%BC/Part27-%E5%85%85%E5%80%BC/" class="md-nav__link">
        充值
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part28-%E6%8A%95%E6%A0%87/Part28-%E6%8A%95%E6%A0%87/" class="md-nav__link">
        投标
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part29-%E6%94%BE%E6%AC%BE/Part29-%E6%94%BE%E6%AC%BE/" class="md-nav__link">
        放款
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part30-%E6%8A%95%E8%B5%84%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA/Part30-%E6%8A%95%E8%B5%84%E5%88%97%E8%A1%A8%E5%B1%95%E7%A4%BA/" class="md-nav__link">
        投资列表展示
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part31-%E6%8F%90%E7%8E%B0%E5%92%8C%E8%BF%98%E6%AC%BE/Part31-%E6%8F%90%E7%8E%B0%E5%92%8C%E8%BF%98%E6%AC%BE/" class="md-nav__link">
        提现和还款
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part32-%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83/Part32-%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83/" class="md-nav__link">
        个人中心
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part33-%E7%BD%91%E5%85%B3/Part33-%E7%BD%91%E5%85%B3/" class="md-nav__link">
        网关
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part34-%E8%A1%A5%E5%85%85/Part34-%E8%A1%A5%E5%85%85/" class="md-nav__link">
        补充
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E8%9E%8D%E5%AE%9D/Part35-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/Part35-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/" class="md-nav__link">
        微信支付
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7_5" type="checkbox" id="__nav_1_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7_5">
          尚医通
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="尚医通" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_7_5">
          <span class="md-nav__icon md-icon"></span>
          尚医通
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day01%20%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%E4%B8%8EMyBatis%20Plus/day01%20%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%E4%B8%8E%20Mybatis%20Plus/" class="md-nav__link">
        项目介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day02%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%E5%92%8C%E5%8C%BB%E9%99%A2%E8%AE%BE%E7%BD%AE/day02%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%E5%92%8C%E5%8C%BB%E9%99%A2%E8%AE%BE%E7%BD%AE/" class="md-nav__link">
        搭建环境和医院设置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day03%20%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/day03%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/" class="md-nav__link">
        前端基础知识（一）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day04%20%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%BA%8C%EF%BC%89/day04%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        前端基础知识（二）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day05%E5%B9%B3%E5%8F%B0%E7%AE%A1%E7%90%86%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/day05%E5%B9%B3%E5%8F%B0%E7%AE%A1%E7%90%86%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        平台管理前端搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day06%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/day06%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/" class="md-nav__link">
        数据字典
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day07mongodb/day07mongodb/" class="md-nav__link">
        mongodb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day08%E5%8C%BB%E9%99%A2%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3/day08%E5%8C%BB%E9%99%A2%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3/" class="md-nav__link">
        医院上传接口
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day09%E5%8C%BB%E9%99%A2%E7%AE%A1%E7%90%86/day09%E5%8C%BB%E9%99%A2%E7%AE%A1%E7%90%86/" class="md-nav__link">
        医院管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day10%E6%8E%92%E7%8F%AD%E7%AE%A1%E7%90%86%E5%92%8C%E7%BD%91%E5%85%B3/day10%E6%8E%92%E7%8F%AD%E7%AE%A1%E7%90%86%E5%92%8C%E7%BD%91%E5%85%B3/" class="md-nav__link">
        排班管理和网关
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day11%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%A6%96%E9%A1%B5/day11%E5%B9%B3%E5%8F%B0%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%A6%96%E9%A1%B5/" class="md-nav__link">
        平台前端搭建与首页
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day12%E6%89%8B%E6%9C%BA%E7%99%BB%E5%BD%95/day12%E6%89%8B%E6%9C%BA%E7%99%BB%E5%BD%95/" class="md-nav__link">
        手机登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day13%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/day13%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95/" class="md-nav__link">
        微信登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day14%E9%98%BF%E9%87%8C%E4%BA%91OSS%E3%80%81%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E4%B8%8E%E5%B0%B1%E8%AF%8A%E4%BA%BA/day14%E9%98%BF%E9%87%8C%E4%BA%91OSS%E3%80%81%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E4%B8%8E%E5%B0%B1%E8%AF%8A%E4%BA%BA/" class="md-nav__link">
        阿里云OSS、用户认证与就诊人
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day15%E9%A2%84%E7%BA%A6%E6%8C%82%E5%8F%B7/day15%E9%A2%84%E7%BA%A6%E6%8C%82%E5%8F%B7/" class="md-nav__link">
        预约挂号
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day16%E9%A2%84%E7%BA%A6%E4%B8%8B%E5%8D%95/day16%E9%A2%84%E7%BA%A6%E4%B8%8B%E5%8D%95/" class="md-nav__link">
        预约下单
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day17%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/day17%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/" class="md-nav__link">
        微信支付
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/%E5%B0%9A%E5%8C%BB%E9%80%9A/day18%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%B8%8E%E7%BB%9F%E8%AE%A1/day18%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%B8%8E%E7%BB%9F%E8%AE%A1/" class="md-nav__link">
        定时任务与统计
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Java就业面试
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java就业面试" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Java就业面试
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC1%E7%AB%A0%20%E9%9D%A2%E8%AF%95%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        第1章 面试说明
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC2%E7%AB%A0%20%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/" class="md-nav__link">
        第2章 手写代码
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC3%E7%AB%A0%20JavaSE/" class="md-nav__link">
        第3章 JavaSE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC4%E7%AB%A0%20JVM/" class="md-nav__link">
        第4章 JVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC5%E7%AB%A0%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        第5章 设计模式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC6%E7%AB%A0%20MySql/" class="md-nav__link">
        第6章 MySql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC7%E7%AB%A0%20Java%20Web/" class="md-nav__link">
        第7章 Java Web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC8%E7%AB%A0%20SSM%E6%A1%86%E6%9E%B6/" class="md-nav__link">
        第8章 SSM框架
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC9%E7%AB%A0%20SpringBoot/" class="md-nav__link">
        第9章 SpringBoot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC10%E7%AB%A0%20SpringCloud/" class="md-nav__link">
        第10章 SpringCloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC11%E7%AB%A0%20Redis/" class="md-nav__link">
        第11章 Redis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC12%E7%AB%A0%20MQ/" class="md-nav__link">
        第12章 MQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC13%E7%AB%A0%20ElasticSearch/" class="md-nav__link">
        第13章 ElasticSearch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC14%E7%AB%A0%20Dubbo/" class="md-nav__link">
        第14章 Dubbo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC15%E7%AB%A0%20Zookeeper/" class="md-nav__link">
        第15章 Zookeeper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC16%E7%AB%A0%20Git/" class="md-nav__link">
        第16章 Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../java%E9%9D%A2%E8%AF%95%E9%A2%98/%E7%AC%AC17%E7%AB%A0%20Linux/" class="md-nav__link">
        第17章 Linux
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        学习文档
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-nosql" class="md-nav__link">
    1. NoSQL数据库简介
  </a>
  
    <nav class="md-nav" aria-label="1. NoSQL数据库简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1.  技术发展
  </a>
  
    <nav class="md-nav" aria-label="1.1.  技术发展">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111web10" class="md-nav__link">
    1.1.1.Web1.0时代
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-web20" class="md-nav__link">
    1.1.2. Web2.0时代
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113-cpu" class="md-nav__link">
    1.1.3. 解决CPU及内存压力
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114-io" class="md-nav__link">
    1.1.4. 解决IO压力
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-nosql" class="md-nav__link">
    1.2. NoSQL数据库
  </a>
  
    <nav class="md-nav" aria-label="1.2. NoSQL数据库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-nosql" class="md-nav__link">
    1.2.1. NoSQL数据库概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-nosql" class="md-nav__link">
    1.2.2. NoSQL适用场景
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-nosql" class="md-nav__link">
    1.2.3. NoSQL不适用场景
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124-memcache" class="md-nav__link">
    1.2.4. Memcache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125-redis" class="md-nav__link">
    1.2.5. Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#126-mongdb" class="md-nav__link">
    1.2.6. Mongdb
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3. 行式存储数据库（大数据时代）
  </a>
  
    <nav class="md-nav" aria-label="1.3. 行式存储数据库（大数据时代）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    1.3.1. 行式数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132" class="md-nav__link">
    1.3.2. 列式数据库
  </a>
  
    <nav class="md-nav" aria-label="1.3.2. 列式数据库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1321-hbase" class="md-nav__link">
    1.3.2.1. Hbase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1322-cassandra-ksndr" class="md-nav__link">
    1.3.2.2. Cassandra [kəˈsændrə]
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    1.4. 图关系型数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15db-engines" class="md-nav__link">
    1.5.DB-Engines 数据库排名
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-redis" class="md-nav__link">
    2. Redis概述
  </a>
  
    <nav class="md-nav" aria-label="2. Redis概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1. 应用场景
  </a>
  
    <nav class="md-nav" aria-label="2.1. 应用场景">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211" class="md-nav__link">
    2.1.1. 配合关系型数据库做高速缓存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212" class="md-nav__link">
    2.1.2. 多样的数据结构存储持久化数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-redis" class="md-nav__link">
    2.2. Redis安装
  </a>
  
    <nav class="md-nav" aria-label="2.2. Redis安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-400-for-linuxredis-400targz" class="md-nav__link">
    2.2.1. 安装版本：4.0.0 for Linux（redis-4.0.0.tar.gz）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222" class="md-nav__link">
    2.2.2. 安装步骤
  </a>
  
    <nav class="md-nav" aria-label="2.2.2. 安装步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2226-makejemallocjemalloch" class="md-nav__link">
    2.2.2.6. 再make会报错—Jemalloc/jemalloc.h：没有那个文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2227-make-distclean" class="md-nav__link">
    2.2.2.7. 解决方案：运行make distclean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2228-redis-325make" class="md-nav__link">
    2.2.2.8. 在redis-3.2.5目录下再次执行make命令（只是编译好）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2229-make-test-make-install" class="md-nav__link">
    2.2.2.9. 跳过make test 继续执行: make install
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-usrlocalbin" class="md-nav__link">
    2.2.3. 安装目录：/usr/local/bin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224" class="md-nav__link">
    2.2.4. 前台启动（不推荐）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#225" class="md-nav__link">
    2.2.5. 后台启动（推荐）
  </a>
  
    <nav class="md-nav" aria-label="2.2.5. 后台启动（推荐）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2251-redisconf" class="md-nav__link">
    2.2.5.1. 备份redis.conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2252" class="md-nav__link">
    2.2.5.2. 修改配置文件内容
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2253-redis" class="md-nav__link">
    2.2.5.3. Redis启动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2254-redis-cli" class="md-nav__link">
    2.2.5.4. 用客户端访问：redis-cli
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2255-redis-cli-h-192168153128-p-6379" class="md-nav__link">
    2.2.5.5. 多个端口访问可以：redis-cli -h 192.168.153.128 -p 6379
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2256-ping" class="md-nav__link">
    2.2.5.6. 测试验证： ping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2257-redis" class="md-nav__link">
    2.2.5.7. Redis关闭
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#226-redis" class="md-nav__link">
    2.2.6. Redis介绍相关知识
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#227-redisio" class="md-nav__link">
    2.2.7 Redis是单线程+多路IO复用技术
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 常用五大数据类型简介
  </a>
  
    <nav class="md-nav" aria-label="3. 常用五大数据类型简介">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-rediskey" class="md-nav__link">
    3.1. Redis键(key)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-redisstring" class="md-nav__link">
    3.2. Redis字符串(String)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-redislist" class="md-nav__link">
    3.3. Redis列表(List)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-redisset" class="md-nav__link">
    3.4. Redis集合(Set)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-redishash" class="md-nav__link">
    3.5. Redis哈希(Hash)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-rediszsetsorted-set" class="md-nav__link">
    3.6. Redis有序集合Zset(sorted set)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-redis" class="md-nav__link">
    4. Redis配置文件介绍
  </a>
  
    <nav class="md-nav" aria-label="4. Redis配置文件介绍">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-units" class="md-nav__link">
    4.1. ###Units单位###
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-includes" class="md-nav__link">
    4.2. ###INCLUDES包含
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3. ###网络相关配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#431-bind" class="md-nav__link">
    4.3.1. bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-protected-mode" class="md-nav__link">
    4.3.2. protected-mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-port" class="md-nav__link">
    4.3.3. Port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434-tcp-backlog" class="md-nav__link">
    4.3.4. tcp-backlog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#435-timeout" class="md-nav__link">
    4.3.5. timeout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#436-tcp-keepalive" class="md-nav__link">
    4.3.6. tcp-keepalive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-general" class="md-nav__link">
    4.4. ###GENERAL通用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#441-daemonize" class="md-nav__link">
    4.4.1. daemonize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#442-pidfile" class="md-nav__link">
    4.4.2. pidfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#443-logleve" class="md-nav__link">
    4.4.3. logleve
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#444-logfile" class="md-nav__link">
    4.4.4. logfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#445-databases-16" class="md-nav__link">
    4.4.5. databases 16
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-security" class="md-nav__link">
    4.5. ###SECURITY安全
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#451" class="md-nav__link">
    4.5.1. 设置密码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46-limits" class="md-nav__link">
    4.6. #### Limits限制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#461-maxclients" class="md-nav__link">
    4.6.1. maxclients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#462-maxmemory" class="md-nav__link">
    4.6.2. maxmemory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#463-maxmemory-policy" class="md-nav__link">
    4.6.3. maxmemory-policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#464-maxmemory-samples" class="md-nav__link">
    4.6.4. maxmemory-samples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-redis_jedis_" class="md-nav__link">
    5. Redis_Jedis_测试
  </a>
  
    <nav class="md-nav" aria-label="5. Redis_Jedis_测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-jedisjar" class="md-nav__link">
    5.1. Jedis所需要的jar包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-redis" class="md-nav__link">
    5.2. 连接Redis注意事项
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-jedis" class="md-nav__link">
    5.3. Jedis常用操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#531-web" class="md-nav__link">
    5.3.1. 创建动态的web工程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532" class="md-nav__link">
    5.3.2. 创建测试程序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    5.4. 测试相关数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#541-jedis-api-key" class="md-nav__link">
    5.4.1. Jedis-API:   Key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#542-jedis-api-string" class="md-nav__link">
    5.4.2. Jedis-API:   String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#543-jedis-api-list" class="md-nav__link">
    5.4.3. Jedis-API:   List
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#544-jedis-api-set" class="md-nav__link">
    5.4.4. Jedis-API:   set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#545-jedis-api-hash" class="md-nav__link">
    5.4.5. Jedis-API:   hash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#546-jedis-api-zset" class="md-nav__link">
    5.4.6. Jedis-API:   zset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55" class="md-nav__link">
    5.5 手机验证码案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-redis" class="md-nav__link">
    6. Redis事务锁机制秒杀
  </a>
  
    <nav class="md-nav" aria-label="6. Redis事务锁机制秒杀">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-redis" class="md-nav__link">
    6.1. Redis的事务定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-multiexecdiscard" class="md-nav__link">
    6.2. Multi、Exec、discard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    6.3. 事务的错误处理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64" class="md-nav__link">
    6.4. 事务冲突的问题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#641" class="md-nav__link">
    6.4.1. 例子
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#642-1-" class="md-nav__link">
    6.4.2. 解决方案1-悲观锁
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#643-2-" class="md-nav__link">
    6.4.3. 解决方案2-乐观锁
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#644-watch-key-key" class="md-nav__link">
    6.4.4. WATCH key [key ...]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#645-unwatch" class="md-nav__link">
    6.4.5. unwatch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-redis" class="md-nav__link">
    6.5. Redis事务三特性
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-redis" class="md-nav__link">
    7. Redis事务秒杀案例
  </a>
  
    <nav class="md-nav" aria-label="7. Redis事务秒杀案例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    7.1. 秒杀案例
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#711" class="md-nav__link">
    7.1.1 案例分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#712-redis" class="md-nav__link">
    7.1.2 redis存储秒杀库存和秒杀成功用户列表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#713-java" class="md-nav__link">
    7.1.3 秒杀项目java逻辑代码开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-ab" class="md-nav__link">
    7.2. 并发模拟工具ab测试秒杀
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#721-abyum-install-httpd-tools" class="md-nav__link">
    7.2.1. 联网安装ab：yum install httpd-tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#722-ab" class="md-nav__link">
    7.2.2. 无网络安装ab
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#723" class="md-nav__link">
    7.2.3. 测试及结果
  </a>
  
    <nav class="md-nav" aria-label="7.2.3. 测试及结果">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#7233" class="md-nav__link">
    7.2.3.3. 超卖
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73" class="md-nav__link">
    7.3. 超卖问题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74" class="md-nav__link">
    7.4. 利用乐观锁淘汰用户，解决超卖问题。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#75" class="md-nav__link">
    7.5. 继续增加并发测试
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#751" class="md-nav__link">
    7.5.1. 连接有限制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#752" class="md-nav__link">
    7.5.2. 已经秒光，可是还有库存
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#753" class="md-nav__link">
    7.5.3. 连接超时，通过连接池解决
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#754" class="md-nav__link">
    7.5.4. 连接池
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#76" class="md-nav__link">
    7.6. 解决库存遗留问题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#761-lua" class="md-nav__link">
    7.6.1. LUA脚本
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#762-luaredis" class="md-nav__link">
    7.6.2. LUA脚本在Redis中的优势
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-redisrdb" class="md-nav__link">
    8. Redis持久化之RDB
  </a>
  
    <nav class="md-nav" aria-label="8. Redis持久化之RDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-rdbredis-database" class="md-nav__link">
    8.1. RDB（Redis DataBase）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#811" class="md-nav__link">
    8.1.1. 官网介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#812-rdb" class="md-nav__link">
    8.1.2. RDB是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#813" class="md-nav__link">
    8.1.3. 备份(持久化)是如何执行的
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#814-fork" class="md-nav__link">
    8.1.4. Fork
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#815-dumprdb" class="md-nav__link">
    8.1.5. dump.rdb文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#816" class="md-nav__link">
    8.1.6. 配置位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#817-rdb" class="md-nav__link">
    8.1.7. 如何触发RDB快照；保持策略
  </a>
  
    <nav class="md-nav" aria-label="8.1.7. 如何触发RDB快照；保持策略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8171" class="md-nav__link">
    8.1.7.1. 配置文件中默认的快照配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8172-save" class="md-nav__link">
    8.1.7.2. Save
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8173-save-vs-bgsave" class="md-nav__link">
    8.1.7.3. 命令save VS bgsave
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8174-flushall" class="md-nav__link">
    8.1.7.4. flushall命令
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8175-stop-writes-on-bgsave-error" class="md-nav__link">
    8.1.7.5. stop-writes-on-bgsave-error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8176-rdbcompressio" class="md-nav__link">
    8.1.7.6. rdbcompressio 压缩文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8177-rdbchecksum" class="md-nav__link">
    8.1.7.7. rdbchecksum 检查完整性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8178-rdb" class="md-nav__link">
    8.1.7.8. rdb的备份
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#818" class="md-nav__link">
    8.1.8. 优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#819" class="md-nav__link">
    8.1.9. 劣势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8110" class="md-nav__link">
    8.1.10. 如何停止了解
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8111" class="md-nav__link">
    8.1.11. 小总结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-redisaof" class="md-nav__link">
    9. Redis持久化之AOF
  </a>
  
    <nav class="md-nav" aria-label="9. Redis持久化之AOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-aofappend-only-file" class="md-nav__link">
    9.1. AOF（Append Only File）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#911" class="md-nav__link">
    9.1.1. 官网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#912" class="md-nav__link">
    9.1.2. 是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#913-aof" class="md-nav__link">
    9.1.3. AOF默认不开启
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#914-aofrdbredis" class="md-nav__link">
    9.1.4. AOF和RDB同时开启，redis听谁的？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#915-aof" class="md-nav__link">
    9.1.5. AOF同步频率设置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#916-aof" class="md-nav__link">
    9.1.6. AOF启动/修复/恢复
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#917-rewrite" class="md-nav__link">
    9.1.7. Rewrite压缩
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#918" class="md-nav__link">
    9.1.8. 优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#919" class="md-nav__link">
    9.1.9. 劣势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9110" class="md-nav__link">
    9.1.10.  小总结
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-which-one" class="md-nav__link">
    9.2. 总结(Which one)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#921" class="md-nav__link">
    9.2.1. 用哪个好
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#922" class="md-nav__link">
    9.2.2. 官网建议
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-redis_" class="md-nav__link">
    10. Redis_主从复制
  </a>
  
    <nav class="md-nav" aria-label="10. Redis_主从复制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101" class="md-nav__link">
    10.1. 是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1011" class="md-nav__link">
    10.1.1. 官网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102" class="md-nav__link">
    10.2. 能干嘛
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103" class="md-nav__link">
    10.3. 主从复制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104" class="md-nav__link">
    10.4. 常用的三种主从模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1041" class="md-nav__link">
    10.4.1. 一主二仆
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1042" class="md-nav__link">
    10.4.2. 薪火相传
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1043" class="md-nav__link">
    10.4.3. 反客为主
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#105-sentinel" class="md-nav__link">
    10.5. 哨兵模式(sentinel)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1051" class="md-nav__link">
    10.5.1. 是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1052" class="md-nav__link">
    10.5.2. 怎么玩(使用步骤)
  </a>
  
    <nav class="md-nav" aria-label="10.5.2. 怎么玩(使用步骤)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10525" class="md-nav__link">
    10.5.2.5. 当主机挂掉，从机选举中产生新的主机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10526" class="md-nav__link">
    10.5.2.6. 复制延时
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1053" class="md-nav__link">
    10.5.3. 故障恢复
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-redis" class="md-nav__link">
    11. Redis集群
  </a>
  
    <nav class="md-nav" aria-label="11. Redis集群">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    11.1. 问题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#112" class="md-nav__link">
    11.2. 什么是集群
  </a>
  
    <nav class="md-nav" aria-label="11.2. 什么是集群">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#113-ruby14" class="md-nav__link">
    11.3. 安装ruby环境14个安装包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1131" class="md-nav__link">
    11.3.1. 能上网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1132" class="md-nav__link">
    11.3.2. 不能上网（推荐）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1175-6redis" class="md-nav__link">
    11.7.5. 启动6个redis服务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114" class="md-nav__link">
    11.4. 将六个节点合成一个集群
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115-redis-cluster" class="md-nav__link">
    11.5. redis cluster 如何分配这六个节点?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#116-slots" class="md-nav__link">
    11.6. 什么是slots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#117" class="md-nav__link">
    11.7. 在集群中录入值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#118" class="md-nav__link">
    11.8. 查询集群中的值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#119" class="md-nav__link">
    11.9. 故障恢复
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1110-jedis" class="md-nav__link">
    11.10. 集群的Jedis开发
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1111-redis" class="md-nav__link">
    11.11. Redis 集群提供了以下好处
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112-redis" class="md-nav__link">
    11.12. Redis 集群的不足
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>Redis</h1>

<p>Redis</p>
<h2 id="1-nosql">1. NoSQL数据库简介<a class="headerlink" href="#1-nosql" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1.  技术发展<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps1.jpg" /></p>
<h4 id="111web10">1.1.1.Web1.0时代<a class="headerlink" href="#111web10" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps2.jpg" /></p>
<h4 id="112-web20">1.1.2. Web2.0时代<a class="headerlink" href="#112-web20" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps3.jpg" /></p>
<h4 id="113-cpu">1.1.3. 解决CPU及内存压力<a class="headerlink" href="#113-cpu" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps4.jpg" /></p>
<h4 id="114-io">1.1.4. 解决IO压力<a class="headerlink" href="#114-io" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps5.jpg" /></p>
<h3 id="12-nosql">1.2. NoSQL数据库<a class="headerlink" href="#12-nosql" title="Permanent link">&para;</a></h3>
<h4 id="121-nosql">1.2.1. NoSQL数据库概述<a class="headerlink" href="#121-nosql" title="Permanent link">&para;</a></h4>
<p>NoSQL(NoSQ = Not Only SQ )，意即“不仅仅是SQL”，泛指非关系型的数据库。 </p>
<p>NoSQ 不依赖业务逻辑方式存储，而以简单的key-value模式存储。因此大大的增加了数据库的扩展能力。</p>
<ul>
<li>
<p>不遵循SQL标准。</p>
</li>
<li>
<p>不支持ACID。</p>
</li>
<li>
<p>远超于SQL的性能。</p>
</li>
</ul>
<h4 id="122-nosql">1.2.2. NoSQL适用场景<a class="headerlink" href="#122-nosql" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>对数据高并发的读写</p>
</li>
<li>
<p>海量数据的读写</p>
</li>
<li>
<p>对数据高可扩展性的</p>
</li>
</ul>
<h4 id="123-nosql">1.2.3. NoSQL不适用场景<a class="headerlink" href="#123-nosql" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>需要事务支持</p>
</li>
<li>
<p>基于sql的结构化查询存储，处理复杂的关系,需要即席查询。</p>
</li>
<li>
<p>（用不着sql的和用了sql也不行的情况，请考虑用NoSql）</p>
</li>
</ul>
<h4 id="124-memcache">1.2.4. Memcache<a class="headerlink" href="#124-memcache" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps6.jpg" /></p>
<p>​   很早出现的NoSql数据库数据都在内存中，一般不持久化支持简单的key-value模式，支持类型单一 一般是作为缓存数据库辅助持久化的数据库</p>
<h4 id="125-redis">1.2.5. Redis<a class="headerlink" href="#125-redis" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps7.jpg" /></p>
<p>​   几乎覆盖了Memcached的绝大部分功能 数据都在内存中，支持持久化，主要用作备份恢复 除了支持简单的key-value模式，还支持多种数据结构的存储，比如 list、set、hash、zset等。一般是作为缓存数据库辅助持久化的数据库,发布订阅(MQ)</p>
<h4 id="126-mongdb">1.2.6. Mongdb<a class="headerlink" href="#126-mongdb" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps8.jpg" /></p>
<p>​   高性能、开源、模式自由(schema  free)的文档型(table,bson)数据库 数据都在内存中， 如果内存不足，把不常用的数据保存到硬盘 虽然是key-value模式，但是对value（尤其是json）提供了丰富的查询功能(JavaScript) ,(分布式文件存储系统)支持二进制数据及大型对象 可以根据数据的特点替代RDBMS ，成为独立的数据库。或者配合RDBMS，存储特定的数据。 </p>
<h3 id="13">1.3. 行式存储数据库（大数据时代）<a class="headerlink" href="#13" title="Permanent link">&para;</a></h3>
<h4 id="131">1.3.1. 行式数据库<a class="headerlink" href="#131" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps9.jpg" /> </p>
<h4 id="132">1.3.2. 列式数据库<a class="headerlink" href="#132" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps10.jpg" /> </p>
<h5 id="1321-hbase">1.3.2.1. Hbase<a class="headerlink" href="#1321-hbase" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps11.jpg" /></p>
<p>HBase是Hadoop项目中的数据库。它用于需要对大量的数据进行随机、实时的读写操作的场景中。</p>
<p>HBase的目标就是处理数据量非常庞大的表，可以用普通的计算机处理超过10亿行数据，还可处理有数百万列元素的数据表。</p>
<h5 id="1322-cassandra-ksndr">1.3.2.2. Cassandra [kəˈsændrə]<a class="headerlink" href="#1322-cassandra-ksndr" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps12.jpg" /></p>
<p>​   Apache Cassandra是一款免费的开源NoSQL数据库，其设计目的在于管理由大量商用服务器构建起来的庞大集群上的海量数据集(数据量通常达到PB级别)。在众多显著特性当中，Cassandra最为卓越的长处是对写入及读取操作进行规模调整，而且其不强调主集群的设计思路能够以相对直观的方式简化各集群的创建与扩展流程。</p>
<h3 id="14">1.4. 图关系型数据库<a class="headerlink" href="#14" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps13.jpg" /></p>
<p>主要应用：社会关系，公共交通网络，地图及网络拓谱(n*(n-1)/2)</p>
<p><img alt="img" src="../Redis.assets/wps14.jpg" /></p>
<h3 id="15db-engines">1.5.DB-Engines 数据库排名<a class="headerlink" href="#15db-engines" title="Permanent link">&para;</a></h3>
<p><a href="http://db-engines.com/en/ranking">http://db-engines.com/en/ranking</a></p>
<p><img alt="img" src="../Redis.assets/wps15.jpg" /></p>
<h2 id="2-redis">2. Redis概述<a class="headerlink" href="#2-redis" title="Permanent link">&para;</a></h2>
<p>More ActionsRedis官方网站http://redis.io</p>
<p>Redis中文官方网站http://<a href="http://www.redis.net.cn">www.redis.net.cn</a></p>
<ul>
<li>
<p>Redis是一个开源的key-value存储系统。</p>
</li>
<li>
<p>和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hash（哈希类型）。</p>
</li>
<li>
<p>这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。</p>
</li>
<li>
<p>在此基础上，Redis支持各种不同方式的排序。</p>
</li>
<li>
<p>与memcached一样，为了保证效率，数据都是缓存在内存中。</p>
</li>
<li>
<p>区别的是Redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件。</p>
</li>
<li>
<p>并且在此基础上实现了master-slave(主从)同步。</p>
</li>
</ul>
<h3 id="21">2.1. 应用场景<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<h4 id="211">2.1.1. 配合关系型数据库做高速缓存<a class="headerlink" href="#211" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>高频次，热门访问的数据，降低数据库IO</p>
</li>
<li>
<p>分布式架构，做session共享</p>
</li>
</ul>
<p><img alt="img" src="../Redis.assets/wps16.jpg" /></p>
<h4 id="212">2.1.2. 多样的数据结构存储持久化数据<a class="headerlink" href="#212" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps17.jpg" /></p>
<h3 id="22-redis">2.2. Redis安装<a class="headerlink" href="#22-redis" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps18.jpg" /></p>
<p><img alt="img" src="../Redis.assets/wps19.jpg" /></p>
<h4 id="221-400-for-linuxredis-400targz">2.2.1. 安装版本：4.0.0 for Linux（redis-4.0.0.tar.gz）<a class="headerlink" href="#221-400-for-linuxredis-400targz" title="Permanent link">&para;</a></h4>
<p>不用考虑在windows环境下对Redis的支持</p>
<p><img alt="img" src="../Redis.assets/wps20.jpg" /></p>
<h4 id="222">2.2.2. 安装步骤<a class="headerlink" href="#222" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>下载redis-4.0.0.tar.gz拷贝到/opt目录
解压命令：tar -zxvf redis-4.0.0.tar.gz
解压完成后进入目录：cd redis-4.0.0
在redis-4.0.0 目录下执行编译命令：make  
gcc：命令未找到
</code></pre></div>
<p><img alt="img" src="../Redis.assets/wps21.jpg" /></p>
<p>能上网：</p>
<div class="highlight"><pre><span></span><code>安装C、C++语言的编译环境
yum install gcc -y
yum install gcc-c++ -y
</code></pre></div>
<p>不能上网</p>
<div class="highlight"><pre><span></span><code>执行  cd  /run/media/root/CentOS 7 x86_64/Packages（已经从中拷贝出来了26个安装包，直接使用准备好的文件夹rpmgcc安装即可）
</code></pre></div>
<p><img alt="img" src="../Redis.assets/wps22.jpg" /></p>
<div class="highlight"><pre><span></span><code>rpm -Uvh *.rpm --nodeps --force
安装后版本
gcc -v
g++ -v 
</code></pre></div>
<h5 id="2226-makejemallocjemalloch">2.2.2.6. 再make会报错—Jemalloc/jemalloc.h：没有那个文件<a class="headerlink" href="#2226-makejemallocjemalloch" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps23.jpg" /></p>
<h5 id="2227-make-distclean">2.2.2.7. 解决方案：运行make distclean<a class="headerlink" href="#2227-make-distclean" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps24.jpg" /></p>
<h5 id="2228-redis-325make">2.2.2.8. 在redis-3.2.5目录下再次执行make命令（只是编译好）<a class="headerlink" href="#2228-redis-325make" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps25.jpg" /></p>
<h5 id="2229-make-test-make-install">2.2.2.9. 跳过make test 继续执行: make install<a class="headerlink" href="#2229-make-test-make-install" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps26.jpg" /></p>
<h4 id="223-usrlocalbin">2.2.3. 安装目录：/usr/local/bin<a class="headerlink" href="#223-usrlocalbin" title="Permanent link">&para;</a></h4>
<p>查看默认安装目录：</p>
<p>redis-benchmark:性能测试工具，可以在自己本子运行，看看自己本子性能如何</p>
<p>redis-check-aof：修复有问题的AOF文件，rdb和aof后面讲</p>
<p>redis-check-dump：修复有问题的dump.rdb文件</p>
<p>redis-sentinel：Redis集群使用</p>
<p>redis-server：Redis服务器启动命令</p>
<p>redis-cli：客户端，操作入口</p>
<h4 id="224">2.2.4. 前台启动（不推荐）<a class="headerlink" href="#224" title="Permanent link">&para;</a></h4>
<p>前台启动，命令行窗口不能关闭，否则服务器停止</p>
<p><img alt="img" src="../Redis.assets/wps27.jpg" /></p>
<p>redis-cli -h 192.168.153.130 -p 6379  因为有保护模式所以外网链接存储数失败,</p>
<p>redis-cli  本地连接存储数据成功</p>
<h4 id="225">2.2.5. 后台启动（推荐）<a class="headerlink" href="#225" title="Permanent link">&para;</a></h4>
<h5 id="2251-redisconf">2.2.5.1. 备份redis.conf<a class="headerlink" href="#2251-redisconf" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>拷贝一份redis.conf到其他目录
cp redis.conf /usr/local/bin/myredis/redis.conf
</code></pre></div>
<h5 id="2252">2.2.5.2. 修改配置文件内容<a class="headerlink" href="#2252" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>daemonize no 改成 yes，让服务在后台启动
#bind 127.0.0.1，注释掉可以让外网连接
protected-mode no，关闭保护模式
</code></pre></div>
<h5 id="2253-redis">2.2.5.3. Redis启动<a class="headerlink" href="#2253-redis" title="Permanent link">&para;</a></h5>
<p>./redis-server myredis/redis.conf</p>
<p><img alt="img" src="../Redis.assets/wps28.jpg" /></p>
<p>查看redis是否启动 ps -ef|grep redis</p>
<h5 id="2254-redis-cli">2.2.5.4. 用客户端访问：redis-cli<a class="headerlink" href="#2254-redis-cli" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps29.jpg" /></p>
<h5 id="2255-redis-cli-h-192168153128-p-6379">2.2.5.5. 多个端口访问可以：redis-cli -h 192.168.153.128 -p 6379<a class="headerlink" href="#2255-redis-cli-h-192168153128-p-6379" title="Permanent link">&para;</a></h5>
<h5 id="2256-ping">2.2.5.6. 测试验证： ping<a class="headerlink" href="#2256-ping" title="Permanent link">&para;</a></h5>
<p><img alt="img" src="../Redis.assets/wps30.jpg" /></p>
<h5 id="2257-redis">2.2.5.7. Redis关闭<a class="headerlink" href="#2257-redis" title="Permanent link">&para;</a></h5>
<p>单实例关闭：redis-cli shutdown,将服务也会关闭</p>
<p><img alt="img" src="../Redis.assets/wps31.jpg" /></p>
<p>也可以进入终端后再关闭</p>
<p><img alt="img" src="../Redis.assets/wps32.jpg" /></p>
<p>多实例关闭，指定端口关闭：redis-cli -h 192.168.153.128 -p 6379 shutdown</p>
<h4 id="226-redis">2.2.6. Redis介绍相关知识<a class="headerlink" href="#226-redis" title="Permanent link">&para;</a></h4>
<p><img alt="image-20200912090402662" src="../Redis.assets/image-20200912090402742.png" /></p>
<ul>
<li>端口6379从何而来 Alessia Merz</li>
<li>默认16个数据库，类似数组下标从0开始，初始默认使用0号库 使用命令 select  <dbid>  来切换数据库。</li>
<li>如: select 8  统一密码管理，所有库同样密码。</li>
<li>dbsize查看当前数据库的key的数量</li>
<li>flushdb清空当前库 flushall通杀全部库</li>
</ul>
<h4 id="227-redisio">2.2.7 Redis是单线程+多路IO复用技术<a class="headerlink" href="#227-redisio" title="Permanent link">&para;</a></h4>
<p>使用<img alt="image-20200921092043730" src="../Redis.assets/image-20200921092043730.png" />可以对Redis做性能测试https://<a href="http://www.redis.net.cn/tutorial/3521.html">www.redis.net.cn/tutorial/3521.html</a></p>
<p><img alt="image-20200929171057070" src="../Redis.assets/image-20200929171057070.png" /></p>
<div class="highlight"><pre><span></span><code>redis-benchmark -h localhost -p 6379 -c 100 -n 100000
</code></pre></div>
<p><img alt="image-20200921092437931" src="../Redis.assets/image-20200921092437931.png" /></p>
<ol>
<li>Redis采用单线程操作,官方提供的数据为100000+ 的QPS </li>
<li>Redis是基于内存(RAM)操作,CPU不是Redis性能瓶颈,而是根据机器的内存和网络带宽</li>
<li>注意:</li>
<li>高性能的服务器并不是多线程的,因为多线程(CPU上下文切换)会耗时,但是效率会比单线程的要高</li>
<li>读写速度:CPU&gt;内存&gt;硬盘</li>
<li>Redis将所有的数据放在内存中,所以单线程操作效率是最高的,多线程操作对于内存系统来说会有CPU上下文切换耗时</li>
<li>多路复用是指使用一个线程来检查多个文件描述符（Socket）的就绪状态，比如调用select和poll以及expoll函数，传入多个文件描述符，如果有一个 文件描述符就绪,则返回，否则阻塞直到超时。得到就绪状态后进行真正的操作可以在同一个线程里执行，也可以启动线程执行（比如使用线程池）</li>
<li><img alt="" src="Redis.assets/无标题-1601429345089.png" /></li>
</ol>
<p>串行  vs  多线程+锁（memcached） vs  单线程+多路IO复用(Redis)</p>
<p>（与Memcached三点不同: 支持多数据类型，支持持久化，单线程+多路IO复用）  </p>
<h2 id="3">3. 常用五大数据类型简介<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>redis常见数据类型操作命令<a href="Http://redisdoc.com/">Http://redisdoc.com/</a> </p>
<h3 id="31-rediskey">3.1. Redis键(key)<a class="headerlink" href="#31-rediskey" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>keys *     查看当前库所有key   (匹配：keys *) 禁用   
exists key   判断某个key是否存在
type key    查看你的key是什么类型
del key     删除指定的key数据
expire key 10  10秒钟：为给定的key设置过期时间,所有存储的数据都需要进行时间设置
ttl key      查看还有多少秒过期，-1表示永不过期，-2表示已过期
select     命令切换数据库
dbsize     查看当前数据库的key的数量
flushdb    清空当前库
flushall    通杀全部库
</code></pre></div>
<h3 id="32-redisstring">3.2. Redis字符串(String)<a class="headerlink" href="#32-redisstring" title="Permanent link">&para;</a></h3>
<ul>
<li>String是Redis最基本的类型，一个key对应一个value。 Map<String,String></li>
<li>String类型是二进制安全的。意味着Redis的string可以包含任何数据。比如jpg图片或者序列化的对象。</li>
<li>String类型是Redis最基本的数据类型，一个Redis中字符串value最多可以是512M</li>
</ul>
<div class="highlight"><pre><span></span><code>set  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>                             添加键值对,如果键已经存在则修改
get  <span class="nt">&lt;key&gt;</span>                                      查询对应键值
append  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>                          将给定的<span class="nt">&lt;value&gt;</span> 追加到原值的末尾
strlen   <span class="nt">&lt;key&gt;</span>                                  获得值的长度
setnx  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>                           只有在 key 不存在时   设置 key 的值,分布式锁
incr  <span class="nt">&lt;key&gt;</span>                                     将 key 中储存的数字值增1 只能对数字值操作，如果为空，新增值为1
decr  <span class="nt">&lt;key&gt;</span>                                     将 key 中储存的数字值减1 只能对数字值操作，如果为空，新增值为-1
incrby / decrby  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;步长&gt;</span>                   将 key 中储存的数字值增减。自定义步长。
mset  <span class="nt">&lt;key1&gt;</span>  <span class="nt">&lt;value1&gt;</span>  <span class="nt">&lt;key2&gt;</span>  <span class="nt">&lt;value2&gt;</span>  ..... 同时设置一个或多个 key-value对  
mget  <span class="nt">&lt;key1&gt;</span>  <span class="nt">&lt;key2&gt;</span>  <span class="nt">&lt;key3&gt;</span> .....              同时获取一个或多个 value  
msetnx <span class="nt">&lt;key1&gt;</span>  <span class="nt">&lt;value1&gt;</span>  <span class="nt">&lt;key2&gt;</span>  <span class="nt">&lt;value2&gt;</span>  .....同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。
getrange  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;起始位置&gt;</span>  <span class="nt">&lt;结束位置&gt;</span>            获得值的范围，类似java中的substring，前包，后包
setrange  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;起始位置&gt;</span>  <span class="nt">&lt;value&gt;</span> 用 <span class="nt">&lt;value&gt;</span>   覆写<span class="nt">&lt;key&gt;</span> 所储存的字符串值，从<span class="nt">&lt;起始位置&gt;</span>开始(索引从0开始)。
setex  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;过期时间&gt;</span>  <span class="nt">&lt;value&gt;</span>                 设置键值的同时，设置过期时间，单位秒。
getset <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>                           以新换旧，设置了新值同时获得旧值。
</code></pre></div>
<p>原子性</p>
<p><img alt="img" src="../Redis.assets/wps34.jpg" /></p>
<p>所谓原子操作是指不会被线程调度机制打断的操作；</p>
<p>这种操作一旦开始，就一直运行到结束，中间不会有任何 context switch （切换到另一个线程）。</p>
<p>（1）在单线程中， 能够在单条指令中完成的操作都可以认为是" 原子操作"，因为中断只能发生于指令之间。</p>
<p>（2）在多线程中，不能被其它进程（线程）打断的操作就叫原子操作。Redis单命令的原子性主要得益于Redis的单线程。</p>
<p>原子性，有一个失败则都失败</p>
<p>案例：</p>
<p>java中的i++是否是原子操作？不是</p>
<p>i=0;两个线程分别对i进行++100次,值是多少？2~200     </p>
<p><img alt="" src="Redis.assets/无标题-1601432374019.png" /></p>
<h3 id="33-redislist">3.3. Redis列表(List)<a class="headerlink" href="#33-redislist" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>单键多值</p>
</li>
<li>
<p>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。</p>
</li>
<li>
<p>它的底层实际是个双向链表，对两端的操作性能很高，通过索引下标的操作中间的节点性能会较差。</p>
</li>
</ul>
<p>size /2 &gt; 4?从尾开始:从头开始</p>
<p><img alt="img" src="../Redis.assets/wps35.jpg" /></p>
<p><code>xml
lpush/rpush  &lt;key&gt;  &lt;value1&gt;  &lt;value2&gt;  &lt;value3&gt; ....   从左边/右边插入一个或多个值。
lpop/rpop  &lt;key&gt;                                        从左边/右边吐出一个值。值在键在，值光键亡。
rpoplpush  &lt;key1&gt;  &lt;key2&gt;                               从&lt;key1&gt;列表右边吐出一个值，插到&lt;key2&gt;列表左边。
lrange &lt;key&gt; &lt;start&gt; &lt;stop&gt;                             按照索引下标获得元素(从左到右)
lrange mylist 0 -1                                      从0开始，-1表示获取所有
lindex &lt;key&gt; &lt;index&gt;                                    按照索引下标获得元素(从左到右)
llen &lt;key&gt;                                              获得列表长度 
linsert &lt;key&gt;  before &lt;value&gt;  &lt;newvalue&gt;               在&lt;value&gt;的后面插入&lt;newvalue&gt; 插入值
lrem &lt;key&gt; &lt;n&gt;  &lt;value&gt;                                 从左边删除n个value(从左到右)</code></p>
<h3 id="34-redisset">3.4. Redis集合(Set)<a class="headerlink" href="#34-redisset" title="Permanent link">&para;</a></h3>
<ul>
<li>set对外提供的功能与list类似是一个列表的功能，特殊之处在于set是可以自动排重的，当你需要存储一个列表数据，又不希望出现重复数据时，set是一个很好的选择，并且set提供了判断某个成员是否在一个set集合内的重要接口，这个也是list所不能提</li>
<li>set是string类型的无序集合。它底层其实是一个value为null的hash表，所以添加，删除，查找的复杂度都是O(1)。</li>
<li>一个算法，随着数据的增加，执行时间的长短，如果是O(1)，数据增加，查找数据的时间不变</li>
</ul>
<div class="highlight"><pre><span></span><code>sadd <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value1&gt;</span>  <span class="nt">&lt;value2&gt;</span> ..... 将一个或多个 member 元素加入到集合 key 中，已经存在的 member 元素将被忽略
smembers <span class="nt">&lt;key&gt;</span>                       取出该集合的所有值。
sismember <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>             判断集合<span class="nt">&lt;key&gt;</span>是否为含有该<span class="nt">&lt;value&gt;</span>值，有1，没有0 
scard <span class="nt">&lt;key&gt;</span>                          返回该集合的元素个数。
srem <span class="nt">&lt;key&gt;</span> <span class="nt">&lt;value1&gt;</span> <span class="nt">&lt;value2&gt;</span> ....    删除集合中的某个元素。
spop <span class="nt">&lt;key&gt;</span>                           随机从该集合中吐出一个值。
srandmember <span class="nt">&lt;key&gt;</span> <span class="nt">&lt;n&gt;</span>                随机从该集合中取出n个值。不会从集合中删除 。
sinter <span class="nt">&lt;key1&gt;</span> <span class="nt">&lt;key2&gt;</span>                 返回两个集合的交集元素。
sunio <span class="nt">&lt;key1&gt;</span> <span class="nt">&lt;key2&gt;</span>                  返回两个集合的并集元素。
sdiff <span class="nt">&lt;key1&gt;</span> <span class="nt">&lt;key2&gt;</span>                  返回两个集合的差集元素(key1中的，不包含key2中的)
</code></pre></div>
<h3 id="35-redishash">3.5. Redis哈希(Hash)<a class="headerlink" href="#35-redishash" title="Permanent link">&para;</a></h3>
<ul>
<li>hash 是一个键值对集合。</li>
<li>hash是一个string类型的field和value的映射表，hash特别适合用于存储对象。</li>
<li>类似Java里面的Map<String,Map\<K,V>></li>
<li>用户ID为查找的key，存储的value用户对象包含姓名，年龄，生日等信息，如果用普通的key/value结构来存储</li>
</ul>
<table>
<thead>
<tr>
<th><img alt="img" src="../Redis.assets/wps36.jpg" />每次修改用户的某个属性需要，先反序列化改好后再序列化回去。开销较大。</th>
<th><img alt="img" src="../Redis.assets/wps37.jpg" />用户ID数据冗余</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="img" src="../Redis.assets/wps38.jpg" /></td>
<td>通过 key(用户ID) + field(属性标签) 就可以操作对应属性数据了，既不需要重复存储数据，也不会带来序列化和并发修改控制的问题</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>hset <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;field&gt;</span>  <span class="nt">&lt;value&gt;</span>                           给<span class="nt">&lt;key&gt;</span>集合中的  <span class="nt">&lt;field&gt;</span>键赋值<span class="nt">&lt;value&gt;</span>
hget <span class="nt">&lt;key1&gt;</span>  <span class="nt">&lt;field&gt;</span>                                   从<span class="nt">&lt;key1&gt;</span>集合<span class="nt">&lt;field&gt;</span> 取出 value 
hmset <span class="nt">&lt;key1&gt;</span>  <span class="nt">&lt;field1&gt;</span> <span class="nt">&lt;value1&gt;</span> <span class="nt">&lt;field2&gt;</span> <span class="nt">&lt;value2&gt;</span>...   批量设置hash的值
hexists <span class="nt">&lt;key1&gt;</span>  <span class="nt">&lt;field&gt;</span>                                查看哈希表 key 中，给定域 field 是否存在。 
hkeys <span class="nt">&lt;key&gt;</span>                                            列出该hash集合的所有field
hvals <span class="nt">&lt;key&gt;</span>                                            列出该hash集合的所有value
hincrby <span class="nt">&lt;key&gt;</span> <span class="nt">&lt;field&gt;</span>  <span class="nt">&lt;increment&gt;</span>                     为哈希表 key 中的域 field 的值加上增量 1  -1 
hsetnx <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;field&gt;</span> <span class="nt">&lt;value&gt;</span>                          将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在
</code></pre></div>
<h3 id="36-rediszsetsorted-set">3.6. Redis有序集合Zset(sorted set)<a class="headerlink" href="#36-rediszsetsorted-set" title="Permanent link">&para;</a></h3>
<ul>
<li>zset与普通集合set非常相似，是一个没有重复元素的字符串集合。</li>
<li>不同之处是有序集合的每个成员都关联了一个评分（score）,这个评分（score）被用来按照从最低分到最高分的方式排序集合中的成员。</li>
<li>集合的成员是唯一的，但是评分可以是重复了 。</li>
<li>因为元素是有序的, 所以你也可以很快的根据评分（score）或者次序（position）来获取一个范围的元素。</li>
<li>访问有序集合的中间元素也是非常快的,因此你能够使用有序集合作为一个没有重复成员的智能列表。</li>
</ul>
<div class="highlight"><pre><span></span><code>zadd  <span class="nt">&lt;key&gt;</span> <span class="nt">&lt;score1&gt;</span> <span class="nt">&lt;value1&gt;</span>  <span class="nt">&lt;score2&gt;</span> <span class="nt">&lt;value2&gt;</span>......     将一个或多个member元素及其score值加入到有序集key当中。
zrange <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;start&gt;</span> <span class="nt">&lt;stop&gt;</span>  [WITHSCORES]  返回有序集key中，下标在<span class="nt">&lt;start&gt;&lt;stop&gt;</span>之间的元素,并进行升序排列,带WITHSCORES，可以让分数一起和值返回到结果集。
zrangebyscore <span class="nt">&lt;key&gt;</span> min max [withscores] [limit offset count]   返回有序集key中，所有score值介于min和max之间(包括等于 min 或 max )的成员。有序集成员按 score 值递增(从小到大)次序排列。 
zrevrangebyscore <span class="nt">&lt;key&gt;</span> max min [withscores] [limit offset count] 同上,带有分页
zincrby <span class="nt">&lt;key&gt;</span> <span class="nt">&lt;increment&gt;</span> <span class="nt">&lt;value&gt;</span>    为元素的score加上增量
zrem  <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>                 删除该集合下，指定值的元素 
zcount <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;min&gt;</span>  <span class="nt">&lt;max&gt;</span>          统计该集合，分数区间内的元素个数 
zrank <span class="nt">&lt;key&gt;</span>  <span class="nt">&lt;value&gt;</span>                 返回该值在集合中的排名，从0开始。
</code></pre></div>
<p>如何利用zset实现一个文章访问量的排行榜？</p>
<p>案例：</p>
<p><img alt="img" src="../Redis.assets/wps39.jpg" /></p>
<h2 id="4-redis">4. Redis配置文件介绍<a class="headerlink" href="#4-redis" title="Permanent link">&para;</a></h2>
<p>自定义目录：/myredis/redis.conf</p>
<h3 id="41-units">4.1. ###Units单位###<a class="headerlink" href="#41-units" title="Permanent link">&para;</a></h3>
<p>配置大小单位,开头定义了一些基本的度量单位，只支持bytes，不支持bit</p>
<p>大小写不敏感</p>
<p><img alt="img" src="../Redis.assets/wps40.jpg" /></p>
<h3 id="42-includes">4.2. ###INCLUDES包含<a class="headerlink" href="#42-includes" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps41.jpg" /></p>
<p>类似jsp中的include，多实例的情况可以把公用的配置文件提取出来</p>
<h3 id="43">4.3. ###网络相关配置<a class="headerlink" href="#43" title="Permanent link">&para;</a></h3>
<h3 id="431-bind">4.3.1. bind<a class="headerlink" href="#431-bind" title="Permanent link">&para;</a></h3>
<p>默认情况bind=127.0.0.1只能接受本机的访问请求</p>
<p>不写的情况下，无限制接受任何ip地址的访问</p>
<p>生产环境肯定要写你应用服务器的地址；服务器是需要远程访问的，所以需要将其注释掉</p>
<p>如果开启了protected-mode，那么在没有设定bind ip且没有设密码的情况下，Redis只允许接受本机的相应</p>
<p><img alt="img" src="../Redis.assets/wps42.jpg" /></p>
<p>保存配置，停止服务，重启启动查看进程，不再是本机访问了。</p>
<p><img alt="img" src="../Redis.assets/wps43.jpg" /></p>
<h3 id="432-protected-mode">4.3.2. protected-mode<a class="headerlink" href="#432-protected-mode" title="Permanent link">&para;</a></h3>
<p>将本机访问保护模式设置no</p>
<p><img alt="img" src="../Redis.assets/wps44.jpg" /></p>
<h3 id="433-port">4.3.3. Port<a class="headerlink" href="#433-port" title="Permanent link">&para;</a></h3>
<p>端口号，默认 6379</p>
<p><img alt="img" src="../Redis.assets/wps45.jpg" /></p>
<h3 id="434-tcp-backlog">4.3.4. tcp-backlog<a class="headerlink" href="#434-tcp-backlog" title="Permanent link">&para;</a></h3>
<p>设置tcp的backlog，backlog其实是一个连接队列，backlog队列总和=未完成三次握手队列 + 已经完成三次握手队列。</p>
<p>在高并发环境下你需要一个高backlog值来避免慢客户端连接问题。</p>
<p>注意Linux内核会将这个值减小到/proc/sys/net/core/somaxconn的值(128),所以需要确认增大/proc/sys/net/core/somaxconn和/proc/sys/net/ipv4/tcp_max_syn_backlog(128) 两个值来达到想要的效果</p>
<p><img alt="img" src="../Redis.assets/wps46.jpg" /></p>
<h3 id="435-timeout">4.3.5. timeout<a class="headerlink" href="#435-timeout" title="Permanent link">&para;</a></h3>
<p>一个空闲的客户端维持多少秒会关闭，0表示关闭该功能。即永不关闭。</p>
<p><img alt="img" src="../Redis.assets/wps47.jpg" /></p>
<h3 id="436-tcp-keepalive">4.3.6. tcp-keepalive<a class="headerlink" href="#436-tcp-keepalive" title="Permanent link">&para;</a></h3>
<p>对访问客户端的一种心跳检测，每个n秒检测一次。</p>
<p>单位为秒，如果设置为0，则不会进行Keepalive检测，建议设置成60 </p>
<p><img alt="img" src="../Redis.assets/wps48.jpg" /></p>
<h3 id="44-general">4.4. ###GENERAL通用<a class="headerlink" href="#44-general" title="Permanent link">&para;</a></h3>
<h3 id="441-daemonize">4.4.1. daemonize<a class="headerlink" href="#441-daemonize" title="Permanent link">&para;</a></h3>
<p>是否为后台进程，设置为yes</p>
<p>守护进程，后台启动</p>
<p><img alt="img" src="../Redis.assets/wps49.jpg" /></p>
<h3 id="442-pidfile">4.4.2. pidfile<a class="headerlink" href="#442-pidfile" title="Permanent link">&para;</a></h3>
<p>存放pid文件的位置，每个实例会产生一个不同的pid文件</p>
<p><img alt="img" src="../Redis.assets/wps50.jpg" /></p>
<h3 id="443-logleve">4.4.3. logleve<a class="headerlink" href="#443-logleve" title="Permanent link">&para;</a></h3>
<p>指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为notice</p>
<p>四个级别根据使用阶段来选择，生产环境选择notice 或者warning</p>
<p><img alt="img" src="../Redis.assets/wps51.jpg" /></p>
<h3 id="444-logfile">4.4.4. logfile<a class="headerlink" href="#444-logfile" title="Permanent link">&para;</a></h3>
<p>日志文件名称</p>
<p><img alt="img" src="../Redis.assets/wps52.jpg" /></p>
<h3 id="445-databases-16">4.4.5. databases 16<a class="headerlink" href="#445-databases-16" title="Permanent link">&para;</a></h3>
<p>设定库的数量 默认16，默认数据库为0，可以使用SELECT <dbid>命令在连接上指定数据库id</p>
<p><img alt="img" src="../Redis.assets/wps53.jpg" /></p>
<h3 id="45-security">4.5. ###SECURITY安全<a class="headerlink" href="#45-security" title="Permanent link">&para;</a></h3>
<h3 id="451">4.5.1. 设置密码<a class="headerlink" href="#451" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps54.jpg" /></p>
<p>访问密码的查看、设置和取消</p>
<p>在命令中设置密码，只是临时的。重启redis服务器，密码就还原了。</p>
<p>永久设置，需要在配置文件中进行设置。</p>
<p><img alt="img" src="../Redis.assets/wps55.jpg" /></p>
<h3 id="46-limits">4.6. #### Limits限制<a class="headerlink" href="#46-limits" title="Permanent link">&para;</a></h3>
<h3 id="461-maxclients">4.6.1. maxclients<a class="headerlink" href="#461-maxclients" title="Permanent link">&para;</a></h3>
<p>设置redis同时可以与多少个客户端进行连接。</p>
<p>默认情况下为10000个客户端。</p>
<p>如果达到了此限制，redis则会拒绝新的连接请求，并且向这些连接请求方发出“max number of clients reached”以作回应。</p>
<p><img alt="img" src="../Redis.assets/wps56.jpg" /></p>
<h3 id="462-maxmemory">4.6.2. maxmemory<a class="headerlink" href="#462-maxmemory" title="Permanent link">&para;</a></h3>
<ul>
<li>建议必须设置，否则，将内存占满，造成服务器宕机。</li>
<li>设置redis可以使用的内存量。一旦到达内存使用上限，redis将会试图移除内部数据，移除规则可以通过maxmemory-policy来指定。</li>
<li>如果redis无法根据移除规则来移除内存中的数据，或者设置了“不允许移除”，那么redis则会针对那些需要申请内存的指令返回错误信息，比如SET、LPUSH等。但是对于无内存申请的指令，仍然会正常响应，比如GET等。</li>
<li>如果你的redis是主redis（说明你的redis有从redis），那么在设置内存使用上限时，需要在系统中留出一些内存空间给同步队列缓存，只有在你设置的是“不移除”的情况下，才不用考虑这个因素。</li>
</ul>
<p><img alt="img" src="../Redis.assets/wps57.jpg" /></p>
<h3 id="463-maxmemory-policy">4.6.3. maxmemory-policy<a class="headerlink" href="#463-maxmemory-policy" title="Permanent link">&para;</a></h3>
<ul>
<li>volatile-lru：使用LRU算法移除key，只对设置了过期时间的键；（最近最少使用）</li>
<li>allkeys-lru：在所有集合key中，使用LRU算法移除key</li>
<li>volatile-random：在过期集合中移除随机的key，只对设置了过期时间的键</li>
<li>allkeys-random：在所有集合key中，移除随机的key</li>
<li>volatile-ttl：移除那些TTL值最小的key，即那些最近要过期的key</li>
<li>noeviction：不进行移除。针对写操作，只是返回错误信息</li>
</ul>
<p><img alt="img" src="../Redis.assets/wps58.jpg" /></p>
<h3 id="464-maxmemory-samples">4.6.4. maxmemory-samples<a class="headerlink" href="#464-maxmemory-samples" title="Permanent link">&para;</a></h3>
<p>设置样本数量，LRU算法和最小TTL算法都并非是精确的算法，而是估算值，所以你可以设置样本的大小，redis默认会检查这么多个key并选择其中LRU的那个。</p>
<p>一般设置3到7的数字，数值越小样本越不准确，但性能消耗越小。</p>
<p><img alt="img" src="../Redis.assets/wps59.jpg" /></p>
<h2 id="5-redis_jedis_">5. Redis_Jedis_测试<a class="headerlink" href="#5-redis_jedis_" title="Permanent link">&para;</a></h2>
<h3 id="51-jedisjar">5.1. Jedis所需要的jar包<a class="headerlink" href="#51-jedisjar" title="Permanent link">&para;</a></h3>
<p>commons-pool2-2.4.2.jar</p>
<p>jedis-2.8.1.jar</p>
<h3 id="52-redis">5.2. 连接Redis注意事项<a class="headerlink" href="#52-redis" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">//禁用Linux的防火墙：Linux(CentOS7)里执行命令</span>
    <span class="n">systemct</span> <span class="n">stop</span><span class="o">/</span><span class="n">disable</span> <span class="n">firewalld</span><span class="p">.</span><span class="na">service</span>  
<span class="c1">//redis.conf中注释掉</span>
    <span class="n">bind</span> <span class="mf">127.0.0.1</span> <span class="p">;</span> <span class="kd">protected</span><span class="o">-</span><span class="n">mode</span> <span class="n">no</span>
<span class="c1">//添加指定需要开放的端口： </span>
    <span class="n">firewall</span><span class="o">-</span><span class="n">cmd</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="o">/</span><span class="n">tcp</span> <span class="o">--</span><span class="n">permanent</span> 
<span class="c1">//重载入添加的端口： </span>
    <span class="n">firewall</span><span class="o">-</span><span class="n">cmd</span> <span class="o">--</span><span class="n">reload</span>
</code></pre></div>
<h3 id="53-jedis">5.3. Jedis常用操作<a class="headerlink" href="#53-jedis" title="Permanent link">&para;</a></h3>
<h3 id="531-web">5.3.1. 创建动态的web工程<a class="headerlink" href="#531-web" title="Permanent link">&para;</a></h3>
<p><img alt="image-20200912100834074" src="../Redis.assets/image-20200912100834074.png" /></p>
<h3 id="532">5.3.2. 创建测试程序<a class="headerlink" href="#532" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testConn</span><span class="p">(){</span>
    <span class="c1">//ip,port</span>
    <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;192.168.153.131&quot;</span><span class="p">,</span><span class="mi">6379</span><span class="p">);</span>
    <span class="c1">//测试连接</span>
    <span class="n">String</span> <span class="n">pong</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">ping</span><span class="p">();</span>
    <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">pong</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="54">5.4. 测试相关数据类型<a class="headerlink" href="#54" title="Permanent link">&para;</a></h3>
<h3 id="541-jedis-api-key">5.4.1. Jedis-API:   Key<a class="headerlink" href="#541-jedis-api-key" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testKey</span><span class="p">(){</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;k1&quot;</span><span class="p">,</span> <span class="s">&quot;v1&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;k2&quot;</span><span class="p">,</span> <span class="s">&quot;v2&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;k3&quot;</span><span class="p">,</span> <span class="s">&quot;v3&quot;</span><span class="p">);</span>
    <span class="c1">//所有key</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">keys</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">keys</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">key</span> <span class="p">:</span> <span class="n">keys</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">exists</span><span class="p">(</span><span class="s">&quot;k1&quot;</span><span class="p">));</span>
    <span class="c1">//-1:永远不过期    -2:过期</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">ttl</span><span class="p">(</span><span class="s">&quot;k1&quot;</span><span class="p">));</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;k1&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="542-jedis-api-string">5.4.2. Jedis-API:   String<a class="headerlink" href="#542-jedis-api-string" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testString</span><span class="p">(){</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">mset</span><span class="p">(</span><span class="s">&quot;str1&quot;</span><span class="p">,</span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="s">&quot;str2&quot;</span><span class="p">,</span><span class="s">&quot;v2&quot;</span><span class="p">,</span><span class="s">&quot;str3&quot;</span><span class="p">,</span><span class="s">&quot;v3&quot;</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">mget</span><span class="p">(</span><span class="s">&quot;str1&quot;</span><span class="p">,</span><span class="s">&quot;str2&quot;</span><span class="p">,</span><span class="s">&quot;str3&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="543-jedis-api-list">5.4.3. Jedis-API:   List<a class="headerlink" href="#543-jedis-api-list" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testList</span><span class="p">(){</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">lpush</span><span class="p">(</span><span class="s">&quot;mylist&quot;</span><span class="p">,</span>  <span class="s">&quot;z3&quot;</span><span class="p">,</span><span class="s">&quot;l4&quot;</span><span class="p">,</span><span class="s">&quot;z6&quot;</span><span class="p">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">lrange</span><span class="p">(</span><span class="s">&quot;mylist&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">element</span> <span class="p">:</span> <span class="n">list</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">element</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="544-jedis-api-set">5.4.4. Jedis-API:   set<a class="headerlink" href="#544-jedis-api-set" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSet</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">,</span> <span class="s">&quot;order01&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">,</span> <span class="s">&quot;order02&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">,</span> <span class="s">&quot;order03&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">,</span> <span class="s">&quot;order04&quot;</span><span class="p">);</span>
    <span class="c1">//获取所有的value</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">smembers</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">smembers</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">order</span> <span class="p">:</span> <span class="n">smembers</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//删除</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">srem</span><span class="p">(</span><span class="s">&quot;orders&quot;</span><span class="p">,</span> <span class="s">&quot;order02&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="545-jedis-api-hash">5.4.5. Jedis-API:   hash<a class="headerlink" href="#545-jedis-api-hash" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testHash</span><span class="p">(){</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">hset</span><span class="p">(</span><span class="s">&quot;hash1&quot;</span><span class="p">,</span><span class="s">&quot;userName&quot;</span><span class="p">,</span><span class="s">&quot;lisi&quot;</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">hget</span><span class="p">(</span><span class="s">&quot;hash1&quot;</span><span class="p">,</span><span class="s">&quot;userName&quot;</span><span class="p">));</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;telphone&quot;</span><span class="p">,</span><span class="s">&quot;13810169999&quot;</span><span class="p">);</span>
    <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;address&quot;</span><span class="p">,</span><span class="s">&quot;atguigu&quot;</span><span class="p">);</span>
    <span class="n">map</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span><span class="s">&quot;abc@163.com&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">hmset</span><span class="p">(</span><span class="s">&quot;hash2&quot;</span><span class="p">,</span><span class="n">map</span><span class="p">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">hmget</span><span class="p">(</span><span class="s">&quot;hash2&quot;</span><span class="p">,</span> <span class="s">&quot;telphone&quot;</span><span class="p">,</span><span class="s">&quot;email&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">element</span> <span class="p">:</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">element</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="546-jedis-api-zset">5.4.6. Jedis-API:   zset<a class="headerlink" href="#546-jedis-api-zset" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testZset</span><span class="p">(){</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">zadd</span><span class="p">(</span><span class="s">&quot;zset01&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="n">d</span><span class="p">,</span> <span class="s">&quot;z3&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">zadd</span><span class="p">(</span><span class="s">&quot;zset01&quot;</span><span class="p">,</span> <span class="mi">90</span><span class="n">d</span><span class="p">,</span> <span class="s">&quot;l4&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">zadd</span><span class="p">(</span><span class="s">&quot;zset01&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="n">d</span><span class="p">,</span> <span class="s">&quot;w5&quot;</span><span class="p">);</span>
    <span class="n">jedis</span><span class="p">.</span><span class="na">zadd</span><span class="p">(</span><span class="s">&quot;zset01&quot;</span><span class="p">,</span> <span class="mi">70</span><span class="n">d</span><span class="p">,</span> <span class="s">&quot;z6&quot;</span><span class="p">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">zrange</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">zrange</span><span class="p">(</span><span class="s">&quot;zset01&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">e</span> <span class="p">:</span> <span class="n">zrange</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="55">5.5 手机验证码案例<a class="headerlink" href="#55" title="Permanent link">&para;</a></h3>
<p><img alt="" src="Redis.assets/无标题.png" /></p>
<ol>
<li>index.jsp</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">&lt;%@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">&quot;java&quot;</span> <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span>
         <span class="n">pageEncoding</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="k">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=ISO-8859-1&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Insert title here<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;script</span>  <span class="na">src=</span><span class="s">&quot;${pageContext.request.contextPath}/static/jquery/jquery-3.1.0.js&quot;</span> <span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;${pageContext.request.contextPath}/static/bs/css/bootstrap.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;script</span>  <span class="na">src=</span><span class="s">&quot;${pageContext.request.contextPath}/static/bs/js/bootstrap.min.js&quot;</span>   <span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;alertdiv&quot;</span> <span class="na">class=</span><span class="s">&quot;col-md-12&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">&quot;navbar-form navbar-left&quot;</span> <span class="na">role=</span><span class="s">&quot;search&quot;</span> <span class="na">id=</span><span class="s">&quot;codeform&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;填写手机号&quot;</span> <span class="na">name=</span><span class="s">&quot;phone_no&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">id=</span><span class="s">&quot;sendCode&quot;</span><span class="nt">&gt;</span>发送验证码<span class="nt">&lt;/button&gt;&lt;br&gt;</span>
          <span class="nt">&lt;font</span> <span class="na">id=</span><span class="s">&quot;countdown&quot;</span> <span class="na">color=</span><span class="s">&quot;red&quot;</span> <span class="nt">&gt;&lt;/font&gt;</span>
          <span class="nt">&lt;br&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;填写验证码&quot;</span> <span class="na">name=</span><span class="s">&quot;verify_code&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">id=</span><span class="s">&quot;verifyCode&quot;</span><span class="nt">&gt;</span>确定<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;font</span> <span class="na">id=</span><span class="s">&quot;result&quot;</span> <span class="na">color=</span><span class="s">&quot;green&quot;</span> <span class="nt">&gt;&lt;/font&gt;&lt;font</span> <span class="na">id=</span><span class="s">&quot;error&quot;</span> <span class="na">color=</span><span class="s">&quot;red&quot;</span> <span class="nt">&gt;&lt;/font&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  var t=120;//设定倒计时的时间
  var interval;
  function refer(){
    $(&quot;#countdown&quot;).text(&quot;请于&quot;+t+&quot;秒内填写验证码 &quot;); // 显示倒计时
    t--; // 计数器递减
    if(t<span class="err">&lt;</span>=0){
      clearInterval(interval);
      $(&quot;#countdown&quot;).text(&quot;验证码已失效，请重新发送！ &quot;);
    }
  }
  $(function(){
    $(&quot;#sendCode&quot;).click( function () {
      $.post(&quot;${pageContext.request.contextPath}/CodeSenderServlet&quot;,$(&quot;#codeform&quot;).serialize(),function(data){
        if(data==&quot;true&quot;){
          t=120;
          clearInterval(interval);
          interval= setInterval(&quot;refer()&quot;,1000);//启动1秒定时
        }else if (data==&quot;limit&quot;){
          clearInterval(interval);
          $(&quot;#countdown&quot;).text(&quot;单日发送超过次数！ &quot;)
        }
      });
    });

    $(&quot;#verifyCode&quot;).click( function () {
      $.post(&quot;${pageContext.request.contextPath}/CodeVerifyServlet&quot;,$(&quot;#codeform&quot;).serialize(),function(data){
        if(data==&quot;true&quot;){
          $(&quot;#result&quot;).attr(&quot;color&quot;,&quot;green&quot;);
          $(&quot;#result&quot;).text(&quot;验证成功&quot;);
          clearInterval(interval);
          $(&quot;#countdown&quot;).text(&quot;&quot;)
        }else{
          $(&quot;#result&quot;).attr(&quot;color&quot;,&quot;red&quot;);
          $(&quot;#result&quot;).text(&quot;验证失败&quot;);
        }
      });
    });
  });
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>2.CodeSenderServlet</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.web</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.atguigu.utils.VerifyCodeConfig</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.Jedis</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.annotation.WebServlet</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CodeSenderServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="p">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="c1">//得到手机号</span>
        <span class="n">String</span> <span class="n">phoneNo</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&quot;phone_no&quot;</span><span class="p">);</span>
        <span class="c1">//验空</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">==</span> <span class="n">phoneNo</span> <span class="o">&amp;&amp;</span> <span class="n">phoneNo</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//连接redis</span>
        <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jedis</span><span class="p">(</span><span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">HOST</span><span class="p">,</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PORT</span><span class="p">);</span>
        <span class="c1">//得到发送验证码次数</span>
        <span class="c1">//次数key</span>
        <span class="n">String</span> <span class="n">countKey</span> <span class="o">=</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PHONE_PREFIX</span> <span class="o">+</span> <span class="n">phoneNo</span> <span class="o">+</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">COUNT_SUFFIX</span><span class="p">;</span>
        <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">countKey</span><span class="o">+</span><span class="s">&quot;=============&quot;</span><span class="p">);</span>
        <span class="n">String</span> <span class="n">count</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">countKey</span><span class="p">);</span>
        <span class="c1">//判断次数</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//第一次发送,记录一天存储三次</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">setex</span><span class="p">(</span><span class="n">countKey</span><span class="p">,</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">SECONDS_PER_DAY</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//小于3次是,次数++</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">incr</span><span class="p">(</span><span class="n">countKey</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//写会limit</span>
            <span class="n">response</span><span class="p">.</span><span class="na">getWriter</span><span class="p">().</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;limit&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//发送验证码===存储验证码</span>
        <span class="n">String</span> <span class="n">code</span> <span class="o">=</span> <span class="n">getCode</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
        <span class="c1">//拼接验证码key</span>
        <span class="n">String</span> <span class="n">codeKey</span> <span class="o">=</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PHONE_PREFIX</span> <span class="o">+</span> <span class="n">phoneNo</span> <span class="o">+</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PHONE_SUFFIX</span><span class="p">;</span>
        <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">codeKey</span><span class="o">+</span><span class="s">&quot;===============&quot;</span><span class="p">);</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">setex</span><span class="p">(</span><span class="n">codeKey</span><span class="p">,</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">CODE_TIMEOUT</span><span class="p">,</span> <span class="n">code</span><span class="p">);</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
        <span class="c1">//写会响应</span>
        <span class="n">response</span><span class="p">.</span><span class="na">getWriter</span><span class="p">().</span><span class="na">print</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//得到验证码</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="nf">getCode</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">code</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Integer</span> <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
            <span class="n">code</span> <span class="o">+=</span> <span class="n">num</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="n">doPost</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>3.CodeVerifyServlet</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu.web</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.atguigu.utils.VerifyCodeConfig</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.Jedis</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.annotation.WebServlet</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CodeVerifyServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="p">{</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="c1">//获取验证码与手机号</span>
        <span class="n">String</span> <span class="n">phoneNo</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&quot;phone_no&quot;</span><span class="p">);</span>
        <span class="n">String</span> <span class="n">verifyCode</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&quot;verify_code&quot;</span><span class="p">);</span>
        <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jedis</span><span class="p">(</span><span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">HOST</span><span class="p">,</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PORT</span><span class="p">);</span>
        <span class="c1">//从redis获取验证码</span>
        <span class="c1">//拼接验证码key</span>
        <span class="n">String</span> <span class="n">codeKey</span> <span class="o">=</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PHONE_PREFIX</span> <span class="o">+</span> <span class="n">phoneNo</span> <span class="o">+</span> <span class="n">VerifyCodeConfig</span><span class="p">.</span><span class="na">PHONE_SUFFIX</span><span class="p">;</span>
        <span class="n">String</span> <span class="n">code</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">codeKey</span><span class="p">);</span>
        <span class="c1">//验空</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//success</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">verifyCode</span><span class="p">)){</span>
            <span class="n">response</span><span class="p">.</span><span class="na">getWriter</span><span class="p">().</span><span class="na">print</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="c1">//关闭</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">response</span><span class="p">.</span><span class="na">getWriter</span><span class="p">().</span><span class="na">print</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
            <span class="c1">//关闭</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="n">doPost</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="n">response</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="6-redis">6. Redis事务锁机制秒杀<a class="headerlink" href="#6-redis" title="Permanent link">&para;</a></h2>
<h3 id="61-redis">6.1. Redis的事务定义<a class="headerlink" href="#61-redis" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps61.jpg" /></p>
<p>​   Redis事务是一个单独的隔离操作：事务中的所有命令都会序列化、按顺序地执行。</p>
<p>​   事务在执行的过程中，不会被其他客户端发送来的命令请求所打断。</p>
<p>​   Redis事务的主要作用就是<font style="color:red">串联多个命令</font>防止别的命令插队。</p>
<h3 id="62-multiexecdiscard">6.2. Multi、Exec、discard<a class="headerlink" href="#62-multiexecdiscard" title="Permanent link">&para;</a></h3>
<ul>
<li>从输入Multi命令开始，输入的命令都会依次进入命令队列中，但不会执行，直到输入Exec后，Redis会将之前的命令队列中的命令依次执行。</li>
<li>组队的过程中可以通过discard来放弃组队。  </li>
</ul>
<p><img alt="img" src="../Redis.assets/wps62.jpg" />组队成功，提交成功</p>
<p><img alt="img" src="../Redis.assets/wps63.jpg" />组队阶段保存，提交失败</p>
<p><img alt="img" src="../Redis.assets/wps64.jpg" />组队成功，提交有成功，有失败</p>
<h3 id="63">6.3. 事务的错误处理<a class="headerlink" href="#63" title="Permanent link">&para;</a></h3>
<p>组队中某个命令出现了<font style="color:red">报告错误(编译错误)，执行时整个的所有队列都会被取消。</font></p>
<p><img alt="img" src="../Redis.assets/wps65.jpg" /></p>
<p>如果执行阶段某个命令报出了错误，则只有报错的命令不会被执行，而其他的命令都会执行，不会回滚。</p>
<p><img alt="img" src="../Redis.assets/wps66.jpg" /></p>
<h3 id="64">6.4. 事务冲突的问题<a class="headerlink" href="#64" title="Permanent link">&para;</a></h3>
<h3 id="641">6.4.1. 例子<a class="headerlink" href="#641" title="Permanent link">&para;</a></h3>
<p>问题：双十一秒杀，多个人使用同一账户参与秒杀。</p>
<p>一个请求想给金额减8000</p>
<p>一个请求想给金额减5000</p>
<p>一个请求想给金额减1000</p>
<p><img alt="img" src="../Redis.assets/wps67.jpg" /></p>
<h3 id="642-1-">6.4.2. 解决方案1-悲观锁<a class="headerlink" href="#642-1-" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps68.jpg" /></p>
<p>​   悲观锁(Pessiminstic Lock), 顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会block直到它拿到锁。</p>
<p>​   传统的关系型数据库里边就用到了很多这种锁机制，比如行锁( select * from table where cloumn='xxx' for update;)，表锁等，读锁，写锁等，都是在做操作之前先上锁。</p>
<h3 id="643-2-">6.4.3. 解决方案2-乐观锁<a class="headerlink" href="#643-2-" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps69.jpg" /></p>
<p>​   乐观锁(Optiminstic Lock), 顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有去更新这个数据，可以使用版本号等机制。乐观锁适用于多读的应用类型，这样可以提高吞吐量。Redis就是利用这种check-and-set机制实现事务的。cas  比较并交换</p>
<p>分布式锁:</p>
<p><img alt="" src="Redis.assets/无标题-1601451726232.png" /></p>
<h3 id="644-watch-key-key">6.4.4. WATCH key [key ...]<a class="headerlink" href="#644-watch-key-key" title="Permanent link">&para;</a></h3>
<ul>
<li>在执行multi之前，先执行watch key1 [key2],可以监视一个(或多个) key </li>
<li>如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。</li>
</ul>
<p><img alt="img" src="../Redis.assets/wps70.jpg" /></p>
<h3 id="645-unwatch">6.4.5. unwatch<a class="headerlink" href="#645-unwatch" title="Permanent link">&para;</a></h3>
<ul>
<li>取消 WATCH 命令对所有 key 的监视。</li>
<li>如果在执行 WATCH 命令之后， EXEC 命令或 DISCARD 命令先被执行了的话，那么就不需要再执行 UNWATCH 了。</li>
</ul>
<p><a href="http://doc.redisfans.com/transaction/exec.html">http://doc.redisfans.com/transaction/exec.html</a></p>
<h3 id="65-redis">6.5. Redis事务三特性<a class="headerlink" href="#65-redis" title="Permanent link">&para;</a></h3>
<ul>
<li>单独的隔离操作 </li>
<li>事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所断,防止插队。 </li>
<li>没有隔离级别的概念 </li>
<li>队列中的命令没有提交之前都不会实际被执行，因为事务提交前任何指令都不会被实际执行</li>
<li>不保证原子性 </li>
<li>事务中如果有一条命令执行失败，其后的命令仍然会被执行，没有回滚 </li>
<li>事务与事务之间是队列,保证原子性</li>
<li>同一个队列(事务)中,命令与命令之间是不能保证原子性的,不同步</li>
</ul>
<h2 id="7-redis">7. Redis事务秒杀案例<a class="headerlink" href="#7-redis" title="Permanent link">&para;</a></h2>
<h3 id="71">7.1. 秒杀案例<a class="headerlink" href="#71" title="Permanent link">&para;</a></h3>
<h3 id="711">7.1.1 案例分析<a class="headerlink" href="#711" title="Permanent link">&para;</a></h3>
<h3 id="712-redis">7.1.2 redis存储秒杀库存和秒杀成功用户列表<a class="headerlink" href="#712-redis" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps71.jpg" /> </p>
<p><img alt="image-20200929202520757" src="../Redis.assets/image-20200929202520757.png" /></p>
<h3 id="713-java">7.1.3 秒杀项目java逻辑代码开发<a class="headerlink" href="#713-java" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">//实验一，存在超卖情况</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecKill_redis1</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">org</span><span class="p">.</span><span class="na">slf4j</span><span class="p">.</span><span class="na">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">SecKill_redis1</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;192.168.153.131&quot;</span><span class="p">,</span> <span class="mi">6379</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">ping</span><span class="p">());</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">doSecKill</span><span class="p">(</span><span class="n">String</span> <span class="n">uid</span><span class="p">,</span> <span class="n">String</span> <span class="n">prodid</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="c1">//1.准备存储的key</span>
        <span class="c1">//拼key</span>
        <span class="n">String</span> <span class="n">qtkey</span> <span class="o">=</span> <span class="s">&quot;sk:&quot;</span><span class="o">+</span><span class="n">prodid</span><span class="o">+</span><span class="s">&quot;:qt&quot;</span><span class="p">;</span>
        <span class="n">String</span> <span class="n">usrkey</span> <span class="o">=</span> <span class="s">&quot;sk:&quot;</span><span class="o">+</span><span class="n">prodid</span><span class="o">+</span><span class="s">&quot;:usr&quot;</span><span class="p">;</span>

        <span class="c1">//2.判断用户是否已经秒到，不能重复秒</span>
        <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;192.168.153.131&quot;</span><span class="p">,</span><span class="mi">6379</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">sismember</span><span class="p">(</span><span class="n">usrkey</span><span class="p">,</span> <span class="n">uid</span><span class="p">))</span> <span class="p">{</span>          
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;不能重复秒杀&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span> <span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//3.判断库存</span>
        <span class="n">String</span> <span class="n">qtkeystr</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">qtkey</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">qtkeystr</span><span class="o">==</span><span class="kc">null</span> <span class="o">||</span> <span class="s">&quot;&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">qtkeystr</span><span class="p">.</span><span class="na">trim</span><span class="p">()))</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;未初始化库存&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span> <span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">int</span> <span class="n">qt</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">qtkeystr</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">qt</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;已经秒光&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//4.减少库存</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">decr</span><span class="p">(</span><span class="n">qtkey</span><span class="p">);</span>

        <span class="c1">//5.加人</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="n">usrkey</span><span class="p">,</span> <span class="n">uid</span><span class="p">);</span>        
        <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;秒杀成功&quot;</span><span class="p">);</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<h3 id="72-ab">7.2. 并发模拟工具ab测试秒杀<a class="headerlink" href="#72-ab" title="Permanent link">&para;</a></h3>
<p>使用工具ab模拟测试</p>
<p>CentOS6 默认安装</p>
<p>CentOS7需要手动安装</p>
<h3 id="721-abyum-install-httpd-tools">7.2.1. 联网安装ab：yum install httpd-tools<a class="headerlink" href="#721-abyum-install-httpd-tools" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps72.jpg" /><img alt="img" src="../Redis.assets/wps73.jpg" /></p>
<p><img alt="img" src="../Redis.assets/wps74.jpg" /></p>
<h3 id="722-ab">7.2.2. 无网络安装ab<a class="headerlink" href="#722-ab" title="Permanent link">&para;</a></h3>
<ul>
<li>进入cd  /run/media/root/CentOS 7 x86_64/Packages（路径跟centos6不同）</li>
<li>顺序安装</li>
</ul>
<div class="highlight"><pre><span></span><code>rpm -ivh apr-1.4.8-3.el7.x86_64.rpm
rpm -ivh apr-util-1.5.2-6.el7.x86_64.rpm
rpm -ivh httpd-tools-2.4.6-67.el7.centos.x86_64.rpm
测试是否安装成功: ab -V
</code></pre></div>
<h3 id="723">7.2.3. 测试及结果<a class="headerlink" href="#723" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ab测试:   ab -n 请求次数 -c 并发数量 -p 文件 -T &quot;请求头&quot; url
</code></pre></div>
<p>vim postfile 模拟表单提交参数,以&amp;符号结尾;存放当前目录。</p>
<p>内容：prodid=0101&amp;</p>
<div class="highlight"><pre><span></span><code>ab -n 1000 -c 200 -p /opt/profile -T &quot;application/x-www-form-urlencoded&quot; http://192.168.1.106:8080/secondkill/doseckill
</code></pre></div>
<p><img alt="img" src="../Redis.assets/wps75.jpg" /><img alt="img" src="../Redis.assets/wps76.jpg" /></p>
<h4 id="7233">7.2.3.3. 超卖<a class="headerlink" href="#7233" title="Permanent link">&para;</a></h4>
<p>更改数据显示超卖问题</p>
<p>手动将库存设置成10</p>
<p>set sk:0101:qt 10</p>
<p>ab -n 1000 -c 200 -r -p /opt/postfile -T "application/x-www-form-urlencoded" <a href="http://192.168.1.106:8080/secondkill/doseckill">http://192.168.1.106:8080/secondkill/doseckill</a></p>
<p><img alt="img" src="../Redis.assets/wps77.jpg" /></p>
<p><img alt="image-20200922093946365" src="../Redis.assets/image-20200922093946365.png" /></p>
<h3 id="73">7.3. 超卖问题<a class="headerlink" href="#73" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps79.jpg" /></p>
<h3 id="74">7.4. 利用乐观锁淘汰用户，解决超卖问题。<a class="headerlink" href="#74" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps80.jpg" /></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecKill_redis2</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">org</span><span class="p">.</span><span class="na">slf4j</span><span class="p">.</span><span class="na">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">SecKill_redis2</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">doSecKill</span><span class="p">(</span><span class="n">String</span> <span class="n">uid</span><span class="p">,</span> <span class="n">String</span> <span class="n">prodid</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="p">{</span>

        <span class="c1">//1.准备存储的key</span>
        <span class="c1">//拼key</span>
        <span class="n">String</span> <span class="n">qtkey</span> <span class="o">=</span> <span class="s">&quot;sk:&quot;</span><span class="o">+</span><span class="n">prodid</span><span class="o">+</span><span class="s">&quot;:qt&quot;</span><span class="p">;</span>
        <span class="n">String</span> <span class="n">usrkey</span> <span class="o">=</span> <span class="s">&quot;sk:&quot;</span><span class="o">+</span><span class="n">prodid</span><span class="o">+</span><span class="s">&quot;:usr&quot;</span><span class="p">;</span>

        <span class="c1">//2.判断用户是否已经秒到，不能重复秒</span>
        <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;192.168.153.131&quot;</span><span class="p">,</span><span class="mi">6379</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">sismember</span><span class="p">(</span><span class="n">usrkey</span><span class="p">,</span> <span class="n">uid</span><span class="p">))</span> <span class="p">{</span>          
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;不能重复秒杀&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span> <span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//增加乐观锁</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">watch</span><span class="p">(</span><span class="n">qtkey</span><span class="p">);</span>

        <span class="c1">//3.判断库存</span>
        <span class="n">String</span> <span class="n">qtkeystr</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">qtkey</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">qtkeystr</span><span class="o">==</span><span class="kc">null</span> <span class="o">||</span> <span class="s">&quot;&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">qtkeystr</span><span class="p">.</span><span class="na">trim</span><span class="p">()))</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;未初始化库存&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span> <span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">int</span> <span class="n">qt</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">qtkeystr</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">qt</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;已经秒光&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//增加事务</span>
        <span class="n">Transaction</span> <span class="n">multi</span> <span class="o">=</span> <span class="n">jedis</span><span class="p">.</span><span class="na">multi</span><span class="p">();</span>

        <span class="c1">//4.减少库存</span>
        <span class="n">multi</span><span class="p">.</span><span class="na">decr</span><span class="p">(</span><span class="n">qtkey</span><span class="p">);</span>

        <span class="c1">//5.加人</span>
        <span class="n">multi</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="n">usrkey</span><span class="p">,</span> <span class="n">uid</span><span class="p">);</span>

        <span class="c1">//执行事务</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">multi</span><span class="p">.</span><span class="na">exec</span><span class="p">();</span>

        <span class="c1">//判断事务提交是否失败</span>
        <span class="k">if</span><span class="p">(</span><span class="n">list</span><span class="o">==</span><span class="kc">null</span> <span class="o">||</span> <span class="n">list</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;秒杀失败&quot;</span><span class="p">);</span>
            <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;秒杀成功&quot;</span><span class="p">);</span>
        <span class="n">jedis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><img alt="img" src="../Redis.assets/wps81.jpg" /><img alt="img" src="../Redis.assets/wps82.jpg" /></p>
<h3 id="75">7.5. 继续增加并发测试<a class="headerlink" href="#75" title="Permanent link">&para;</a></h3>
<h3 id="751">7.5.1. 连接有限制<a class="headerlink" href="#751" title="Permanent link">&para;</a></h3>
<p>ab -n 2000 -c 200 -p /opt/profile -T "application/x-www-form-urlencoded" <a href="http://192.168.1.106:8080/secondkill/doseckill">http://192.168.1.106:8080/secondkill/doseckill</a></p>
<p><img alt="img" src="../Redis.assets/wps83.jpg" /></p>
<p>增加-r参数，-r  Don't exit o socket receive errors.</p>
<p>ab -n 2000 -c 200 -r -p /opt/profile  -T "application/x-www-form-urlencoded" <a href="http://192.168.1.106:8080/secondkill/doseckill">http://192.168.1.106:8080/secondkill/doseckill</a></p>
<h3 id="752">7.5.2. 已经秒光，可是还有库存<a class="headerlink" href="#752" title="Permanent link">&para;</a></h3>
<p>手动将库存设置成100</p>
<p>set sk:0101:qt 100</p>
<p>ab -n 1000 -c 200 -r -p /opt/profile -T "application/x-www-form-urlencoded" <a href="http://192.168.1.106:8080/secondkill/doseckill">http://192.168.1.106:8080/secondkill/doseckill</a></p>
<p>已经秒光，可是还有库存。原因，就是乐观锁导致很多请求都失败。先点的没秒到，后点的可能秒到了。</p>
<p><img alt="image-20200922094707498" src="../Redis.assets/image-20200922094707498.png" /></p>
<h3 id="753">7.5.3. 连接超时，通过连接池解决<a class="headerlink" href="#753" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps85.jpg" /></p>
<h3 id="754">7.5.4. 连接池<a class="headerlink" href="#754" title="Permanent link">&para;</a></h3>
<p>节省每次连接redis服务带来的消耗，把连接好的实例反复利用。</p>
<p>通过参数管理连接的行为</p>
<p>代码见项目中</p>
<p>链接池参数</p>
<p>MaxTotal：控制一个pool可分配多少个jedis实例，通过pool.getResource()来获取；如果赋值为-1，则表示不限制；</p>
<p>如果pool已经分配了MaxTotal个jedis实例，则此时pool的状态为exhausted。</p>
<p>maxIdle：控制一个pool最多有多少个状态为idle(空闲)的jedis实例；</p>
<p>MaxWaitminllis：表示当borrow一个jedis实例时，最大的等待毫秒数，如果超过等待时间，则直接抛JedisConnectionException；</p>
<p>testOnBorrow：获得一个jedis实例的时候是否检查连接可用性（ping()）；如果为true，则得到的jedis实例均是可用的；</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.atguigu</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">redis.clients.jedis.Jedis</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.JedisPool</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.JedisPoolConfig</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JedisPoolUtil</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="n">JedisPool</span> <span class="n">jedisPool</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="kd">private</span> <span class="nf">JedisPoolUtil</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">JedisPool</span> <span class="nf">getJedisPoolInstance</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">==</span> <span class="n">jedisPool</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">synchronized</span> <span class="p">(</span><span class="n">JedisPoolUtil</span><span class="p">.</span><span class="na">class</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">==</span> <span class="n">jedisPool</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">JedisPoolConfig</span> <span class="n">poolConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JedisPoolConfig</span><span class="p">();</span>
                    <span class="n">poolConfig</span><span class="p">.</span><span class="na">setMaxTotal</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
                    <span class="n">poolConfig</span><span class="p">.</span><span class="na">setMaxIdle</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
                    <span class="n">poolConfig</span><span class="p">.</span><span class="na">setMaxWaitMillis</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
                    <span class="n">poolConfig</span><span class="p">.</span><span class="na">setBlockWhenExhausted</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
                    <span class="n">poolConfig</span><span class="p">.</span><span class="na">setTestOnBorrow</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
                    <span class="c1">//注意连接</span>
                    <span class="n">jedisPool</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JedisPool</span><span class="p">(</span><span class="n">poolConfig</span><span class="p">,</span> <span class="s">&quot;192.168.153.131&quot;</span><span class="p">,</span> <span class="mi">6379</span><span class="p">,</span> <span class="mi">60000</span><span class="p">);</span>

                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">jedisPool</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">release</span><span class="p">(</span><span class="n">JedisPool</span> <span class="n">jedisPool</span><span class="p">,</span> <span class="n">Jedis</span> <span class="n">jedis</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">jedis</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">jedisPool</span><span class="p">.</span><span class="na">returnResource</span><span class="p">(</span><span class="n">jedis</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<h3 id="76">7.6. 解决库存遗留问题<a class="headerlink" href="#76" title="Permanent link">&para;</a></h3>
<h3 id="761-lua">7.6.1. LUA脚本<a class="headerlink" href="#761-lua" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps86.jpg" /></p>
<p>​   Lua 是一个小巧的<a href="http://baike.baidu.com/item/脚本语言">脚本语言</a>，Lua脚本可以很容易的被C/C++ 代码调用，也可以反过来调用C/C++的函数，Lua并没有提供强大的库，一个完整的Lua解释器不过200k，所以Lua不适合作为开发独立应用程序的语言，而是作为嵌入式脚本语言。</p>
<p>很多应用程序、游戏使用LUA作为自己的嵌入式脚本语言，以此来实现可配置性、可扩展性。</p>
<p>这其中包括魔兽争霸地图、魔兽世界、博德之门、愤怒的小鸟等众多游戏插件或外挂。</p>
<p><a href="https://www.w3cschool.cn/lua/">https://www.w3cschool.cn/lua/</a></p>
<h3 id="762-luaredis">7.6.2. LUA脚本在Redis中的优势<a class="headerlink" href="#762-luaredis" title="Permanent link">&para;</a></h3>
<p>将复杂的或者多步的redis操作，写为一个脚本，一次提交给redis执行，减少反复连接redis的次数。提升性能。</p>
<p>LUA脚本是类似redis事务，有一定的原子性，不会被其他命令插队，可以完成一些redis事务性的操作。</p>
<p>但是注意redis的lua脚本功能，只有在Redis 2.6以上的版本才可以使用。</p>
<p>利用lua脚本淘汰用户，解决超卖问题。</p>
<p>redis 2.6版本以后，通过lua脚本解决争抢问题，实际上是redis 利用其单线程的特性，用任务队列的方式解决多任务并发问题。</p>
<p><img alt="img" src="../Redis.assets/wps87.jpg" /></p>
<h2 id="8-redisrdb">8. Redis持久化之RDB<a class="headerlink" href="#8-redisrdb" title="Permanent link">&para;</a></h2>
<h3 id="81-rdbredis-database">8.1. RDB（Redis DataBase）<a class="headerlink" href="#81-rdbredis-database" title="Permanent link">&para;</a></h3>
<h3 id="811">8.1.1. 官网介绍<a class="headerlink" href="#811" title="Permanent link">&para;</a></h3>
<p><a href="http://www.redis.io">www.redis.io</a></p>
<p><img alt="img" src="../Redis.assets/wps88.jpg" /></p>
<p>Redis提供了两种持久化方式</p>
<ul>
<li>RDB(Redis DataBase)</li>
<li>AOF(Append Of File)</li>
</ul>
<h3 id="812-rdb">8.1.2. RDB是什么<a class="headerlink" href="#812-rdb" title="Permanent link">&para;</a></h3>
<p>在指定的时间间隔内将内存中的数据集<font style="color:red">快照</font>写入磁盘， 也就是行话讲的Snapshot快照，它恢复时是将快照文件直接读到内存里</p>
<h3 id="813">8.1.3. 备份(持久化)是如何执行的<a class="headerlink" href="#813" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Redis会单独创建（fork）一个子进程来进行持久化(异步刷盘)，会先将数据写入到 一个临时文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。 </p>
</li>
<li>
<p>整个过程中，主进程是不进行任何IO操作的，这就确保了极高的性能 如果需要进行大规模数据的恢复，且对于数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效。</p>
</li>
<li>
<p>RDB的缺点是最后一次持久化后的数据可能丢失。</p>
</li>
</ul>
<h3 id="814-fork">8.1.4. Fork<a class="headerlink" href="#814-fork" title="Permanent link">&para;</a></h3>
<p>Fork的作用是复制一个与当前进程一样的进程。</p>
<p>新进程的所有数据（变量、环境变量、程序计数器等） 数值都和原进程一致，但是是一个全新的进程，并作为原进程的子进程</p>
<h3 id="815-dumprdb">8.1.5. dump.rdb文件<a class="headerlink" href="#815-dumprdb" title="Permanent link">&para;</a></h3>
<p>在redis.conf中配置文件名称，默认为dump.rdb</p>
<p><img alt="img" src="../Redis.assets/wps89.jpg" /></p>
<h3 id="816">8.1.6. 配置位置<a class="headerlink" href="#816" title="Permanent link">&para;</a></h3>
<p>rdb文件的保存路径，也可以修改。默认为Redis启动时命令行所在的目录下</p>
<p>dir "/myredis/"  </p>
<p><img alt="img" src="../Redis.assets/wps90.jpg" /></p>
<h3 id="817-rdb">8.1.7. 如何触发RDB快照；保持策略<a class="headerlink" href="#817-rdb" title="Permanent link">&para;</a></h3>
<h4 id="8171">8.1.7.1. 配置文件中默认的快照配置<a class="headerlink" href="#8171" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps91.jpg" /></p>
<p>config get * 查看配置信息</p>
<h4 id="8172-save">8.1.7.2. Save<a class="headerlink" href="#8172-save" title="Permanent link">&para;</a></h4>
<p>格式：save 秒钟 写操作次数</p>
<p>RDB是整个内存的压缩过的Snapshot，RDB的数据结构，可以配置复合的快照触发条件，默认是1分钟内改了1万次，或5分钟内改了10次，或15分钟内改了1次。</p>
<p>禁用,不设置save指令，或者给save传入空字符串 </p>
<h4 id="8173-save-vs-bgsave">8.1.7.3. 命令save VS bgsave<a class="headerlink" href="#8173-save-vs-bgsave" title="Permanent link">&para;</a></h4>
<p>使用ll -r 查看文件大小</p>
<ul>
<li>save ：save时只管保存，其它不管，全部阻塞。手动保存。不建议。</li>
<li>bgsave：Redis会在后台异步进行快照操作， 快照同时还可以响应客户端请求。 推荐使用bgsave</li>
<li>可以通过lastsave 命令获取最后一次成功执行快照的时间</li>
</ul>
<h4 id="8174-flushall">8.1.7.4. flushall命令<a class="headerlink" href="#8174-flushall" title="Permanent link">&para;</a></h4>
<ul>
<li>执行flushall命令，也会产生dump.rdb文件，但里面是空的，无意义</li>
<li>可以使用cp备份dump.rbd文件，当误删除时，可以使用备份文件恢复之前的数据</li>
</ul>
<h4 id="8175-stop-writes-on-bgsave-error">8.1.7.5. stop-writes-on-bgsave-error<a class="headerlink" href="#8175-stop-writes-on-bgsave-error" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps92.jpg" /></p>
<p>当Redis无法写入磁盘的话，直接关掉Redis的写操作。推荐yes.</p>
<h4 id="8176-rdbcompressio">8.1.7.6. rdbcompressio 压缩文件<a class="headerlink" href="#8176-rdbcompressio" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps93.jpg" /></p>
<p>对于存储到磁盘中的快照，可以设置是否进行压缩存储。如果是的话，redis会采用LZF算法进行压缩。</p>
<p>如果你不想消耗CPU来进行压缩的话，可以设置为关闭此功能。推荐yes.</p>
<h4 id="8177-rdbchecksum">8.1.7.7. rdbchecksum 检查完整性<a class="headerlink" href="#8177-rdbchecksum" title="Permanent link">&para;</a></h4>
<p><img alt="img" src="../Redis.assets/wps94.jpg" /></p>
<p>在存储快照后，还可以让redis使用CRC64算法来进行数据校验，</p>
<p>但是这样做会增加大约10%的性能消耗，如果希望获取到最大的性能提升，可以关闭此功能</p>
<p>推荐yes.</p>
<h4 id="8178-rdb">8.1.7.8. rdb的备份<a class="headerlink" href="#8178-rdb" title="Permanent link">&para;</a></h4>
<p>先通过config get dir  查询rdb文件的目录 </p>
<p>将*.rdb的文件拷贝到别的地方</p>
<p><strong>rdb的恢复</strong></p>
<p>关闭Redis</p>
<p>先把备份的文件拷贝到工作目录下 cp dump2.rdb dump.rdb</p>
<p>启动Redis, 备份数据会直接加载</p>
<h3 id="818">8.1.8. 优势<a class="headerlink" href="#818" title="Permanent link">&para;</a></h3>
<p>适合大规模的数据恢复</p>
<p>对数据完整性和一致性要求不高更适合使用</p>
<ul>
<li>节省磁盘空间</li>
<li>恢复速度快</li>
</ul>
<p><img alt="img" src="../Redis.assets/wps95.jpg" /></p>
<h3 id="819">8.1.9. 劣势<a class="headerlink" href="#819" title="Permanent link">&para;</a></h3>
<ul>
<li>Fork的时候，内存中的数据被克隆了一份，大致2倍的膨胀性需要考虑</li>
<li>虽然Redis在fork时使用了写时拷贝技术,但是如果数据庞大时还是比较消耗性能。</li>
<li>在备份周期在一定间隔时间做一次备份，所以如果Redis意外down掉的话，就会丢失最后一次快照后的所有修改。</li>
</ul>
<h3 id="8110">8.1.10. 如何停止了解<a class="headerlink" href="#8110" title="Permanent link">&para;</a></h3>
<p>动态停止RDB：redis-cli config set save    #save后给空值，表示禁用保存策略  save ""</p>
<h3 id="8111">8.1.11. 小总结<a class="headerlink" href="#8111" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps96.jpg" /></p>
<h2 id="9-redisaof">9. Redis持久化之AOF<a class="headerlink" href="#9-redisaof" title="Permanent link">&para;</a></h2>
<h3 id="91-aofappend-only-file">9.1. AOF（Append Only File）<a class="headerlink" href="#91-aofappend-only-file" title="Permanent link">&para;</a></h3>
<h3 id="911">9.1.1. 官网<a class="headerlink" href="#911" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps97.jpg" /></p>
<p><img alt="img" src="../Redis.assets/wps98.jpg" /></p>
<h3 id="912">9.1.2. 是什么<a class="headerlink" href="#912" title="Permanent link">&para;</a></h3>
<ul>
<li>以日志的形式来记录每个写操作（增量保存）</li>
<li>将Redis执行过的所有写指令记录下来(读操作不记录)</li>
<li>只许追加文件但不可以改写文件</li>
<li>redis启动之初会读取该文件重新构建数据</li>
<li>换言之，redis 重启的话就根据日志文件的内容将写指令从前到后执行一次以完成数据的恢复工作</li>
</ul>
<h3 id="913-aof">9.1.3. AOF默认不开启<a class="headerlink" href="#913-aof" title="Permanent link">&para;</a></h3>
<p>可以在redis.conf中配置文件名称，默认为 appendonly.aof </p>
<p>AOF文件的保存路径，同RDB的路径一致。</p>
<p><img alt="img" src="../Redis.assets/wps99.jpg" /></p>
<h3 id="914-aofrdbredis">9.1.4. AOF和RDB同时开启，redis听谁的？<a class="headerlink" href="#914-aofrdbredis" title="Permanent link">&para;</a></h3>
<p>AOF和RDB同时开启，系统默认取AOF的数据（数据丢失概率低）</p>
<p>如何验证：将数据flushall，然后停止redis，将rdb文件恢复，查看数据是不是之前备份的rdb文件中的数据。</p>
<p>如果是，说明RDB起作用，否则，AOF起作用<strong>(AOF起作用)</strong>。</p>
<h3 id="915-aof">9.1.5. AOF同步频率设置<a class="headerlink" href="#915-aof" title="Permanent link">&para;</a></h3>
<p>appendfsync always</p>
<p>始终同步，每次Redis的写入都会立刻记入日志-----性能较差但数据完整性比较好</p>
<p>appendfsync everysec</p>
<p>每秒同步，每秒记入日志一次，如果宕机，本秒的数据可能丢失。</p>
<p>appendfsync no</p>
<p>redis不主动进行同步，把同步时机交给操作系统。</p>
<p><img alt="img" src="../Redis.assets/wps102.jpg" /></p>
<h3 id="916-aof">9.1.6. AOF启动/修复/恢复<a class="headerlink" href="#916-aof" title="Permanent link">&para;</a></h3>
<p>AOF的备份机制和性能虽然和RDB不同, 但是备份和恢复的操作同RDB一样，都是拷贝备份文件，需要恢复时再拷贝到Redis工作目录下，启动系统即加载。</p>
<p>正常恢复</p>
<p>修改默认的appendonly no，改为yes</p>
<p>将有数据的aof文件复制一份保存到对应目录(查看目录：config get dir)</p>
<p>恢复：重启redis然后重新加载</p>
<p>异常恢复</p>
<p>修改默认的appendonly no，改为yes</p>
<p><img alt="image-20201008112413634" src="../Redis.assets/image-20201008112413634.png" /></p>
<p>如遇到AOF文件损坏，通过redis-check-aof --fix appendonly.aof进行恢复</p>
<p>备份被写坏的AOF文件</p>
<p><img alt="img" src="../Redis.assets/wps100.jpg" /></p>
<p><img alt="img" src="../Redis.assets/wps101.jpg" /></p>
<p>恢复：重启redis，然后重新加载</p>
<h3 id="917-rewrite">9.1.7. Rewrite压缩<a class="headerlink" href="#917-rewrite" title="Permanent link">&para;</a></h3>
<p>例如：将复杂多个步骤操作的结果，采用简单一个步骤进行操作，减少aop文件大小。</p>
<p><img alt="img" src="../Redis.assets/wps103.jpg" /><img alt="img" src="../Redis.assets/wps104.jpg" /></p>
<p>是什么：</p>
<p>​   AOF采用文件追加方式，文件会越来越大为避免出现此种情况，新增了重写机制, 当AOF文件的大小超过所设定的阈值时，Redis就会启动AOF文件的内容压缩， 只保留可以恢复数据的最小指令集.可以使用命令bgrewriteaof</p>
<p>重写原理，如何实现<strong>重写</strong></p>
<p>​   AOF文件持续增长而过大时，会fork出一条新进程来将文件重写(也是先写临时文件最后再rename)， 遍历新进程的内存中数据，每条记录有一条的Set语句。</p>
<p>​   重写aof文件的操作，并没有读取旧的aof文件， 而是将整个内存中的数据库内容用命令的方式重写了一个新的aof文件，这点和快照有点类似。</p>
<p>no-appendfsync-on-rewrite：</p>
<p>重写时是否可以运用appendfsync，用默认no即可，保证数据安全性。</p>
<p><strong>触发机制，何时重写</strong></p>
<p>重写虽然可以节约大量磁盘空间，减少恢复时间。但是每次重写还是有一定的负担的，因此设定Redis要满足一定条件才会进行重写。 </p>
<ul>
<li>auto-aof-rewrite-percentage：设置重写的基准值，文件达到100%时开始重写（文件是原来重写后文件的2倍时触发）</li>
<li>auto-aof-rewrite-minn-size：设置重写的基准值，最小文件64MB。达到这个值开始重写。</li>
</ul>
<p>Redis会记录上次重写时的AOF大小，默认配置是当AOF文件大小是上次rewrite后大小的一倍且文件大于64M时触发</p>
<p>系统载入时或者上次重写完毕时，Redis会记录此时AOF大小，设为base_size,</p>
<p>如果Redis的AOF当前大小&gt;= base_size +base_size*100% (默认)且当前大小&gt;=64mb(默认)的情况下，Redis会对AOF进行重写。 </p>
<p>例如：文件达到70MB开始重写，降到50MB，下次什么时候开始重写？100MB</p>
<p><img alt="img" src="../Redis.assets/wps105.jpg" /></p>
<h3 id="918">9.1.8. 优势<a class="headerlink" href="#918" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps106.jpg" /></p>
<ul>
<li>备份机制更稳健，丢失数据概率更低。</li>
<li>可读的日志文本，通过操作AOF稳健，可以处理误操作。</li>
</ul>
<h3 id="919">9.1.9. 劣势<a class="headerlink" href="#919" title="Permanent link">&para;</a></h3>
<p>比起RDB占用更多的磁盘空间。</p>
<p>恢复备份速度要慢。</p>
<p>每次读写都同步的话，有一定的性能压力。</p>
<p>存在个别Bug，造成恢复不能。</p>
<h3 id="9110">9.1.10.  小总结<a class="headerlink" href="#9110" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps107.jpg" /></p>
<h3 id="92-which-one">9.2. 总结(Which one)<a class="headerlink" href="#92-which-one" title="Permanent link">&para;</a></h3>
<h3 id="921">9.2.1. 用哪个好<a class="headerlink" href="#921" title="Permanent link">&para;</a></h3>
<p>官方推荐两个都启用。</p>
<p>如果对数据不敏感，可以选单独用RDB。</p>
<p>不建议单独用 AOF，因为可能会出现Bug。</p>
<p>如果只是做纯内存缓存，可以都不用。 </p>
<h3 id="922">9.2.2. 官网建议<a class="headerlink" href="#922" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps108.jpg" /></p>
<ol>
<li>RDB持久化方式能够在指定的时间间隔能对你的数据进行快照存储</li>
<li>AOF持久化方式记录每次对服务器写的操作,当服务器重启的时候会重新执行这些命令来恢复原始的数据,AOF命令以redis协议追加保存每次写的操作到文件末尾. </li>
<li>Redis还能对AOF文件进行后台重写,使得AOF文件的体积不至于过大</li>
<li>只做缓存：如果你只希望你的数据在服务器运行的时候存在,你也可以不使用任何持久化方式.</li>
<li>
<p>同时开启两种持久化方式</p>
</li>
<li>
<p>在这种情况下,当redis重启的时候会优先载入AOF文件来恢复原始的数据, 因为在通常情况下AOF文件保存的数据集要比RDB文件保存的数据集要完整.</p>
</li>
<li>RDB的数据不实时，同时使用两者时服务器重启也只会找AOF文件。那要不要只使用AOF呢？ </li>
<li>
<p>作者建议不要，因为RDB更适合用于备份数据库(AOF在不断变化不好备份)， 快速重启，而且不会有AOF可能潜在的bug，留着作为一个万一的手段。</p>
</li>
<li>
<p>性能建议</p>
</li>
</ol>
<p>​    因为RDB文件只用作后备用途，建议只在Slave上持久化RDB文件，而且只要15分钟备份一次就够了，只保留save 900 1这条规则。 如果Enable AOF，好处是在最恶劣情况下也只会丢失不超过两秒数据，启动脚本较简单只load自己的AOF文件就可以了。代价,一是带来了持续的IO，二是AOF rewrite的最后将rewrite过程中产生的新数据写到新文件造成的阻塞几乎是不可避免的。只要硬盘许可，应该尽量减少AOF rewrite的频率，AOF重写的基础大小默认值64M太小了，可以设到5G以上。默认超过原大小100%大小时重写可以改到适当的数值。 如果不Enable AOF ，仅靠Master-Slave Replicatio 实现高可用性也可以。能省掉一大笔IO也减少了rewrite时带来的系统波动。代价是如果Master/Slave同时倒掉，会丢失十几分钟的数据，启动脚本也要比较两个Master/Slave中的RDB文件，载入较新的那个。新浪微博就选用了这种架构</p>
<h2 id="10-redis_">10. Redis_主从复制<a class="headerlink" href="#10-redis_" title="Permanent link">&para;</a></h2>
<h3 id="101">10.1. 是什么<a class="headerlink" href="#101" title="Permanent link">&para;</a></h3>
<h3 id="1011">10.1.1. 官网<a class="headerlink" href="#1011" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps109.jpg" /></p>
<p>主从复制</p>
<p>主机数据更新后根据配置和策略， 自动同步到备机的master/slaver机制，Master以写为主，Slave以读为主</p>
<h3 id="102">10.2. 能干嘛<a class="headerlink" href="#102" title="Permanent link">&para;</a></h3>
<p>读写分离，性能扩展</p>
<p>容灾快速恢复</p>
<p><img alt="img" src="../Redis.assets/wps110.jpg" /></p>
<h3 id="103">10.3. 主从复制<a class="headerlink" href="#103" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>配从不配主:一主二从
清洗数据
    rm -rf appendonly.aof dump.rdb
redis.conf配置
    开启daemonize yes
    Appendonly关掉或者换名字  appendonly no

创建三个配置文件
    vim redis6379.conf
    vim redis6380.conf
    vim redis6381.conf
内容
    拷贝多个redis.conf文件include
        include /usr/local/bin/myRedis/redis.conf
    Pid文件名字profile
        pidfile /var/run/redis6379.pid
    指定端口port
        port 6379
    dump.rdb名字filename
        dbfilename dump6379.rdb
6380,6381同上
开启服务
    redis-server myRedis/redis6379.conf
    redis-server myRedis/redis6380.conf
    redis-server myRedis/redis6381.conf
查看进程
    ps -ef|grep redis

开启客户端
    redis-cli -h 192.168.153.131 -p 6379
    redis-cli -h 192.168.153.131 -p 6380
    redis-cli -h 192.168.153.131 -p 6381

在6380和6381从服务器中设置主:
    slaveof 192.168.153.131 6379
    slaveof 192.168.153.131 6379
查看信息;
    info replication
    role:master         角色
    connected_slaves:2  小弟
    slave0:ip=192.168.153.131,port=6380,state=online,offset=42,lag=1 小弟1信息
    slave1:ip=192.168.153.131,port=6381,state=online,offset=42,lag=0 小弟2信息
主:可写可读;
从:只能读
</code></pre></div>
<h3 id="104">10.4. 常用的三种主从模式<a class="headerlink" href="#104" title="Permanent link">&para;</a></h3>
<h3 id="1041">10.4.1. 一主二仆<a class="headerlink" href="#1041" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>从机是否可以写？set可否？ </p>
</li>
<li>
<p>其中一台从机down后情况如何？依照原有它能跟上大部队吗？  </p>
</li>
<li>
<p>主机又回来了后，主机新增记录，从机还能否顺利复制？ </p>
</li>
<li>
<p>主机shutdown后情况如何？从机是上位还是原地待命？</p>
</li>
<li>
<p>切入点问题？slave1、slave2是从头开始复制还是从切入点开始复制?比如从k4进来，那之前的k1,k2,k3是否也可以复制？</p>
</li>
</ol>
<p><img alt="img" src="../Redis.assets/wps120.jpg" /></p>
<p>复制原理</p>
<ul>
<li>每次从机联通后，都会给主机发送sync(同步)指令</li>
<li>主机立刻进行存盘操作，发送RDB文件给从机</li>
<li>从机收到RDB文件后覆盖自己的RDB文件，进行全盘加载</li>
<li>之后每次主机的写操作，都会立刻发送给从机，从机执行相同的命令</li>
</ul>
<p><img alt="img" src="../Redis.assets/wps121.jpg" /></p>
<h3 id="1042">10.4.2. 薪火相传<a class="headerlink" href="#1042" title="Permanent link">&para;</a></h3>
<p>上一个Slave可以是下一个slave的Master，Slave同样可以接收其他 slaves的连接和同步请求，那么该slave作为了链条中下一个的master, 可以有效减轻master写压力,去中心化降低风险。</p>
<p>用 slaveof  <ip>  <port></p>
<p>中途变更转向:会清除之前的数据，重新建立拷贝最新的</p>
<p>风险是一旦某个slave宕机，后面的slave都没法备份</p>
<p>主机挂了，从机还是从机，无法写数据了</p>
<p>去掉从服务器身份 slaveof no one</p>
<p><img alt="img" src="../Redis.assets/wps122.jpg" /></p>
<p><img alt="img" src="../Redis.assets/wps123.jpg" /></p>
<h3 id="1043">10.4.3. 反客为主<a class="headerlink" href="#1043" title="Permanent link">&para;</a></h3>
<p>当一个master宕机后，后面的slave可以立刻升为master，其后面的slave不用做任何修改。</p>
<p>用 slaveof  no  one  将从机变为主机。</p>
<p><img alt="img" src="../Redis.assets/wps124.jpg" /></p>
<h3 id="105-sentinel">10.5. 哨兵模式(sentinel)<a class="headerlink" href="#105-sentinel" title="Permanent link">&para;</a></h3>
<h3 id="1051">10.5.1. 是什么<a class="headerlink" href="#1051" title="Permanent link">&para;</a></h3>
<p><font style="color:red">反客为主的自动版</font>，能够后台监控主机是否故障，如果故障了根据投票数自动将从库转换为主库</p>
<p><img alt="img" src="../Redis.assets/wps125.jpg" /></p>
<h3 id="1052">10.5.2. 怎么玩(使用步骤)<a class="headerlink" href="#1052" title="Permanent link">&para;</a></h3>
<ol>
<li>调整为一主二仆模式，6379带着6380、6381</li>
<li>自定义的/myRedis目录下新建sentinel.conf文件，名字绝不能错:配置哨兵,填写内容</li>
<li>
<p>sentinel monitor mymaster 192.168.153.131 6379 1</p>
</li>
<li>
<p>其中mymaster为监控对象起的服务器名称，1为至少有多少个哨兵同意迁移的数量。 </p>
</li>
<li>启动哨兵   执行redis-sentine myRedis/sentinel.conf </li>
</ol>
<h4 id="10525">10.5.2.5. 当主机挂掉，从机选举中产生新的主机<a class="headerlink" href="#10525" title="Permanent link">&para;</a></h4>
<p>(大概10秒左右可以看到哨兵窗口日志，切换了新的主机)</p>
<p>哪个从机会被选举为主机呢？根据优先级别：slave-priority </p>
<p>原主机重启后会变为从机。</p>
<p><img alt="img" src="../Redis.assets/wps128.jpg" /></p>
<h4 id="10526">10.5.2.6. 复制延时<a class="headerlink" href="#10526" title="Permanent link">&para;</a></h4>
<p>​   由于所有的写操作都是先在Master上操作，然后同步更新到Slave上，所以从Master同步到Slave机器有一定的延迟，当系统很繁忙的时候，延迟问题会更加严重，Slave机器数量的增加也会使这个问题更加严重。</p>
<p><img alt="image-20201008125931333" src="../Redis.assets/image-20201008125931333.png" /></p>
<h3 id="1053">10.5.3. 故障恢复<a class="headerlink" href="#1053" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps129.jpg" /></p>
<p><img alt="image-20201008130303415" src="../Redis.assets/image-20201008130303415.png" /></p>
<ol>
<li>优先级在redis.conf中默认：slave-priority 100，值越小优先级越高</li>
<li>偏移量是指获得原主机数据最全的</li>
<li>每个redis实例启动后都会随机生成一个40位的runid</li>
</ol>
<h2 id="11-redis">11. Redis集群<a class="headerlink" href="#11-redis" title="Permanent link">&para;</a></h2>
<h3 id="111">11.1. 问题<a class="headerlink" href="#111" title="Permanent link">&para;</a></h3>
<p>容量不够，redis如何进行扩容？</p>
<p>并发写操作， redis如何分摊？</p>
<h2 id="112">11.2. 什么是集群<a class="headerlink" href="#112" title="Permanent link">&para;</a></h2>
<p>Redis 集群实现了对Redis的水平扩容，即启动N个redis节点，将整个数据库分布存储在这N个节点中，每个节点存储总数据的1/N。</p>
<p>Redis 集群通过分区（partition）来提供一定程度的可用性（availability）： 即使集群中有一部分节点失效或者无法进行通讯， 集群也可以继续处理命令请求。</p>
<h3 id="113-ruby14">11.3. 安装ruby环境14个安装包<a class="headerlink" href="#113-ruby14" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../Redis.assets/wps130.jpg" /></p>
<h3 id="1131">11.3.1. 能上网<a class="headerlink" href="#1131" title="Permanent link">&para;</a></h3>
<p>执行yum install ruby</p>
<p>执行yum install rubygems</p>
<h3 id="1132">11.3.2. 不能上网（推荐）<a class="headerlink" href="#1132" title="Permanent link">&para;</a></h3>
<p>cd  /run/media/root/CentOS 7 x86_64/Packages（路径跟centos6不同） 获取rpm包 </p>
<p>拷贝到/opt/rpmruby/目录下，并cd到此目录</p>
<p>首先，将启动的redis服务器都关闭： killall redis-server，把哨兵和客户端也都杀死</p>
<p>执行：rpm -Uvh *.rpm --nodeps --force</p>
<p>按照依赖安装各个rpm包14个</p>
<p><img alt="img" src="../Redis.assets/wps131.jpg" /></p>
<p>拷贝 redis-3.2.0.gem到 /opt目录下</p>
<p>执行： gem instal --loca redis-3.2.0.gem</p>
<p><img alt="img" src="../Redis.assets/wps132.jpg" /></p>
<p>删除持久化数据:    将rdb,aof文件都删除掉。</p>
<p>制作6个实例，6379,6380,6381,6389,6390,6391</p>
<p>配置基本信息</p>
<div class="highlight"><pre><span></span><code><span class="c1">//清洗数据</span>
    <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">appendonly</span><span class="p">.</span><span class="na">aof</span> <span class="n">dump</span><span class="p">.</span><span class="na">rdb</span>
<span class="c1">//redis.conf配置</span>
    <span class="n">开启daemonize</span> <span class="n">yes</span>
    <span class="n">Appendonly关掉或者换名字</span>  <span class="n">appendonly</span> <span class="n">no</span>
<span class="c1">//创建六个配置文件</span>
    <span class="n">vim</span> <span class="n">redis6379</span><span class="p">.</span><span class="na">conf</span>
    <span class="n">vim</span> <span class="n">redis6380</span><span class="p">.</span><span class="na">conf</span>
    <span class="n">vim</span> <span class="n">redis6381</span><span class="p">.</span><span class="na">conf</span>
    <span class="n">vim</span> <span class="n">redis6389</span><span class="p">.</span><span class="na">conf</span>
    <span class="n">vim</span> <span class="n">redis6390</span><span class="p">.</span><span class="na">conf</span>
    <span class="n">vim</span> <span class="n">redis6391</span><span class="p">.</span><span class="na">conf</span>
<span class="c1">//内容</span>
    <span class="n">拷贝多个redis</span><span class="p">.</span><span class="na">conf文件include</span>
        <span class="n">include</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">myRedis</span><span class="o">/</span><span class="n">redis</span><span class="p">.</span><span class="na">conf</span>
    <span class="n">Pid文件名字profile</span>
        <span class="n">pidfile</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">redis6379</span><span class="p">.</span><span class="na">pid</span>
    <span class="n">指定端口port</span>
        <span class="n">port</span> <span class="mi">6379</span>
    <span class="n">dump</span><span class="p">.</span><span class="na">rdb名字filename</span>
        <span class="n">dbfilename</span> <span class="n">dump6379</span><span class="p">.</span><span class="na">rdb</span>
    <span class="n">打开集群模式</span>
        <span class="n">cluster</span><span class="o">-</span><span class="n">enabled</span> <span class="n">yes</span> 
    <span class="n">设定节点配置文件名</span>
        <span class="n">cluster</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">file</span> <span class="n">nodes</span><span class="o">-</span><span class="mf">6379.</span><span class="n">conf</span> 
   <span class="n">设定节点失联时间</span><span class="err">，</span><span class="n">超过该时间</span><span class="err">（</span><span class="n">毫秒</span><span class="err">），</span><span class="n">集群自动进行主从切换</span><span class="err">。</span>
        <span class="n">cluster</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">timeout</span> <span class="mi">15000</span>  
<span class="c1">//其它均同上</span>
</code></pre></div>
<h3 id="1175-6redis">11.7.5. 启动6个redis服务<a class="headerlink" href="#1175-6redis" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>redis-server myRedis/redis6379.conf
redis-server myRedis/redis6380.conf
redis-server myRedis/redis6381.conf
redis-server myRedis/redis6389.conf
redis-server myRedis/redis6390.conf
redis-server myRedis/redis6391.conf
查看是否启动成功:
ps -ef|grep redis
</code></pre></div>
<p><img alt="img" src="../Redis.assets/wps134.jpg" /></p>
<h3 id="114">11.4. 将六个节点合成一个集群<a class="headerlink" href="#114" title="Permanent link">&para;</a></h3>
<p>组合之前，请确保所有redis实例启动后，nodes-xxxx.conf文件都生成正常。</p>
<p><img alt="img" src="../Redis.assets/wps135.jpg" /></p>
<p>合体：将6个实例放入一个集群中</p>
<p>cd  /opt/redis-3.2.5/src</p>
<div class="highlight"><pre><span></span><code>./redis-trib.rb create --replicas 1 192.168.153.131:6379 192.168.153.131:6380 192.168.153.131:6381 192.168.153.131:6389 192.168.153.131:6390 192.168.153.131:6391
</code></pre></div>
<p>此处不要用127.0.0.1， 请用真实IP地址</p>
<p>--replicas 1 采用最简单的方式配置集群，一台主机，一台从机，正好三组。</p>
<p><img alt="img" src="../Redis.assets/wps136.jpg" /></p>
<p><img alt="img" src="../Redis.assets/wps137.jpg" /></p>
<p>普通方式登录</p>
<p>可能直接进入读主机，存储数据时，会出现MOVED重定向操作。所以，应该以集群方式登录。</p>
<p><img alt="img" src="../Redis.assets/wps138.jpg" /></p>
<p>-c 采用集群策略连接，设置数据会自动切换到相应的写主机</p>
<p><img alt="img" src="../Redis.assets/wps139.jpg" /></p>
<p>通过 cluster nodes 命令查看集群信息</p>
<p><img alt="img" src="../Redis.assets/wps140.jpg" /></p>
<h3 id="115-redis-cluster">11.5. redis cluster 如何分配这六个节点?<a class="headerlink" href="#115-redis-cluster" title="Permanent link">&para;</a></h3>
<p>一个集群至少要有三个主节点。</p>
<p>选项 --replicas 1 表示我们希望为集群中的每个主节点创建一个从节点。</p>
<p>分配原则尽量保证每个主数据库运行在不同的IP地址，每个从库和主库不在一个IP地址上。</p>
<h3 id="116-slots">11.6. 什么是slots<a class="headerlink" href="#116-slots" title="Permanent link">&para;</a></h3>
<p>[OK] Al nodes agree about slots configuration.</p>
<blockquote>
<blockquote>
<blockquote>
<p>Check for ope slots...</p>
<p>Check slots coverage...</p>
</blockquote>
</blockquote>
</blockquote>
<p>[OK] Al 16384 slots covered.</p>
<ul>
<li>一个 Redis 集群包含 16384 个插槽（hash slot）， 数据库中的每个键都属于这 16384 个插槽的其中一个</li>
<li>集群使用公式 CRC16(key) % 16384 来计算键 key 属于哪个槽</li>
<li>其中 CRC16(key) 语句用于计算键 key 的 CRC16 校验和 。</li>
</ul>
<p>集群中的每个节点负责处理一部分插槽。 </p>
<p>举个例子， 如果一个集群可以有主节点， 其中：</p>
<ol>
<li>
<p>节点 A 负责处理 0 号至 5460 号插槽。</p>
</li>
<li>
<p>节点 B 负责处理 5461 号至 10922 号插槽。</p>
</li>
<li>
<p>节点 C 负责处理 10923 号至 16383 号插槽。</p>
</li>
</ol>
<h3 id="117">11.7. 在集群中录入值<a class="headerlink" href="#117" title="Permanent link">&para;</a></h3>
<p>在redis-cli每次录入、查询键值，redis都会计算出该key应该送往的插槽，如果不是该客户端对应服务器的插槽，redis会报错，并告知应前往的redis实例地址和端口。</p>
<p>redis-cli客户端提供了 –c 参数实现自动重定向。</p>
<p>如 redis-cli  -c -h 192.168.153.131 –p 6379 登入后，再录入、查询键值对可以自动重定向。</p>
<p>不在一个slot下的键值，是不能使用mget,mset等多键操作。</p>
<p><img alt="img" src="../Redis.assets/wps141.jpg" /></p>
<p>可以通过{}来定义组的概念，从而使key中{}内相同内容的键值对放到一个slot中去。</p>
<p><img alt="img" src="../Redis.assets/wps142.jpg" /></p>
<h3 id="118">11.8. 查询集群中的值<a class="headerlink" href="#118" title="Permanent link">&para;</a></h3>
<p>CLUSTER KEYSLOT <key> 计算键 key 应该被放置在哪个槽上。</p>
<p>CLUSTER COUNTKEYSINSLOT <slot> 返回槽 slot 目前包含的键值对数量。 </p>
<p>CLUSTER GETKEYSINSLOT <slot> <count> 返回 count 个 slot 槽中的键。</p>
<p><img alt="img" src="../Redis.assets/wps143.jpg" /></p>
<h3 id="119">11.9. 故障恢复<a class="headerlink" href="#119" title="Permanent link">&para;</a></h3>
<p>如果主节点下线？从节点能否自动升为主节点？注意：15秒超时</p>
<p><img alt="img" src="../Redis.assets/wps144.jpg" /></p>
<p>主节点恢复后，主从关系会如何？主节点回来变成从机。</p>
<p><img alt="img" src="../Redis.assets/wps145.jpg" /></p>
<p>如果所有某一段插槽的主从节点都宕掉，redis服务是否还能继续?</p>
<p>redis.conf中的参数  cluster-require-full-coverage,默认为yes,16384个slot都正常的时候才能对外提供服务</p>
<p>如果某一段插槽的主从都挂掉，而cluster-require-full-coverage 为yes ，那么 ，整个集群都挂掉</p>
<p>如果某一段插槽的主从都挂掉，而cluster-require-full-coverage 为no ，那么，该插槽数据全都不能使用，也无法存储。</p>
<h3 id="1110-jedis">11.10. 集群的Jedis开发<a class="headerlink" href="#1110-jedis" title="Permanent link">&para;</a></h3>
<p>即使连接的不是主机，集群会自动切换主机存储。主机写，从机读。</p>
<p>无中心化主从集群。无论从哪台主机写的数据，其他主机上都能读到数据。</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JedisClusterTest</span> <span class="p">{</span> 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>   
        <span class="n">Set</span><span class="o">&lt;</span><span class="n">HostAndPort</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span><span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">HostAndPort</span><span class="o">&gt;</span><span class="p">();</span>   
        <span class="n">set</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">HostAndPort</span><span class="p">(</span><span class="s">&quot;192.168.153.131&quot;</span><span class="p">,</span><span class="mi">6379</span><span class="p">));</span>   
        <span class="n">JedisCluster</span> <span class="n">jedisCluster</span><span class="o">=</span><span class="k">new</span> <span class="n">JedisCluster</span><span class="p">(</span><span class="n">set</span><span class="p">);</span>   
        <span class="n">jedisCluster</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;k1&quot;</span><span class="p">,</span> <span class="s">&quot;v1&quot;</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedisCluster</span><span class="p">.</span><span class="na">get</span><span class="p">(</span>  <span class="s">&quot;k1&quot;</span>  <span class="p">));</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="1111-redis">11.11. Redis 集群提供了以下好处<a class="headerlink" href="#1111-redis" title="Permanent link">&para;</a></h3>
<p>实现扩容</p>
<p>分摊压力</p>
<p>无中心配置相对简单</p>
<h3 id="1112-redis">11.12. Redis 集群的不足<a class="headerlink" href="#1112-redis" title="Permanent link">&para;</a></h3>
<p>多键操作是不被支持的   </p>
<p>多键的Redis事务是不被支持的。</p>
<p>lua脚本不被支持。</p>
<p>集群方案出现较晚，很多公司已经采用了其他的集群方案，而代理或者客户端分片的方案想要迁移至redis cluster，需要整体迁移而不是逐步过渡，复杂度较大。</p>

              
			  <hr><span id="busuanzi_container_page_pv"><font size="3" color="grey">本文总阅读量<span id="busuanzi_value_page_pv"></span>次</font></span><br/>
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../%E6%A1%86%E6%9E%B6%E9%AB%98%E7%BA%A7%E8%AF%BE%E7%A8%8B%E7%B3%BB%E5%88%97%E4%B9%8BLinuxCentOS7/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Linux" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Linux
            </div>
          </div>
        </a>
      
      
        
        <a href="../../%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/Docker/Docker/" class="md-footer__link md-footer__link--next" aria-label="Next: Docker" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Docker
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 尚硅谷
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.1514a9a0.min.js"></script>
      
        <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      
    
  </body>
</html>